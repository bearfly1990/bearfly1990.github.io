<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Shawn&#039;Blog Test</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Shawn&#039;Blog Test"><meta name="msapplication-TileImage" content="/img/favicon.ico"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Shawn&#039;Blog Test"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta property="og:type" content="blog"><meta property="og:title" content="Shawn&#039;Blog Test"><meta property="og:url" content="https://bearfly1990.github.io/"><meta property="og:site_name" content="Shawn&#039;Blog Test"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://bearfly1990.github.io/img/og_image.png"><meta property="article:author" content="Shawn"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://bearfly1990.github.io"},"headline":"Shawn'Blog Test","image":["https://bearfly1990.github.io/img/og_image.png"],"author":{"@type":"Person","name":"Shawn"},"description":""}</script><link rel="icon" href="/img/favicon.ico"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.4.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/favicon.ico" alt="Shawn&#039;Blog Test" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/bearfly1990"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2018-08-24T16:00:00.000Z" title="2018/8/25 上午12:00:00">2018-08-25</time></span><span class="level-item">Updated&nbsp;<time dateTime="2018-11-30T15:46:40.248Z" title="2018/11/30 下午11:46:40">2018-11-30</time></span><span class="level-item"> BF </span><span class="level-item">9 minutes read (About 1300 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2018/08/25/2018/08/2018-08-25-PerfTestTraining/">Performance Test Training (1)</a></h1><div class="content"><h1 id="Performance-Test-Training-1"><a href="#Performance-Test-Training-1" class="headerlink" title="Performance Test Training (1)"></a>Performance Test Training (1)</h1><p>今天是性能测试培训的第一天，主要内容是性能测试涉及到的概念，以及讲师自己的一些实践，个人感觉还是有些收获的。</p>
<p>下面就简单总结下一点知识。</p>
<h2 id="Performance-Idicator"><a href="#Performance-Idicator" class="headerlink" title="Performance Idicator"></a>Performance Idicator</h2><p>针对目前大多数的系统，都可以发起请求，来得到结果。尤其是<code>REST API</code>这种形式的，比如之前针对<code>Publisher Rest API</code>，就有对应的<code>SoupUI</code>的cases，也有基于<code>Jmeter</code>对api的反应时间(Response Time)进行的测试。</p>
<p>总的来说，有下面三个主要的指标:</p>
<ul>
<li>TPS (Transaction Per Second)</li>
<li>Response Time</li>
<li>Error Rate</li>
</ul>
<h3 id="TPS"><a href="#TPS" class="headerlink" title="TPS"></a>TPS</h3><p><code>Transaction per second</code>指是一秒钟时间内能完成的事务数，是一个最基本最重要的指标。一般来说，在制定性能测试计划的时候，会设定目标TPS的目标值，从具体的需求中抽离出来。</p>
<p><code>TPS</code>的计算方式为1/RT*users，比如一个用户实例时，假设RT为0.2,则<code>TPS = 1/0.2=20</code></p>
<p>在理想情况下，假设RT不变，则<code>TPS</code>如下所示：</p>
<table>
<thead>
<tr>
<th>Users(Threads)</th>
<th>RT</th>
<th>TPS</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>0.2</td>
<td>1/0.2*1=5</td>
</tr>
<tr>
<td>2</td>
<td>0.2</td>
<td>1/0.2*2=10</td>
</tr>
<tr>
<td>3</td>
<td>0.2</td>
<td>1/0.2*3=15</td>
</tr>
<tr>
<td>…</td>
<td>…</td>
<td>…</td>
</tr>
</tbody></table>
<h3 id="Response-Time-RT"><a href="#Response-Time-RT" class="headerlink" title="Response Time(RT)"></a>Response Time(RT)</h3><p>系统反应时间一般不会一成不变的，当系统请求越来越多的时候，反应时间会逐渐延长。所以结合上请求数，<code>TPS</code>一般为一个曲线，并且有峰值。</p>
<p>当超过之后，便会开始达到系统处理的瓶颈，使反应时间增加，反而使<code>TPS</code>减小。所以一般我们会从小变大线程数来得到<code>TPS</code>的结果，示意图如下，实际没有这么平滑。</p>
<p><img src="/img/post/2018/08/2018-08-25-PerfTestTraining-TPS.jpg" alt="TPS"></p>
<h3 id="Error-Rate"><a href="#Error-Rate" class="headerlink" title="Error Rate"></a>Error Rate</h3><p>当线程增加的时候，便会增加应用的负荷，便可能会有error产生，这个时候便有一个指标便是<code>Error Rate</code>，即一批线程中有错误的比率，比如一个正常的请求返回繁忙的错误。</p>
<p>尤其是在达到最大的<code>TPS</code>的时候，如果错误率很高的话，那也是没有意义的。</p>
<h3 id="Others"><a href="#Others" class="headerlink" title="Others"></a>Others</h3><p>一般来说，性能指标能否完成，主要看以下：</p>
<ul>
<li>速度相关(TPS / RT)</li>
<li>容量相关(吞吐, Hit, PV)</li>
<li>资源相关(CPU, Memory, IO)</li>
</ul>
<p>我们很多时候会先定义性能指标，而最后的测试是为了估算应用最后能否达到预期的数值，给予项目人员及时的反馈，并帮助分析性能的瓶颈，甚至找到最根本的原因。</p>
<h2 id="Performance-Test-Roles"><a href="#Performance-Test-Roles" class="headerlink" title="Performance Test Roles"></a>Performance Test Roles</h2><p>上面讲的是性能测试中的表象和指标，其实只是性能测试一个最基本的一个方面，理论上来说，性能测试工作可以划分为以下几个角色：</p>
<ul>
<li>性能脚本工程师</li>
<li>性能场景设计工程师</li>
<li>性能分析工程师</li>
</ul>
<h3 id="Performance-Scripts-Engineer"><a href="#Performance-Scripts-Engineer" class="headerlink" title="Performance Scripts Engineer"></a>Performance Scripts Engineer</h3><p>这个最好理解，同时也是我最近的角色，负责Messaage Import的性能测试环境的搭建，性能相关数据的采集。</p>
<p>相对来说，大部分人都能做到这个程度，毕竟技术门槛不高，而且目标比较明确。</p>
<h3 id="Performance-Scenario-Design-Engineer"><a href="#Performance-Scenario-Design-Engineer" class="headerlink" title="Performance Scenario Design Engineer"></a>Performance Scenario Design Engineer</h3><p>这一块的话，更像是目前David和陶总担任的角色。因为从用户需求角度和项目理解熟悉程度，我还没有那么高，同时我更多的精力是在完成测试脚本和执行测试计划。</p>
<p>当然，在一些情况下，我也有自己的一些测试方向和想法，但因为资源有限的情况下，还是要优先以客户需求为导向的测试。</p>
<p>希望之后我也能更多承担起这块的角色，但这个前提是我对业务还有系统的功能有更深入的了解。</p>
<p>因为测试数据的建立对我来说就有一定的难度，需要大家的support.</p>
<h3 id="Performance-Analysis-Engineer"><a href="#Performance-Analysis-Engineer" class="headerlink" title="Performance Analysis Engineer"></a>Performance Analysis Engineer</h3><p>这个角色是性能测试最核心也是最难的一个角色。需要对应用，业务都了解的情况下，掌握非常好的分析方法和经验，会使用各种分析工具和系统级命令。</p>
<p>从最直接的性能结果开始，最终达到代码级别的诊断与分析。</p>
<p>一般来说都是一步一步精细化下去：</p>
<p>现象 -&gt; OS -&gt; CPU -&gt; Processor -&gt; Thread -&gt;Java/C/…-&gt; dump -&gt; code</p>
<h2 id="Performance-Test-Knowledge"><a href="#Performance-Test-Knowledge" class="headerlink" title="Performance Test Knowledge"></a>Performance Test Knowledge</h2><p>性能测试要做的好，需要掌握了解许多的知识，也是一个很庞大的知识体系：</p>
<ul>
<li>压力工具(Load Runner/Jmeter/…)</li>
<li>监控分析工具</li>
<li>中间件(MQ/Tuxedo/…)</li>
<li>网络(Network)，网络性能分析</li>
<li>OS(Windows/Linux/…)</li>
<li>应用服务器(Apache/Nginx/…)</li>
<li>DB</li>
<li>存储</li>
<li>Code</li>
<li>…</li>
</ul>
<h2 id="Last"><a href="#Last" class="headerlink" title="Last"></a>Last</h2><p>今天还介绍了许多实用的知识，比如Linux系统的架构，常用的一些网络协议，系统自己的性能查看工具等。</p>
<p>之后有时候，再自己多实践与总结。</p>
<p>晚安。</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2018-08-24T16:00:00.000Z" title="2018/8/25 上午12:00:00">2018-08-25</time></span><span class="level-item">Updated&nbsp;<time dateTime="2018-11-30T15:46:40.248Z" title="2018/11/30 下午11:46:40">2018-11-30</time></span><span class="level-item"> BF </span><span class="level-item">4 minutes read (About 654 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2018/08/25/2018/08/2018-08-25-SpiderDouban/">Spider for Douban (01)</a></h1><div class="content"><h1 id="Top-n-Movies-of-Spider-for-Douban"><a href="#Top-n-Movies-of-Spider-for-Douban" class="headerlink" title="Top n Movies of Spider for Douban"></a>Top n Movies of Spider for Douban</h1><p>网上有许多爬虫的入门脚本，都是去爬豆瓣前 250 的电影信息，我也参考并写了一个，做为入门。</p>
<p>因为豆瓣的网页结构相对稳定，变化不多，不然要花太多时候去维护。</p>
<p>在代码中可以修改 page 的值来取得更多的页数，我发现其实是可以超过 250 个的，排名 250 后的资源，也可以通过手动修改得到。</p>
<h2 id="Result"><a href="#Result" class="headerlink" title="Result"></a>Result</h2><p>运行后的结果大致如下：</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">肖申克的救赎(9.6)</span><br><span class="line">霸王别姬(9.5)</span><br><span class="line">这个杀手不太冷(9.4)</span><br><span class="line">阿甘正传(9.4)</span><br><span class="line">美丽人生(9.5)</span><br><span class="line">泰坦尼克号(9.3)</span><br><span class="line">千与千寻(9.3)</span><br><span class="line">辛德勒的名单(9.4)</span><br><span class="line">盗梦空间(9.3)</span><br><span class="line">机器人总动员(9.3)</span><br><span class="line">忠犬八公的故事(9.3)</span><br><span class="line">三傻大闹宝莱坞(9.2)</span><br><span class="line">海上钢琴师(9.2)</span><br><span class="line">放牛班的春天(9.2)</span><br><span class="line">大话西游之大圣娶亲(9.2)</span><br><span class="line">楚门的世界(9.1)</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>下载的海报如下：<br><img src="/img/post/2018/08/2018-08-25-SpiderDouban-PostSamples.jpg" alt="Posts"></p>
<h2 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">author: xiche</span></span><br><span class="line"><span class="string">create at: 08/24/2018</span></span><br><span class="line"><span class="string">description:</span></span><br><span class="line"><span class="string">    Spider for Douban</span></span><br><span class="line"><span class="string">Change log:</span></span><br><span class="line"><span class="string">Date        Author      Version    Description</span></span><br><span class="line"><span class="string">08/24/2018  xiche       1.0        Top n Movies of Spider for Douban</span></span><br><span class="line"><span class="string">08/28/2018  xiche       1.1        refactor the code</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> codecs</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">from</span> contextlib <span class="keyword">import</span> closing</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">from</span> abc <span class="keyword">import</span> abstractmethod, ABC</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Spider</span>(<span class="params">ABC</span>):</span></span><br><span class="line">    url_request = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    html = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    HEADER_BROWER = &#123;</span><br><span class="line">        <span class="string">&#x27;User-Agent&#x27;</span>:<span class="string">&#x27;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko)&#x27;</span></span><br><span class="line">            <span class="string">&#x27;Chrome/63.0.3239.132 Safari/537.36&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">download_page</span>(<span class="params">self</span>):</span></span><br><span class="line">        data = requests.get(self.url_request, headers=self.HEADER_BROWER).text</span><br><span class="line">        self.html = data</span><br><span class="line">        <span class="keyword">return</span> data</span><br><span class="line"></span><br><span class="line"><span class="meta">    @abstractmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse_html</span>(<span class="params">self, html</span>):</span></span><br><span class="line">       <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @abstractmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">start_spider</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getPic</span>(<span class="params">self, data</span>):</span></span><br><span class="line">        pic_list = re.findall(<span class="string">r&#x27;src=&quot;http.+?.jpg&quot;&#x27;</span>, data)</span><br><span class="line">        <span class="keyword">return</span> pic_list</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">download_pic</span>(<span class="params">self, url, name, folder = <span class="string">&#x27;imgs/&#x27;</span></span>):</span></span><br><span class="line">        rootPath = folder</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(rootPath):</span><br><span class="line">            os.makedirs(rootPath)</span><br><span class="line">        response = requests.get(url, stream=<span class="literal">True</span>)</span><br><span class="line">        pic_type = <span class="string">&#x27;.&#x27;</span> + url.split(<span class="string">&#x27;.&#x27;</span>)[-<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">with</span> closing(requests.get(url, stream=<span class="literal">True</span>)) <span class="keyword">as</span> responses:</span><br><span class="line">            <span class="keyword">with</span> <span class="built_in">open</span>(rootPath + name + pic_type, <span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> file:</span><br><span class="line">                <span class="keyword">for</span> data <span class="keyword">in</span> response.iter_content(<span class="number">128</span>):</span><br><span class="line">                    file.write(data)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SpiderDouban250</span>(<span class="params">Spider</span>):</span></span><br><span class="line">    start = <span class="number">0</span></span><br><span class="line">    page  = <span class="number">2</span></span><br><span class="line">    movies_list_total = []</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, page=<span class="number">2</span></span>):</span></span><br><span class="line">        self.page = page</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse_html</span>(<span class="params">self, html=<span class="literal">None</span></span>):</span></span><br><span class="line">        html = html <span class="keyword">if</span> html <span class="keyword">else</span> self.html</span><br><span class="line">        soup = BeautifulSoup(html, <span class="string">&quot;html.parser&quot;</span>)</span><br><span class="line">        movie_list_soup = soup.find(<span class="string">&#x27;ol&#x27;</span>, attrs=&#123;<span class="string">&#x27;class&#x27;</span>: <span class="string">&#x27;grid_view&#x27;</span>&#125;)</span><br><span class="line">        movie_name_list = []</span><br><span class="line">        <span class="keyword">for</span> movie_li <span class="keyword">in</span> movie_list_soup.find_all(<span class="string">&#x27;li&#x27;</span>):</span><br><span class="line">            detail = movie_li.find(<span class="string">&#x27;div&#x27;</span>, attrs=&#123;<span class="string">&#x27;class&#x27;</span>: <span class="string">&#x27;hd&#x27;</span>&#125;)</span><br><span class="line">            movie_name = detail.find(<span class="string">&#x27;span&#x27;</span>, attrs=&#123;<span class="string">&#x27;class&#x27;</span>: <span class="string">&#x27;title&#x27;</span>&#125;).getText()</span><br><span class="line">            score = movie_li.find(<span class="string">&#x27;div&#x27;</span>, attrs=&#123;<span class="string">&#x27;class&#x27;</span>: <span class="string">&#x27;bd&#x27;</span>&#125;)</span><br><span class="line">            movie_score = score.find(<span class="string">&#x27;span&#x27;</span>, attrs=&#123;<span class="string">&#x27;class&#x27;</span>: <span class="string">&#x27;rating_num&#x27;</span>&#125;).getText()</span><br><span class="line">            movie_detail = <span class="string">&quot;&#123;&#125;(&#123;&#125;)&quot;</span>.<span class="built_in">format</span>(movie_name , movie_score)</span><br><span class="line">            movie_name_list.append(movie_detail)</span><br><span class="line"></span><br><span class="line">        next_page = soup.find(<span class="string">&#x27;span&#x27;</span>, attrs=&#123;<span class="string">&#x27;class&#x27;</span>: <span class="string">&#x27;next&#x27;</span>&#125;).find(<span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> next_page:</span><br><span class="line">            <span class="keyword">return</span> movie_name_list, self.url_request + next_page[<span class="string">&#x27;href&#x27;</span>]</span><br><span class="line">        <span class="keyword">return</span> movie_name_list, <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">start_spider</span>(<span class="params">self</span>):</span></span><br><span class="line">        start = self.start</span><br><span class="line">        movies_list_total = []</span><br><span class="line">        <span class="keyword">while</span>(start &lt; <span class="number">25</span> * self.page):</span><br><span class="line">            self.url_request = <span class="string">&#x27;https://movie.douban.com/top250?self.start=&#123;&#125;&#x27;</span>.<span class="built_in">format</span>(start)</span><br><span class="line">            self.download_page()</span><br><span class="line">            picdata = self.getPic(self.html)</span><br><span class="line">            movies, url = self.parse_html()</span><br><span class="line">            movies_list_total = movies_list_total + movies</span><br><span class="line">            index_movies = <span class="number">0</span></span><br><span class="line">            <span class="keyword">for</span> picinfo <span class="keyword">in</span> picdata:</span><br><span class="line">                self.download_pic(picinfo[<span class="number">5</span>:-<span class="number">1</span>], <span class="string">&#x27;Top&#x27;</span> + <span class="built_in">str</span>(index_movies+<span class="number">1</span>) + <span class="string">&#x27;-&#x27;</span> + movies[index_movies])</span><br><span class="line">                <span class="built_in">print</span>(movies[index_movies] + <span class="string">&#x27; download finished&#x27;</span>)</span><br><span class="line">                index_movies += <span class="number">1</span></span><br><span class="line">                start += <span class="number">1</span></span><br><span class="line">        <span class="keyword">with</span> codecs.<span class="built_in">open</span>(<span class="string">&#x27;movies.txt&#x27;</span>, <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> fp:</span><br><span class="line">            fp.write(<span class="string">u&#x27;\r\n&#x27;</span>.join(movies_list_total))</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    spider_douban = SpiderDouban250(<span class="number">2</span>)</span><br><span class="line">    spider_douban.start_spider()</span><br></pre></td></tr></table></figure>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2018-08-20T16:00:00.000Z" title="2018/8/21 上午12:00:00">2018-08-21</time></span><span class="level-item">Updated&nbsp;<time dateTime="2018-10-18T13:45:48.446Z" title="2018/10/18 下午9:45:48">2018-10-18</time></span><span class="level-item"> BF </span><span class="level-item">8 minutes read (About 1228 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2018/08/21/2018/08/2018-08-21-ProcessMonitor/">System Monitor by Powershell</a></h1><div class="content"><h1 id="Process-Monitor"><a href="#Process-Monitor" class="headerlink" title="Process Monitor"></a>Process Monitor</h1><p>先上代码:</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$CurrentDir</span> = <span class="built_in">Split-Path</span> <span class="variable">$MyInvocation</span>.MyCommand.Path</span><br><span class="line"><span class="variable">$file</span> = <span class="string">&quot;<span class="variable">$CurrentDir</span>/Monitor.csv&quot;</span></span><br><span class="line"><span class="variable">$ps_name</span> = <span class="string">&quot;java&quot;</span></span><br><span class="line"><span class="variable">$show_sys_cpu_rate</span> = <span class="variable">$false</span></span><br><span class="line"><span class="variable">$show_sys_mem_rate</span> = <span class="variable">$false</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$memory_sys_total</span> = (<span class="built_in">Get-WmiObject</span> <span class="literal">-Class</span> Win32_PhysicalMemory |<span class="built_in">measure</span> capacity <span class="literal">-sum</span>).Sum  <span class="comment">#(gwmi win32_computersystem).TotalPhysicalMemory</span></span><br><span class="line"><span class="variable">$cpu_cores</span> = (<span class="built_in">Get-WmiObject</span> Win32_ComputerSystem).NumberOfLogicalProcessors</span><br><span class="line"><span class="comment"># $memory_sys_total = (Get-Counter &quot;\Memory\System Driver Total Bytes&quot;).CounterSamples | Sort-Object Path</span></span><br><span class="line"><span class="comment"># $memory_sys_total = $memory_sys_total[0].CookedValue</span></span><br><span class="line"><span class="string">&quot;time,CPU(%),Memory(%),CPU_<span class="variable">$ps_name</span>(%), Memory_<span class="variable">$ps_name</span>(%)&quot;</span> &gt;&gt; <span class="variable">$file</span></span><br><span class="line"><span class="keyword">while</span> (<span class="variable">$True</span>) &#123;</span><br><span class="line">    <span class="variable">$cpu_rate_pss</span> = (<span class="built_in">Get-Counter</span> <span class="string">&quot;\process(<span class="variable">$ps_name</span>*)\% Processor Time&quot;</span>).CounterSamples | <span class="built_in">Sort-Object</span> Path</span><br><span class="line">    <span class="variable">$cpu_rate_sys</span> = (<span class="built_in">Get-Counter</span> <span class="string">&quot;\processor(_total)\% processor time&quot;</span>).CounterSamples | <span class="built_in">Sort-Object</span> Path</span><br><span class="line">    <span class="variable">$cpu_rate_sys</span> = <span class="variable">$cpu_rate_sys</span>[<span class="number">0</span>].CookedValue</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$show_sys_cpu_rate</span> <span class="operator">-eq</span> <span class="variable">$false</span>)&#123;</span><br><span class="line">        <span class="variable">$cpu_rate_sys</span> = <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable">$memory_pss</span>   = (<span class="built_in">Get-Counter</span> <span class="string">&quot;\Process(<span class="variable">$ps_name</span>*)\Working Set - Private&quot;</span>).CounterSamples | <span class="built_in">Sort-Object</span> Path</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$show_sys_mem_rate</span>)&#123;</span><br><span class="line">        <span class="variable">$memory_sys_available</span>   = (<span class="built_in">Get-Counter</span> <span class="string">&quot;\Memory\Available Bytes&quot;</span>).CounterSamples | <span class="built_in">Sort-Object</span> Path</span><br><span class="line">        <span class="variable">$memory_sys_available</span>   = <span class="variable">$memory_sys_available</span>[<span class="number">0</span>].CookedValue</span><br><span class="line">        <span class="variable">$memory_sys</span>             = <span class="variable">$memory_sys_total</span> - <span class="variable">$memory_sys_available</span></span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="variable">$memory_sys</span> = <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable">$cpu_rate_pss_total</span> = <span class="number">0</span></span><br><span class="line">    <span class="variable">$memory_pss_total</span> = <span class="number">0</span></span><br><span class="line">    <span class="variable">$cpu_rate_pss</span>.Count</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">For</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> <span class="operator">-lt</span> <span class="variable">$cpu_rate_pss</span>.Count; <span class="variable">$i</span>++) &#123;</span><br><span class="line">            <span class="variable">$cpu_rate_pss_total</span>  = <span class="variable">$cpu_rate_pss_total</span> + <span class="variable">$cpu_rate_pss</span>[<span class="variable">$i</span>].CookedValue</span><br><span class="line">            <span class="variable">$memory_pss_total</span>    = <span class="variable">$memory_pss_total</span> + <span class="variable">$memory_pss</span>[<span class="variable">$i</span>].CookedValue</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">catch</span>&#123;</span><br><span class="line">        <span class="built_in">Write-Output</span> <span class="string">&quot;&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable">$cpu_rate_sys</span>           = <span class="string">&quot;&#123;0:F2&#125;&quot;</span> <span class="operator">-f</span> <span class="variable">$cpu_rate_sys</span></span><br><span class="line">    <span class="variable">$cpu_rate_pss_total</span>     = <span class="string">&quot;&#123;0:F2&#125;&quot;</span> <span class="operator">-f</span> <span class="variable">$cpu_rate_pss_total</span> / <span class="variable">$cpu_cores</span></span><br><span class="line"></span><br><span class="line">    <span class="variable">$memory_rate_sys</span>        = <span class="string">&quot;&#123;0:F2&#125;&quot;</span> <span class="operator">-f</span> ( <span class="variable">$memory_sys</span> / <span class="variable">$memory_sys_total</span> * <span class="number">100</span>)</span><br><span class="line">    <span class="variable">$memory_rate_pss_total</span>  = <span class="string">&quot;&#123;0:F2&#125;&quot;</span> <span class="operator">-f</span> ( <span class="variable">$memory_pss_total</span> / <span class="variable">$memory_sys_total</span> * <span class="number">100</span>)</span><br><span class="line"></span><br><span class="line">    <span class="variable">$time</span> = <span class="built_in">Get-Date</span> <span class="literal">-format</span> <span class="string">&quot;MM/dd/yyyy HH:mm:ss&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">Write-Output</span> <span class="string">&quot;Time=<span class="variable">$time</span>;CPU=<span class="variable">$cpu_rate_sys</span>;Mem=<span class="variable">$memory_rate_sys</span>;CPU(<span class="variable">$ps_name</span>)=<span class="variable">$cpu_rate_pss_total</span>;Mem(<span class="variable">$ps_name</span>)=<span class="variable">$memory_rate_pss_total</span>&quot;</span></span><br><span class="line">    <span class="string">&quot;<span class="variable">$time</span>,<span class="variable">$cpu_rate_sys</span>,<span class="variable">$memory_rate_sys</span>,<span class="variable">$cpu_rate_pss_total</span>,<span class="variable">$memory_rate_pss_total</span>&quot;</span> &gt;&gt; <span class="variable">$file</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">sleep</span> <span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>之前也有写过监测系统CPU和内存的<code>Powershell</code>脚本和<code>Python</code>脚本，不过当时都只有监测系统的CPU和内存的占比变化，没有针对进程。</p>
<p>最近在做测试的时候，已经在脚本中加入了<code>Python</code>对进程的操作，不过因为和具体项目结合在一起，还没有时间把代码抽象出来。今天本来想着在之前<code>Powershell</code>脚本的基础上改一下，不过没想到踩了一些坑，主要还是不熟悉。尤其如果对<code>C#</code>比较了解的话，写起来会方便很多。<code>Powershell</code>可以直接调用<code>.Net</code>的许多对象和方法。</p>
<h2 id="Main-Knowledge"><a href="#Main-Knowledge" class="headerlink" title="Main Knowledge"></a>Main Knowledge</h2><p>和之前<a href="https://bearfly1990.github.io/2018/08/07/ProcessInfo/">ProcessInfo</a>中类似，<code>Powershell</code>也有许多方法去取得进程信息。可以利用系统本身的命令得到，而今天使用的，类似系统自身的<code>Performance Monitor</code>，通过<code>Get-Counter</code>方法来得到对应的计数器信息。</p>
<h3 id="Get-Counter"><a href="#Get-Counter" class="headerlink" title="Get-Counter"></a>Get-Counter</h3><p>在<code>Powershell</code>运行窗体中，我们输入以下信息，可以得到系统的总的CPU使用率</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">PS C:\Users\mayn&gt; Get-Counter &quot;\processor(_total)\% processor time&quot;</span><br><span class="line"></span><br><span class="line">Timestamp                 CounterSamples</span><br><span class="line">---------                 --------------</span><br><span class="line">2018/8/21 22:41:37        \\pc-cx\processor(_total)\% processor time :</span><br><span class="line">                          2.49161836524493</span><br></pre></td></tr></table></figure>

<p>那如果我们想得到某个进程呢？</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">PS C:\Users\mayn&gt; Get-Counter &quot;\process(Code)\% processor time&quot;</span><br><span class="line"></span><br><span class="line">Timestamp                 CounterSamples</span><br><span class="line">---------                 --------------</span><br><span class="line">2018/8/21 22:54:45        \\pc-cx\process(code)\% processor time :</span><br><span class="line">                          0</span><br></pre></td></tr></table></figure>

<p>那多个同名进程呢？就如这VSCode的进程<code>code.exe</code>有好多个,就可以用通配符：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">PS C:\Users\mayn&gt; Get-Counter &quot;\process(Code*)\% processor time&quot;</span><br><span class="line"></span><br><span class="line">Timestamp                 CounterSamples</span><br><span class="line">---------                 --------------</span><br><span class="line">2018/8/21 22:55:57        \\pc-cx\process(code#7)\% processor time :</span><br><span class="line">                          0</span><br><span class="line"></span><br><span class="line">                          \\pc-cx\process(code#6)\% processor time :</span><br><span class="line">                          0</span><br><span class="line"></span><br><span class="line">                          \\pc-cx\process(code#5)\% processor time :</span><br><span class="line">                          0</span><br><span class="line"></span><br><span class="line">                          \\pc-cx\process(code#4)\% processor time :</span><br><span class="line">                          0</span><br><span class="line"></span><br><span class="line">                          \\pc-cx\process(code#3)\% processor time :</span><br><span class="line">                          0</span><br><span class="line"></span><br><span class="line">                          \\pc-cx\process(code#2)\% processor time :</span><br><span class="line">                          0</span><br><span class="line"></span><br><span class="line">                          \\pc-cx\process(code#1)\% processor time :</span><br><span class="line">                          0</span><br><span class="line"></span><br><span class="line">                          \\pc-cx\process(code)\% processor time :</span><br><span class="line">                          0</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>那么回过头来再看代码里，就思路很清晰了，就是利用<code>Get-Counter</code>来取得我们想要的信息，再处理，就可以得到我们想要的结果。</p>
<p>那怎么看我可以得到哪些信息呢？一个就是上网查，另一个是可以如下去得到相关的信息,你可以把<code>memory</code>替换成<code>process</code>等其它值来看有什么对应的信息可以获取。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">PS C:\Users\mayn&gt; (Get-Counter -ListSet  memory).paths</span><br><span class="line">\Memory\Page Faults/sec</span><br><span class="line">\Memory\Available Bytes</span><br><span class="line">\Memory\Committed Bytes</span><br><span class="line">\Memory\Commit Limit</span><br><span class="line">\Memory\Write Copies/sec</span><br><span class="line">\Memory\Transition Faults/sec</span><br><span class="line">\Memory\Cache Faults/sec</span><br><span class="line">\Memory\Demand Zero Faults/sec</span><br><span class="line">\Memory\Pages/sec</span><br><span class="line">\Memory\Pages Input/sec</span><br><span class="line">\Memory\Page Reads/sec</span><br><span class="line">\Memory\Pages Output/sec</span><br><span class="line">\Memory\Pool Paged Bytes</span><br><span class="line">\Memory\Pool Nonpaged Bytes</span><br><span class="line">\Memory\Page Writes/sec</span><br><span class="line">\Memory\Pool Paged Allocs</span><br><span class="line">\Memory\Pool Nonpaged Allocs</span><br><span class="line">\Memory\Free System Page Table Entries</span><br><span class="line">\Memory\Cache Bytes</span><br><span class="line">\Memory\Cache Bytes Peak</span><br><span class="line">\Memory\Pool Paged Resident Bytes</span><br><span class="line">\Memory\System Code Total Bytes</span><br><span class="line">\Memory\System Code Resident Bytes</span><br><span class="line">\Memory\System Driver Total Bytes</span><br><span class="line">\Memory\System Driver Resident Bytes</span><br><span class="line">\Memory\System Cache Resident Bytes</span><br><span class="line">\Memory\% Committed Bytes In Use</span><br><span class="line">\Memory\Available KBytes</span><br><span class="line">\Memory\Available MBytes</span><br><span class="line">\Memory\Transition Pages RePurposed/sec</span><br><span class="line">\Memory\Free &amp; Zero Page List Bytes</span><br><span class="line">\Memory\Modified Page List Bytes</span><br><span class="line">\Memory\Standby Cache Reserve Bytes</span><br><span class="line">\Memory\Standby Cache Normal Priority Bytes</span><br><span class="line">\Memory\Standby Cache Core Bytes</span><br><span class="line">\Memory\Long-Term Average Standby Cache Lifetime (s)</span><br></pre></td></tr></table></figure>
<p>请参考<a target="_blank" rel="noopener" href="https://technet.microsoft.com/zh-cn/library/dd367892.aspx">Get-Counter</a></p>
<h3 id="CPU-Cores-and-Processor-Time"><a href="#CPU-Cores-and-Processor-Time" class="headerlink" title="CPU Cores and % Processor Time"></a>CPU Cores and % Processor Time</h3><p>细心的话，大家可能会发现，我在计算最后进程的cpu使用率的时候，除以了CPU的核心数。</p>
<p>这是因为在我们使用<code>&quot;\process($ps_name*)\% Processor Time&quot;</code>取得进程CPU使用率的时候，得到的是所有同名进程在不同<code>Processors/Cores</code>上使用率的总合。也就是说，比如我的机子是6核的，那么如果该进程用满了CPU，那么通过这个<code>CounterSet</code>得到的值将会是**600%**。</p>
<p>请参考：<a target="_blank" rel="noopener" href="https://social.technet.microsoft.com/wiki/contents/articles/12984.understanding-processor-processor-time-and-process-processor-time.aspx">Understanding Processor (% Processor Time) and Process (%Processor Time)</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2018-08-18T16:00:00.000Z" title="2018/8/19 上午12:00:00">2018-08-19</time></span><span class="level-item">Updated&nbsp;<time dateTime="2018-10-18T13:45:48.446Z" title="2018/10/18 下午9:45:48">2018-10-18</time></span><span class="level-item"> BF </span><span class="level-item">6 minutes read (About 838 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2018/08/19/2018/08/2018-08-19-%5BPrivate%5DNext_To_Do/">Next to do</a></h1><div class="content"><h1 id="Next-to-do"><a href="#Next-to-do" class="headerlink" title="Next to do"></a>Next to do</h1><p>自从在了TE，每天的工作都挺饱和的，当然这个和自己想要做更多的事情有关系。还是要理一理目前的状况和接下去主要的目标。</p>
<h2 id="Import-Message-Test"><a href="#Import-Message-Test" class="headerlink" title="Import Message Test"></a>Import Message Test</h2><p>现在的脚本已经足够应对大部分的情况，而且一些细节也有优化过了。尤其这两天，我还是花了时间把自动生成report的信息给好好整了下。</p>
<p>这个脚本肯定还是会继续更新的，不过主要精力还是要转移到benchmark那边去。</p>
<p>之前在做的时候，还是留下了尾巴，没有处理干净，欠的一些债要还，很多文件没有整理好。这个还是要做的。</p>
<h2 id="Learn-new-technology"><a href="#Learn-new-technology" class="headerlink" title="Learn new technology"></a>Learn new technology</h2><p>最近下了好多资料，初略看了下还是挺不错的，但是还是一个问题，自己要花时间下去。</p>
<p>也加了一些培训老师的微信，但观察下来，还是要先自己动自己，不然也只是枉然，只会更加难受。</p>
<p>Python基础要夯实一下，毕竟没有从无到有学，所以很多细节和基础没有概念，只是会用而已。</p>
<p>Go的专栏订阅了，现在出了几期了，可以慢慢开始了解，看看使用的场景。</p>
<p>Java还是最重要的，只是自己有个心结，不知道能不能从头再静下心来。没想这么多年了，自己却基本还是吃老本，羞愧，汗颜。</p>
<p>加油吧</p>
<h2 id="English"><a href="#English" class="headerlink" title="English"></a>English</h2><p>英语还是要继续学习，不过一直都没有坚持下来，还是断断续续。</p>
<p>其实之前在publisher的时候，用英文交流的机会更多，David反而一般说中文，哈哈哈。</p>
<p>还是要坚持，之前每天一篇VOA，感觉还是不错的，还是要继续。</p>
<h2 id="Sport"><a href="#Sport" class="headerlink" title="Sport"></a>Sport</h2><p>因为忙和懒，运动的机会反而少了，一周才一次，感觉远远不够。</p>
<p>之前买的跳绳什么的，也就用了几次。</p>
<p>一周还是要至少运动两次，精力好的话就早上去，跳绳比较适合。</p>
<p>如果晚上的话，还是去运河边上去快走和跑步。</p>
<p>想当然心情不好的时候，都是骑着自己的小破车乱走，杭州都走遍了，哈哈，不能让他荒废了。</p>
<h2 id="Life"><a href="#Life" class="headerlink" title="Life"></a>Life</h2><p>最近注册了滴滴，也开了几单，感觉就想做的时候做一点还是可以的，但是如果做为赚外快的方式，还是性价比低了一些。</p>
<p>看吧，没事想开开车的时候就可以做一做，也挺好的，就是要注意不要违章了，那样挺麻烦的。</p>
<p>感情生活也就这样吧，一个人好好呆着，未来未来，不用太操心，还是看之后的路吧。</p>
<p>人的一生，我才过了三分之一左右，还是要好好生活。</p>
<p>坚持本心，不忘初衷，相信日子会一天天好起来了。加油。</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2018-08-15T16:00:00.000Z" title="2018/8/16 上午12:00:00">2018-08-16</time></span><span class="level-item">Updated&nbsp;<time dateTime="2018-11-30T15:46:40.248Z" title="2018/11/30 下午11:46:40">2018-11-30</time></span><span class="level-item"> BF </span><span class="level-item">4 minutes read (About 647 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2018/08/16/2018/08/2018-08-16-SendEmailByPython/">Send email by python</a></h1><div class="content"><h1 id="Send-email-by-python"><a href="#Send-email-by-python" class="headerlink" title="Send email by python"></a>Send email by python</h1><p><code>python</code>有两个原生库(<code>smtplib</code>,<code>email</code>)可以用来发送邮件，只要你有<code>smtp</code> server就行。之前在公司已经写过简单的类来实现，回来又重新写了一个使用<code>163</code>邮箱来发送的工具类。</p>
<p>目前已经能够完成基本发送功能，包括<code>html</code>格式，添加附件等，只是弄了好久，还是没有办法在正文中添加图片，一直<code>554</code>错误，被网易认为垃圾信息(<a target="_blank" rel="noopener" href="http://help.163.com/09/1224/17/5RAJ4LMH00753VB8.html">错误代码一览</a>)而发送不了，之后有时间再看。</p>
<h2 id="授权码"><a href="#授权码" class="headerlink" title="授权码"></a>授权码</h2><p>想利用163的邮箱发送邮件，就需要先开通授权码：<br><img src="/img/post/2018/08/2018-08-16-SendEmailByPython-permission.jpg" alt="permission"></p>
<h2 id="主要代码"><a href="#主要代码" class="headerlink" title="主要代码"></a>主要代码</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#/usr/bin/python3</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">author: xiche</span></span><br><span class="line"><span class="string">create at: 08/15/2018</span></span><br><span class="line"><span class="string">description:</span></span><br><span class="line"><span class="string">    Utils for send email</span></span><br><span class="line"><span class="string">Change log:</span></span><br><span class="line"><span class="string">Date         Author      Version    Description</span></span><br><span class="line"><span class="string">08/15/2018    xiche      1.0.1      Setup</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">import</span> smtplib</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> email.mime.text <span class="keyword">import</span> MIMEText</span><br><span class="line"><span class="keyword">from</span> email.mime.multipart <span class="keyword">import</span> MIMEMultipart</span><br><span class="line"><span class="keyword">from</span> email.mime.image <span class="keyword">import</span> MIMEImage</span><br><span class="line"><span class="keyword">from</span> email.header <span class="keyword">import</span> Header</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EmailUtils</span>:</span></span><br><span class="line">    __sender = <span class="string">&quot;bearfly1990@163.com&quot;</span></span><br><span class="line">    __recipients = [<span class="string">&quot;xiongchen1990@163.com&quot;</span>, <span class="string">&quot;xchen1230@163.com&quot;</span>]</span><br><span class="line">    __subject = <span class="string">&#x27;python email 尝试&#x27;</span></span><br><span class="line">    __content = <span class="string">&#x27;&lt;p&gt;This is the test by &lt;b&gt;python&lt;/b&gt;, please have a try.&lt;/p&gt;&#x27;</span> <span class="comment">#&lt;p&gt;截图如下：&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;cid:image1&quot;&gt;&lt;/p&gt;</span></span><br><span class="line">    __mail_permission = <span class="string">&#x27;xxxxxx&#x27;</span><span class="comment">#授权码，非邮箱密码</span></span><br><span class="line">    __mail_host = <span class="string">&#x27;smtp.163.com&#x27;</span></span><br><span class="line">    __mail_port = <span class="number">25</span> <span class="comment">#SSL 465</span></span><br><span class="line">    __attachments_path = [<span class="string">r&#x27;C:\Users\mayn\Desktop\test.txt&#x27;</span>]</span><br><span class="line">    __content_images_path = [&#123;<span class="string">&#x27;cid&#x27;</span>:<span class="string">&#x27;image1&#x27;</span>, <span class="string">&#x27;path&#x27;</span>: <span class="string">r&#x27;C:\Users\mayn\Desktop\ymj.jpg&#x27;</span>&#125;]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">send_email</span>(<span class="params">self</span>):</span></span><br><span class="line">        msg = MIMEMultipart()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># msg = MIMEText(self.content, &#x27;plain&#x27;, &#x27;utf-8&#x27;)</span></span><br><span class="line">        msg[<span class="string">&#x27;Subject&#x27;</span>] =  Header(self.subject, <span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">        msg[<span class="string">&#x27;From&#x27;</span>] = self.sender</span><br><span class="line">        msg[<span class="string">&#x27;To&#x27;</span>] = <span class="string">&#x27;,&#x27;</span>.join(self.recipients)</span><br><span class="line"></span><br><span class="line">        content = MIMEText(self.__content,<span class="string">&#x27;html&#x27;</span>,<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">        msg.attach(content)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> content_image <span class="keyword">in</span> self.__content_images_path:</span><br><span class="line">            msgImage = MIMEImage(<span class="built_in">open</span>(content_image[<span class="string">&#x27;path&#x27;</span>], <span class="string">&#x27;rb&#x27;</span>).read())</span><br><span class="line">            msgImage.add_header(<span class="string">&#x27;Content-ID&#x27;</span>, <span class="string">&#x27;&lt;&#123;&#125;&gt;&#x27;</span>.<span class="built_in">format</span>(content_image[<span class="string">&#x27;cid&#x27;</span>]))</span><br><span class="line">            msg.attach(msgImage)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> attachments_path <span class="keyword">in</span> self.__attachments_path:</span><br><span class="line">            attachment = MIMEText(<span class="built_in">open</span>(attachments_path, <span class="string">&#x27;rb&#x27;</span>).read(), <span class="string">&#x27;base64&#x27;</span>, <span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">            attachment[<span class="string">&quot;Content-Type&quot;</span>] = <span class="string">&#x27;application/octet-stream&#x27;</span></span><br><span class="line">            attachment[<span class="string">&quot;Content-Disposition&quot;</span>] = <span class="string">&#x27;attachment; filename=&quot;&#123;&#125;&quot;&#x27;</span>.<span class="built_in">format</span>(os.path.basename(attachments_path))</span><br><span class="line">            msg.attach(attachment)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment"># smtp = smtplib.SMTP(self.__mail_host, port=self.__mail_port)</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            smtp = smtplib.SMTP_SSL()  <span class="comment"># 注意：如果遇到发送失败的情况（提示远程主机拒接连接），这里要使用SMTP_SSL方法</span></span><br><span class="line">            smtp.connect(self.__mail_host)</span><br><span class="line">            smtp.login(self.sender, self.__mail_permission)</span><br><span class="line">            <span class="comment"># print(msg.as_string())</span></span><br><span class="line">            smtp.sendmail(self.sender, self.recipients, msg.as_string())</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;email send successfully.&#x27;</span>)</span><br><span class="line">        <span class="keyword">except</span> smtplib.SMTPException <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(<span class="built_in">str</span>(e))</span><br><span class="line">        <span class="keyword">finally</span>:</span><br><span class="line">            smtp.quit()  <span class="comment"># 发送完毕后退出smtp</span></span><br><span class="line"></span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;sender&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sender</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self.__sender</span><br><span class="line"></span><br><span class="line"><span class="meta">    @sender.setter</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sender</span>(<span class="params">self, sender</span>):</span></span><br><span class="line">        self.__sender = sender</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;subject&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">subject</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self.__subject</span><br><span class="line"></span><br><span class="line"><span class="meta">    @subject.setter</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">subject</span>(<span class="params">self, subject</span>):</span></span><br><span class="line">        self.__subject = subject</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;recipients&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">recipients</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self.__recipients</span><br><span class="line"></span><br><span class="line"><span class="meta">    @recipients.setter</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">recipients</span>(<span class="params">self, recipients</span>):</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">isinstance</span>(recipients, <span class="built_in">str</span>)):</span><br><span class="line">            self.__recipients = recipients.split(<span class="string">&#x27;;&#x27;</span>)</span><br><span class="line">        <span class="keyword">elif</span>(<span class="built_in">isinstance</span>(recipients, <span class="built_in">list</span>)):</span><br><span class="line">            self.__recipients = recipients</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;sender&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">content</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self.__content</span><br><span class="line"></span><br><span class="line"><span class="meta">    @content.setter</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">content</span>(<span class="params">self, content</span>):</span></span><br><span class="line">        self.__content = content</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    emailUtils = EmailUtils()</span><br><span class="line">    emailUtils.send_email()</span><br><span class="line">    <span class="comment"># print(os.path.basename(r&#x27;C:\Users\mayn\Desktop\ymj.jpg&#x27;))</span></span><br></pre></td></tr></table></figure>

<p>更多信息请参考：<a target="_blank" rel="noopener" href="https://github.com/bearfly1990/PowerScript/blob/master/Python3/mylib/cmutils_email.py">https://github.com/bearfly1990/PowerScript/blob/master/Python3/mylib/cmutils_email.py</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2018-08-06T16:00:00.000Z" title="2018/8/7 上午12:00:00">2018-08-07</time></span><span class="level-item">Updated&nbsp;<time dateTime="2018-10-18T13:45:48.446Z" title="2018/10/18 下午9:45:48">2018-10-18</time></span><span class="level-item"> BF </span><span class="level-item">8 minutes read (About 1148 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2018/08/07/2018/08/2018-08-07-ProcessInfo/">Process Info</a></h1><div class="content"><h1 id="Process-Info"><a href="#Process-Info" class="headerlink" title="Process Info"></a>Process Info</h1><p>之前的测试中，使用<code>psutil</code>可以得到系统的<code>CPU/Memory</code>的使用百分比，但是没试过读取个别进程的信息。现在想要实现这样的功能，方便更好的分析<code>java.exe</code>的内存使用变化。</p>
<p>有一种思路是使用系统本身提供的查看进程的<code>shell cmd</code>和<code>subprocess.check_output</code>组合得到信息。</p>
<h2 id="tasklist"><a href="#tasklist" class="headerlink" title="tasklist"></a>tasklist</h2><p>在<code>windows</code>系统中，提供了<code>tasklist</code>来查看<code>process</code>的信息，大致的结果如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\mayn&gt;tasklist</span><br><span class="line"></span><br><span class="line">映像名称                       PID 会话名              会话#       内存使用</span><br><span class="line">========================= ======== ================ =========== ============</span><br><span class="line">System Idle Process              0 Services                   0          8 K</span><br><span class="line">System                           4 Services                   0        108 K</span><br><span class="line">Registry                       108 Services                   0     22,924 K</span><br><span class="line">smss.exe                       376 Services                   0      1,128 K</span><br><span class="line">csrss.exe                      580 Services                   0      5,124 K</span><br><span class="line">wininit.exe                    672 Services                   0      6,676 K</span><br></pre></td></tr></table></figure>

<p>查看<code>tasklist</code>的使用帮助，我们发现可以利用本身提供的参数取得想要的数据。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\mayn&gt;tasklist /?</span><br><span class="line"></span><br><span class="line">TASKLIST [/S system [/U username [/P [password]]]]</span><br><span class="line">         [/M [module] | /SVC | /V] [/FI filter] [/FO format] [/NH]</span><br><span class="line"></span><br><span class="line">描述:</span><br><span class="line">    该工具显示在本地或远程机器上当前运行的进程列表。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">参数列表:</span><br><span class="line">   /S     system           指定连接到的远程系统。</span><br><span class="line"></span><br><span class="line">   /U     [domain\]user    指定应该在哪个用户上下文执行这个命令。</span><br><span class="line"></span><br><span class="line">   /P     [password]       为提供的用户上下文指定密码。如果省略，则</span><br><span class="line">                           提示输入。</span><br><span class="line"></span><br><span class="line">   /M     [module]         列出当前使用所给 exe/dll 名称的所有任务。</span><br><span class="line">                           如果没有指定模块名称，显示所有加载的模块。</span><br><span class="line"></span><br><span class="line">   /SVC                    显示每个进程中主持的服务。</span><br><span class="line"></span><br><span class="line">   /APPS 显示 Microsoft Store 应用及其关联的进程。</span><br><span class="line"></span><br><span class="line">   /V                      显示详细任务信息。</span><br><span class="line"></span><br><span class="line">   /FI    filter           显示一系列符合筛选器</span><br><span class="line">                           指定条件的任务。</span><br><span class="line"></span><br><span class="line">   /FO    format           指定输出格式。</span><br><span class="line">                           有效值: &quot;TABLE&quot;、&quot;LIST&quot;、&quot;CSV&quot;。</span><br><span class="line"></span><br><span class="line">   /NH                     指定列标题不应该</span><br><span class="line">                           在输出中显示。</span><br><span class="line">                           只对 &quot;TABLE&quot; 和 &quot;CSV&quot; 格式有效。</span><br><span class="line"></span><br><span class="line">   /?                      显示此帮助消息。</span><br><span class="line"></span><br><span class="line">筛选器:</span><br><span class="line">    筛选器名称     有效运算符           有效值</span><br><span class="line">    -----------     ---------------           --------------------------</span><br><span class="line">    STATUS          eq, ne                    RUNNING | SUSPENDED</span><br><span class="line">                                              NOT RESPONDING | UNKNOWN</span><br><span class="line">    IMAGENAME       eq, ne                    映像名称</span><br><span class="line">    PID             eq, ne, gt, lt, ge, le    PID 值</span><br><span class="line">    SESSION         eq, ne, gt, lt, ge, le    会话编号</span><br><span class="line">    SESSIONNAME     eq, ne                    会话名称</span><br><span class="line">    CPUTIME         eq, ne, gt, lt, ge, le    CPU 时间，格式为</span><br><span class="line">                                              hh:mm:ss。</span><br><span class="line">                                              hh - 小时，</span><br><span class="line">                                              mm - 分钟，ss - 秒</span><br><span class="line">    MEMUSAGE        eq, ne, gt, lt, ge, le    内存使用(以 KB 为单位)</span><br><span class="line">    USERNAME        eq, ne                    用户名，格式为</span><br><span class="line">                                              [域\]用户</span><br><span class="line">    SERVICES        eq, ne                    服务名称</span><br><span class="line">    WINDOWTITLE     eq, ne                    窗口标题</span><br><span class="line">    模块         eq, ne                    DLL 名称</span><br><span class="line"></span><br><span class="line">注意: 当查询远程计算机时，不支持 &quot;WINDOWTITLE&quot; 和 &quot;STATUS&quot;</span><br><span class="line">      筛选器。</span><br><span class="line"></span><br><span class="line">Examples:</span><br><span class="line">    TASKLIST</span><br><span class="line">    TASKLIST /M</span><br><span class="line">    TASKLIST /V /FO CSV</span><br><span class="line">    TASKLIST /SVC /FO LIST</span><br><span class="line">    TASKLIST /APPS /FI &quot;STATUS eq RUNNING&quot;</span><br><span class="line">    TASKLIST /M wbem*</span><br><span class="line">    TASKLIST /S system /FO LIST</span><br><span class="line">    TASKLIST /S system /U 域\用户名 /FO CSV /NH</span><br><span class="line">    TASKLIST /S system /U username /P password /FO TABLE /NH</span><br><span class="line">    TASKLIST /FI &quot;USERNAME ne NT AUTHORITY\SYSTEM&quot; /FI &quot;STATUS eq running&quot;</span><br></pre></td></tr></table></figure>

<p>以<code>vscode</code>的进程<code>code.exe</code>为例，可以筛选出对应的进程：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\mayn&gt;tasklist /FI &quot;imagename eq code.exe&quot;</span><br><span class="line"></span><br><span class="line">映像名称                       PID 会话名              会话#       内存使用</span><br><span class="line">========================= ======== ================ =========== ============</span><br><span class="line">Code.exe                      1492 Console                    1    146,248 K</span><br><span class="line">Code.exe                      9176 Console                    1     69,080 K</span><br><span class="line">Code.exe                      9120 Console                    1     11,412 K</span><br><span class="line">Code.exe                      1700 Console                    1     81,984 K</span><br><span class="line">Code.exe                      5784 Console                    1    221,540 K</span><br><span class="line">Code.exe                      9464 Console                    1    106,296 K</span><br><span class="line">Code.exe                      8392 Console                    1     98,076 K</span><br></pre></td></tr></table></figure>

<p>筛选器是可以组合的，比如：<br><code>&quot;tasklist  /FI &quot;imagename eq java.exe&quot; /FI \&quot;username eq xiche\&quot;&quot;</code><br>这样就可以得到自己想要的进程信息，并取得一些值。</p>
<h2 id="subprocess-check-out"><a href="#subprocess-check-out" class="headerlink" title="subprocess.check_out"></a>subprocess.check_out</h2><p><code>subprocess</code>是python中调用进程与进程交互的一个库，可以用它来调用运行程序。</p>
<p>这边我们使用<code>check_out</code>来得到<code>tasklist</code>的输出结果，然后利用正则表达式取得对应的值，组装成字典列表来供之后使用。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_processes_running</span>():</span></span><br><span class="line">    tasks = subprocess.check_output(</span><br><span class="line">        <span class="string">&quot;tasklist  /FI \&quot;imagename eq code.exe\&quot; &quot;</span>).decode(<span class="string">&quot;gbk&quot;</span>).split(<span class="string">&quot;\r\n&quot;</span>)</span><br><span class="line">    p = []</span><br><span class="line">    <span class="keyword">for</span> task <span class="keyword">in</span> tasks:</span><br><span class="line">        m = re.match(<span class="string">&quot;(.+?) +(\d+) (.+?) +(\d+) +(\d+.* K).*&quot;</span>, task)</span><br><span class="line">        <span class="keyword">if</span> m <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            p.append(&#123;<span class="string">&quot;image&quot;</span>: m.group(<span class="number">1</span>),</span><br><span class="line">                      <span class="string">&quot;pid&quot;</span>: m.group(<span class="number">2</span>),</span><br><span class="line">                      <span class="string">&quot;session_name&quot;</span>: m.group(<span class="number">3</span>),</span><br><span class="line">                      <span class="string">&quot;session_num&quot;</span>: m.group(<span class="number">4</span>),</span><br><span class="line">                      <span class="string">&quot;mem_usage&quot;</span>: m.group(<span class="number">5</span>)</span><br><span class="line">                      &#125;)</span><br><span class="line">    <span class="keyword">return</span> p</span><br><span class="line"></span><br><span class="line">processes = get_processes_running()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> process <span class="keyword">in</span> processes:</span><br><span class="line">    <span class="built_in">print</span>(process[<span class="string">&quot;pid&quot;</span>], process[<span class="string">&quot;mem_usage&quot;</span>])</span><br></pre></td></tr></table></figure>

<p>运行的结果如下:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">PS C:\Users\mayn\Desktop&gt; python test.py</span><br><span class="line">1492 157,088 K</span><br><span class="line">9176 75,932 K</span><br><span class="line">9120 11,416 K</span><br><span class="line">1700 119,968 K</span><br><span class="line">2868 237,328 K</span><br><span class="line">2616 121,216 K</span><br><span class="line">5580 33,724 K</span><br><span class="line">10688 103,604 K</span><br></pre></td></tr></table></figure>

<h2 id="psutil"><a href="#psutil" class="headerlink" title="psutil"></a>psutil</h2><p>可能大家发现了，这样使用tasklist取得的值是固定了，而我们想得到更多的值(e.g cpu)需要使用更多的命令来得到信息。</p>
<p>但其实还有一种方便的方法，直接使用<code>psutil</code>，用他来获取系统信息真的很强很方便。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">processinfo</span>(<span class="params">processName</span>):</span></span><br><span class="line">    pids = psutil.pids()</span><br><span class="line">    pids_return = []</span><br><span class="line">    <span class="keyword">for</span> pid <span class="keyword">in</span> pids:</span><br><span class="line">        p = psutil.Process(pid)</span><br><span class="line">        <span class="keyword">if</span> processName.lower() <span class="keyword">in</span> p.name().lower() :</span><br><span class="line">            pids_return.append(pid)</span><br><span class="line">    <span class="keyword">return</span> pids_return</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> pid <span class="keyword">in</span> processinfo(<span class="string">&quot;code.exe&quot;</span>):</span><br><span class="line">    ps = psutil.Process(pid)  </span><br><span class="line">    <span class="built_in">print</span>(ps.cpu_percent(interval=<span class="number">1.0</span>), ps.memory_percent())</span><br></pre></td></tr></table></figure>

<p>更多信息请参考：<a target="_blank" rel="noopener" href="https://github.com/bearfly1990/PowerScript/wiki/Python3">https://github.com/bearfly1990/PowerScript/wiki/Python3</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2018-07-03T16:00:00.000Z" title="2018/7/4 上午12:00:00">2018-07-04</time></span><span class="level-item">Updated&nbsp;<time dateTime="2018-10-18T13:45:48.446Z" title="2018/10/18 下午9:45:48">2018-10-18</time></span><span class="level-item"> BF </span><span class="level-item">17 minutes read (About 2621 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2018/07/04/2018/07/2018-07-04-MyDearFather/">Father</a></h1><div class="content"><p><strong>今天是父亲走了的第5天。</strong></p>
<p>根据老家的风俗和迷信，出殡的日子定在了下周一的早上。</p>
<p><strong>他们</strong>喜欢用生辰八字和黄历来算合适的日子，讲究时辰。而对于我和母亲来说，父亲走了，早点操办完后事，可能不会难过那么久。</p>
<p>我现在倒是还好，心中已然接受了事实，就担心母亲。</p>
<p>等事情都处理完了，我还要回杭州去。希望母亲不要太过伤感，摔伤的手还没有完全好，还要休养好长一段时间。我舍不得离开了。</p>
<p>大概下一个整周还是要在家中，把家中打扫一下。</p>
<p><strong>上上周末</strong>我从杭州回来。</p>
<p>之前母亲与我说父亲情况不好的时候，我还以为和去年一样，只是虚惊一场。但当我在医院看到父亲时，我抑制不住内心的情绪。<br>看着虚弱憔悴的父亲，我明白，这一次我可能真的要失去我的父亲了。</p>
<p><strong>在医院</strong>的那几天是最难熬的。</p>
<p>看着父亲一天一天虚弱下去，那种等待死亡的感觉，真的很难受。</p>
<p>明白父亲这次凶多吉少，已经没有治疗的价值，但我还是难以接受。</p>
<p>当兆和Bob给我出主意，再去上海的时候，我的内心再起波澜，仿佛那是唯一的生机，就算是万分之一的机率，难道就这样忍心放弃么。</p>
<p>可我内心也十分清楚，那只是心中的美好愿望，事实却是那样残忍。所以当我和母亲他们表达自己的不甘心时，一次次只是让自己认命不再挣扎而已。</p>
<p><strong>父亲</strong>在最后几天，和我说了一些话。</p>
<p>那时候他的意识还算清楚，他说要学会坚强，他的病能医的话就医，不能医的话就算了。我忍着泪水，不住的点头，为什么命运这样残忍。</p>
<p>最后一晚，我们将父亲接回家中，等待最后的结局，死亡。</p>
<p>父亲意识开始不清楚。</p>
<p>听医生说，黄疸升的非常高，父亲就会陷入昏迷，那时他其实已经不会感觉到很大的痛苦了。</p>
<p>父亲最后还是说了些话，可已经听不太清楚他在说什么了，我能是嗯嗯的答应着他。</p>
<p>唯一听清的一句，父亲说着“改变”，“变得不一样”。他是在说他的人生么，希望我的人生不一样么，不再像他一样，或者说做那永远吃亏的人么？</p>
<p>或许这是他人生最大的遗憾，我竟多少能体会一些。我们的性格真的太像了，但我可能好一些吧。</p>
<p>或者他是觉得自己太早向命运低头，没有善待自己，人生刚到享福的时间就这个戛然而止了，带着这么多的遗憾吧。</p>
<p>又或者他是觉得自己没有做好一个太好的父亲的表率，和母亲的关系没有处理的很好，希望我能改变而和他不一样吧。</p>
<p>无论如何，父亲已经离开了这熙熙攘攘的人世间，永世长眠，再也没有人纷争和痛苦，得到了永远的宁静。</p>
<p>我让<strong>JY</strong>最后发了些语音与父亲。我知道她不太可能来。但她还是太年轻，发的语音那样不和时宜。但已经够了，我心中已经十分的感谢她。</p>
<p>她已经做到了她能做的。</p>
<p>父亲听到JY的语音后，说了些话，可惜我已经听不清了，大概是说JY不错，要珍惜什么的吧，可能还问了她会不会来什么的。我也只能嗯嗯的回答。</p>
<p><strong>我与父亲</strong>从小的交流就比较少。</p>
<p>很多事都是母亲陪着我去的，包括家长会，开学什么的。</p>
<p>但我还刻父亲和母亲一起陪我去之江的场景。他是一个好父亲，一个不会表达自己的父亲。</p>
<p>我不知道父亲的家庭情况，在这两天的接待客人的过程中，我才知道父亲8岁便没有了亲生父亲。而今年父亲才55岁。</p>
<p><strong>父亲</strong>一直从事的都是机械相关的工作。</p>
<p>他只有小学毕业的水平，不知道什么原因，总之当年的他并没有好好学习。</p>
<p>辍学后便在厂里工作，勤勤恳恳，在最后的这个厂做着车间主任，一干就是15年多。</p>
<p>记得我还在小学的时候，父亲在小学旁边的一个厂子里干活。</p>
<p>那时每天放学，我都会去找父亲，等他下班了之后便会骑着自行车带我回家。</p>
<p>是他撑起了这个家，但当年的我那么幼稚，觉得自己的父亲没有别人厉害，而我呢，现在连父亲的百分之一都没有到。</p>
<p><strong>5.1</strong>的时候，我带着JY回家，就是想爸妈开心一些，不要为我担心。但没想到父亲自己却已经开始不舒服，但他自己竟不多说。<br>不曾想，这一别就成永别。</p>
<p><strong>还住在老房子的时候</strong>父亲有一张书桌，那张桌子也是我小时候写过作业的地方。而在那张桌子下面，有几本父亲的书，是关于机械还有别的知识的。<br>那算是我的启蒙教材。</p>
<p>我最喜欢的是书里的迷语那部分，还记得有一个是说花生的，黄房子，红帐子，里面住着个白胖子。</p>
<p>书中还有一些折纸的介绍，还有教你怎么织毛衣，等等等等。</p>
<p><strong>小时候的夏天</strong>，家里没有电风扇，但那时也没有特别的热，玉环是一个小岛，海洋季风性气候，一家人坐在阳台上，便能吹到阵阵凉风，真的很舒服。</p>
<p>父亲母亲还会拿着扇子，给我扇凉，真的很温馨。</p>
<p><strong>冬天的时候</strong>，我便会钻到爸妈的中间，从这头爬到那头，那时候笑的最开心了。</p>
<p><strong>再小一些的时候</strong>，父母都在田间劳动，我还记得自己在田里和小昆虫小青蛙玩耍。老房子前原来还有面厂，母亲晚上的时候便会在其中劳作。<br>晚上回来的时候，我们便能吃到香喷喷的新鲜出炉的米面。蘸着小菜或者就着菜汤，真的很好吃。</p>
<p>小时候物质生活一般，但还是过的很开心，因为有父母的关爱，虽然他们也会争吵，也会有伤心的时刻不过是因为家里穷的缘故罢了。<br>后来生活水平提高，我也长大，但没有那样了。</p>
<p><strong>高三那次</strong>，是让父母第一次为我操碎了心，而我内心也是十分的难受，明明知道自己这样不好，但完全已经不能控制自己了。</p>
<p>而爸妈也无奈，只能想尽一切办法，带我去看医生，去求神拜佛，带我去做法事，我难过自己为什么会这样，让父母担心，又“厌恶”父母的“无知”。</p>
<p>在那段休学在家的时间，我无比难受，2个月没有复习，完全不知道自己是什么样子，那也是我人生的第一个转折点。</p>
<p>一天我一个人逛到水库的山顶，父亲也跟着我。</p>
<p>父亲没有多说什么话，只是安慰了我一些话，我都不记得了，我只记得我自己喊了几嗓子，希望把自己心中的郁气都抒发出来，但我那时也明白，我需要的是时间，我要撑过去。</p>
<p><strong>不出意外</strong>，高考考的很差，但是父母都没有多说什么，只是默默的做着他自己的事，给我提供高昂的学费，也从来没提复读什么的事。</p>
<p>我极度失落，也想着自己的人生也便这样了，不想再挣扎，有时常常想着自己就这样过吧，也不想打扰别人。</p>
<p>大学毕业后也曾想着回家，希望能在父母身边，幼稚的我做了第二次很愚蠢的决定，直接裸辞，那也是一个夏天，完全没有想过自己当时的情况。</p>
<p>是的，我又SB了。母亲极度伤心，但父亲却相信我会好起来的。</p>
<p>折腾了半年之后，我又回了HZ，工作了这几年，眼看光景越来越好，但没想到去年母亲一个电话，说父亲肝衰竭了。</p>
<p><strong>从温州又到上海</strong>，有母亲的陪伴和医生的治疗，父亲恢复的不错。但当时母亲已经和我说，父亲这个没有办法根治，只能保持。眼看着父亲情况不错，心里也开心。<br>但没有想到，这次的复发，父亲也没有在意，及早表明自己的情况，或许能及时治疗，再多几年的时光。</p>
<p>也许他就能等到我结婚的那一天，也许。。。</p>
<p><strong>愿世间少些痛苦与遗憾</strong></p>
<p>我要更加努力，像父亲说的一样，<strong>“改变”</strong></p>
<p><strong>安息</strong></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2018-06-17T16:00:00.000Z" title="2018/6/18 上午12:00:00">2018-06-18</time></span><span class="level-item">Updated&nbsp;<time dateTime="2018-10-18T13:45:48.446Z" title="2018/10/18 下午9:45:48">2018-10-18</time></span><span class="level-item"> BF </span><span class="level-item">5 minutes read (About 677 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2018/06/18/2018/06/2018-06-18-CreateLineChartByOpenpyxl/">Create Excel with line chart by openpyxl</a></h1><div class="content"><h1 id="Create-Excel-with-line-chart-by-openpyxl"><a href="#Create-Excel-with-line-chart-by-openpyxl" class="headerlink" title="Create Excel with line chart by openpyxl"></a>Create Excel with line chart by openpyxl</h1><p>之前有用过<code>openpyxl</code>做了<a href="https://bearfly1990.github.io/2018/04/24/openpyxl/">简单的介绍</a>。</p>
<p>但是我今天在尝试画chart的时候，发现没有很好用的api可以参考，可能是我没找到吧，一些细节只能google，或者从源代码里找。</p>
<p>好在之前在做AMS报表的时候，有用ChartFX画过一些图表，大体上的api设计是一致的。</p>
<h2 id="需求-amp-背景"><a href="#需求-amp-背景" class="headerlink" title="需求&amp;背景"></a>需求&amp;背景</h2><p>现在多虚拟机连续性能测试已经搭好了，当时自己给自己定了一个optional的目标，就是把最后的log也可视化，比如以总结的excel来展现。</p>
<p>这样就可以省去人工处理的时间，不然每次都要自己打开csv，add chart还是有点麻烦，如果直接打开excel就能看到图还是很爽的。</p>
<p>当然，今天只是完成了第一步，之后有需要和时间的话，再把其它test result整合进来。</p>
<h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><p>任务很简单，就是把下面的csv转成excle并画图。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Time,CPU(%),Memory(%)</span><br><span class="line">2018&#x2F;06&#x2F;17 23:47:11,17.0,16.71</span><br><span class="line">2018&#x2F;06&#x2F;17 23:47:13,1.5,17.01</span><br><span class="line">2018&#x2F;06&#x2F;17 23:47:15,2.9,17.04</span><br><span class="line">2018&#x2F;06&#x2F;17 23:47:17,23.6,17.22</span><br><span class="line">2018&#x2F;06&#x2F;17 23:47:19,27.0,18.54</span><br></pre></td></tr></table></figure>
<p>下面直接上代码，主要用了<code>openpyxl</code>.</p>
<p>像<code>lib.cmutils_io</code>这种是我自己写的类库，比如CSVUtils就是我用标准库<code>csv</code>封装了一些常用的方法。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> openpyxl</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">from</span> lib.cmutils_io <span class="keyword">import</span> CSVUtils</span><br><span class="line"><span class="keyword">from</span> openpyxl.chart <span class="keyword">import</span> (</span><br><span class="line">    LineChart,</span><br><span class="line">    Reference,</span><br><span class="line">)</span><br><span class="line"><span class="keyword">from</span> openpyxl.chart.axis <span class="keyword">import</span> DateAxis</span><br><span class="line"><span class="keyword">from</span> openpyxl <span class="keyword">import</span> Workbook</span><br><span class="line">DATE_TIME_FORMAT = <span class="string">&quot;%Y/%m/%d %H:%M:%S&quot;</span> <span class="comment">#&quot;2018-06-13 23:51:17&quot;</span></span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_monitor</span>():</span></span><br><span class="line">    wb_tpl = Workbook()</span><br><span class="line">    ws = wb_tpl.active</span><br><span class="line">    <span class="comment"># ws = wb_tpl.worksheets[0]</span></span><br><span class="line">    ws.title = <span class="string">&quot;Monitor&quot;</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    [</span></span><br><span class="line"><span class="string">        [2018/06/17 23:47:11,17.0,16.71],</span></span><br><span class="line"><span class="string">        [2018/06/17 23:47:13,1.5,17.01],</span></span><br><span class="line"><span class="string">        [2018/06/17 23:47:15,2.9,17.04],</span></span><br><span class="line"><span class="string">        ...</span></span><br><span class="line"><span class="string">    ]</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    data_list = CSVUtils.readCSVRowsList(<span class="string">&quot;Monitor.csv&quot;</span>)</span><br><span class="line">    _max_row = <span class="built_in">len</span>(data_list)</span><br><span class="line">    _max_col = <span class="number">3</span></span><br><span class="line">    <span class="keyword">for</span> row_index, rows <span class="keyword">in</span> <span class="built_in">enumerate</span>(data_list):</span><br><span class="line">        <span class="keyword">for</span> col_index, value <span class="keyword">in</span> <span class="built_in">enumerate</span>(rows):</span><br><span class="line">            <span class="keyword">if</span>(row_index == <span class="number">0</span>):</span><br><span class="line">                ws.cell(row=row_index+<span class="number">1</span>, column=col_index+<span class="number">1</span>).value = value</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">if</span>(col_index == <span class="number">0</span>):</span><br><span class="line">                    ws.cell(row=row_index+<span class="number">1</span>, column=col_index+<span class="number">1</span>).value = datetime.strptime(value, DATE_TIME_FORMAT)</span><br><span class="line">                    ws.cell(row=row_index+<span class="number">1</span>, column=col_index+<span class="number">1</span>).number_format = <span class="string">&#x27;HH:mm:ss&#x27;</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    ws.cell(row=row_index+<span class="number">1</span>, column=col_index+<span class="number">1</span>).value = <span class="built_in">float</span>(value)</span><br><span class="line">    chart1 = LineChart()</span><br><span class="line">    chart1.title = <span class="string">&quot;CPU/Memory Mornitor&quot;</span></span><br><span class="line">    chart1.style = <span class="number">2</span> <span class="comment"># default style when new a line chart</span></span><br><span class="line">    chart1.height = <span class="number">15</span> <span class="comment"># default is 7.5</span></span><br><span class="line">    chart1.width = <span class="number">30</span> <span class="comment"># default is 15</span></span><br><span class="line">    chart1.legend.position = <span class="string">&quot;b&quot;</span></span><br><span class="line">    chart1.y_axis.scaling.<span class="built_in">min</span> = <span class="number">0</span></span><br><span class="line">    chart1.y_axis.scaling.<span class="built_in">max</span> = <span class="number">100</span></span><br><span class="line">    <span class="comment"># chart1.y_axis.title = &#x27;Pecent&#x27;</span></span><br><span class="line">    <span class="comment"># chart1.x_axis.title = &#x27;Time&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># set y-axis</span></span><br><span class="line">    data = Reference(ws, min_col=<span class="number">2</span>, min_row=<span class="number">1</span>, max_col=_max_col, max_row=_max_row)</span><br><span class="line">    chart1.add_data(data, titles_from_data=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># set time as category(x-axis)</span></span><br><span class="line">    cats = Reference(ws, min_col=<span class="number">1</span>, min_row=<span class="number">1</span>, max_row=_max_row)</span><br><span class="line">    chart1.set_categories(cats)    </span><br><span class="line"></span><br><span class="line">    <span class="comment"># Style the lines</span></span><br><span class="line">    <span class="comment"># s1 = c1.series[0]</span></span><br><span class="line">    <span class="comment"># s1.marker.symbol = &quot;triangle&quot;</span></span><br><span class="line">    <span class="comment"># s1.marker.graphicalProperties.solidFill = &quot;FF0000&quot; # Marker filling</span></span><br><span class="line">    <span class="comment"># s1.marker.graphicalProperties.line.solidFill = &quot;FF0000&quot; # Marker outline</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># s1.graphicalProperties.line.noFill = True</span></span><br><span class="line"></span><br><span class="line">    s2 = chart1.series[<span class="number">0</span>]</span><br><span class="line">    s2.smooth = <span class="literal">True</span> <span class="comment"># Make the line smooth</span></span><br><span class="line">    <span class="comment"># s2.graphicalProperties.line.solidFill = &quot;00AAAA&quot;</span></span><br><span class="line">    <span class="comment"># s2.graphicalProperties.line.dashStyle = &quot;sysDot&quot;</span></span><br><span class="line">    <span class="comment"># s2.graphicalProperties.line.width = 100050 # width in EMUs</span></span><br><span class="line"></span><br><span class="line">    s2 = chart1.series[<span class="number">1</span>]</span><br><span class="line">    s2.smooth = <span class="literal">True</span> <span class="comment"># Make the line smooth</span></span><br><span class="line">    <span class="comment"># chart1.x_axis.tickLblPos = &quot;low&quot;</span></span><br><span class="line">    <span class="comment"># chart1.x_axis.tickLblSkip = 3 # whatever you like</span></span><br><span class="line">    ws.add_chart(chart1, <span class="string">&quot;F10&quot;</span>)</span><br><span class="line">   </span><br><span class="line">            </span><br><span class="line">    dest_filename = <span class="string">&#x27;test2.xlsx&#x27;</span></span><br><span class="line">    wb_tpl.save(filename = dest_filename)</span><br><span class="line">   </span><br><span class="line">test_monitor()</span><br></pre></td></tr></table></figure>
<h3 id="未完待续"><a href="#未完待续" class="headerlink" title="未完待续:)"></a>未完待续:)</h3></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2018-06-13T16:00:00.000Z" title="2018/6/14 上午12:00:00">2018-06-14</time></span><span class="level-item">Updated&nbsp;<time dateTime="2018-10-18T13:45:48.446Z" title="2018/10/18 下午9:45:48">2018-10-18</time></span><span class="level-item"> BF </span><span class="level-item">2 minutes read (About 364 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2018/06/14/2018/06/2018-06-14-CatchMonitorData/">Catch CPU/Memory Monitor</a></h1><div class="content"><h2 id="根据log中的实际取得monitor中的数据。"><a href="#根据log中的实际取得monitor中的数据。" class="headerlink" title="根据log中的实际取得monitor中的数据。"></a>根据log中的实际取得monitor中的数据。</h2><p>现在有一个完整的导数据的log，类似于如下ImportLog.txt：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">...略...</span><br><span class="line">2018-06-14 00:07:58,156 [INFO ] -----START IMPORT-----</span><br><span class="line">2018-06-14 00:07:58,515 [INFO ] xxx</span><br><span class="line">2018-06-14 00:10:39,065 [INFO ] xxx</span><br><span class="line">2018-06-14 00:10:39,081 [INFO ] Import Time(s):160.55</span><br><span class="line">2018-06-14 00:10:39,128 [INFO ] xxx</span><br><span class="line">2018-06-14 00:10:39,128 [INFO ] Finished:xxxAAxxx</span><br><span class="line">2018-06-14 00:10:39,128 [INFO ] Import Time(s):160.96</span><br><span class="line">2018-06-14 00:10:39,128 [INFO ] -----END IMPORT-----</span><br><span class="line">2018-06-14 00:10:44,201 [INFO ] -----START IMPORT-----</span><br><span class="line">2018-06-14 00:10:46,590 [INFO ] xxx\\IMPORT.exe BBB</span><br><span class="line">2018-06-14 00:57:30,360 [INFO ] Finished:\xxx_BBB_xxx</span><br><span class="line">2018-06-14 00:57:30,360 [INFO ] Import Time(s):2803.77</span><br><span class="line">2018-06-14 00:57:31,125 [INFO ] -----END IMPORT-----</span><br><span class="line">...略...</span><br></pre></td></tr></table></figure>
<p>而整个过程有监控数据类似如下Monitor.csv：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Time,CPU(%),Memory(%)</span><br><span class="line">2018&#x2F;06&#x2F;13 23:51:17,2.7,12.17</span><br><span class="line">2018&#x2F;06&#x2F;13 23:51:19,0.0,12.16</span><br><span class="line">2018&#x2F;06&#x2F;13 23:51:21,0.0,12.16</span><br><span class="line">2018&#x2F;06&#x2F;13 23:51:23,0.0,12.14</span><br><span class="line">2018&#x2F;06&#x2F;13 23:51:25,0.4,12.15</span><br><span class="line">2018&#x2F;06&#x2F;13 23:51:28,0.0,12.15</span><br><span class="line">2018&#x2F;06&#x2F;13 23:51:30,0.0,12.15</span><br><span class="line">...略...</span><br></pre></td></tr></table></figure>
<p>那么现在的问题是只需要在跑BBB的时候的那段时间的监控数据，于是临时写了个简单的HardCode的过程达到目的，主要用到了datetime对时间的处理。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">author: xiche</span></span><br><span class="line"><span class="string">create at: 06/14/2018</span></span><br><span class="line"><span class="string">description:</span></span><br><span class="line"><span class="string">    Catch monitor data from whole proces</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"><span class="comment"># datetime_object = datetime.strptime(&#x27;Jun 1 2005  1:33PM&#x27;, &#x27;%b %d %Y %I:%M%p&#x27;)</span></span><br><span class="line">dateformat1 = <span class="string">&quot;%Y-%m-%d %H:%M:%S&quot;</span> <span class="comment">#&quot;2018-06-13 23:51:17&quot;</span></span><br><span class="line">dateformat2 = <span class="string">&quot;%Y/%m/%d %H:%M:%S&quot;</span> <span class="comment">#&quot;2018/06/13 23:51:52&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">__main__</span>():</span></span><br><span class="line">    dt_start = <span class="literal">None</span></span><br><span class="line">    dt_end = <span class="literal">None</span></span><br><span class="line">    lines_new = []</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;ImportLog.txt&quot;</span>, <span class="string">&quot;r&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        lines = f.readlines()</span><br><span class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> lines:</span><br><span class="line">            <span class="keyword">if</span>(<span class="string">&quot;BBB&quot;</span> <span class="keyword">in</span> line <span class="keyword">and</span> <span class="string">&quot;Finished&quot;</span> <span class="keyword">in</span> line):</span><br><span class="line">                dt_end = datetime.strptime(line[<span class="number">0</span>:<span class="number">19</span>], dateformat1)</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">if</span>(<span class="string">&quot;BBB&quot;</span> <span class="keyword">in</span> line):</span><br><span class="line">                dt_start = datetime.strptime(line[<span class="number">0</span>:<span class="number">19</span>], dateformat1)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;Monitor.csv&quot;</span>, <span class="string">&quot;r&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        lines = f.readlines()</span><br><span class="line">        dt_current = <span class="literal">None</span></span><br><span class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> lines:</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                dt_current = datetime.strptime(line[<span class="number">0</span>:<span class="number">19</span>], dateformat2)</span><br><span class="line">                <span class="keyword">if</span>(dt_current &lt; dt_start):</span><br><span class="line">                    <span class="keyword">continue</span></span><br><span class="line">                <span class="keyword">elif</span>(dt_current &gt; dt_end):</span><br><span class="line">                    <span class="keyword">break</span> <span class="comment">#之前竟然是continue。。。。</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    lines_new.append(line)</span><br><span class="line">            <span class="keyword">except</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;No expect formated:&#123;&#125;&quot;</span>.<span class="built_in">format</span>(line))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;Monitor_BBB.csv&quot;</span>, <span class="string">&quot;w&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.writelines(lines_new)     </span><br><span class="line">    <span class="comment"># dt_start    = datetime.strptime(dt_start_str, dateformat1)</span></span><br><span class="line">    <span class="comment"># dt_end      = datetime.strptime(dt_start_str, dateformat2)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># a = datetime.strptime(&quot;2018-06-13 23:51:17&quot;, &quot;%Y-%m-%d %H:%M:%S&quot;)</span></span><br><span class="line">    <span class="comment"># b = datetime.strptime(&quot;2018/06/13 23:51:52&quot;, &quot;%Y/%m/%d %H:%M:%S&quot;)</span></span><br><span class="line">    <span class="comment"># print(a, b)</span></span><br><span class="line">__main__()</span><br></pre></td></tr></table></figure>

</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2018-06-13T16:00:00.000Z" title="2018/6/14 上午12:00:00">2018-06-14</time></span><span class="level-item">Updated&nbsp;<time dateTime="2018-10-18T13:45:48.446Z" title="2018/10/18 下午9:45:48">2018-10-18</time></span><span class="level-item"> BF </span><span class="level-item">10 minutes read (About 1468 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2018/06/14/2018/06/2018-06-16-MultiVarsPerformanceTest/">Multi-parameters performance test</a></h1><div class="content"><h1 id="Multi-variables-performance-test"><a href="#Multi-variables-performance-test" class="headerlink" title="Multi-variables performance test"></a>Multi-variables performance test</h1><p>最近一直在忙，都没有时间总结和改进现在的测试流程，瓶颈已经显现出来。下周的一个主要的任务就是大批量的测试不同虚拟机下不同参数执行任务的性能,从而得到CPU和Memory消耗适合的一些参数，并做为benchmark。可以预见之后还有类似的测试的任务，那必要要提前做好改变。今天主要是把思路整理出来。</p>
<h2 id="背景与需求"><a href="#背景与需求" class="headerlink" title="背景与需求"></a>背景与需求</h2><p>之前已经有经过多次改良的脚本，可以执行在一个虚拟机上的完整测试任务，针对不同的机器，都有对应的配置文件。当测试流程开始时，会读取对应的配置，而且这些配置都是存放在Share Folder下对应的机器名文件夹下，那么每次测试之前，都需要手动去把对应的文件改成要想要的数据（主要就2个配置文件），然后执行任务，结束之后会有对应的Test Result和Monitor Data以供收集数据。</p>
<p>那么，接下来想要实现的就是<strong>一次性配置</strong>多个参数，不同的机器能够自动依次执行测试任务，最后将所有的测试结果合在一处，形成报表，而不再需要人工再去采集一下。</p>
<h2 id="实现思路"><a href="#实现思路" class="headerlink" title="实现思路"></a>实现思路</h2><h3 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h3><p>目前DB需要人工去回滚，因为之前数据库资源紧张，经常需要去切换。如果写在代码中，容易失误而restore错数据库，所以用sql人工去执行回滚，当时为适合的方案。那么接下来要自动连续测试的话，首先第一步就是把自动回滚加入到每次测试用例执行前。</p>
<p>需要考虑的是使用什么方式：</p>
<ul>
<li>可以直接用目前的python去写回滚脚本，并加入到整体流程代码中。</li>
<li>可以先用Powershell或Python写一个独立的回滚脚本，并可以加入系统Scheduler中，而主程序只是调用，这样可以将回滚任务分离。比如具体的DB信息，回滚基于的Backup都不需要在主程序中设置。我比较偏向这个选择，这样回滚数据库功能更容易共享，可以给别的测试任务使用。</li>
</ul>
<h3 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h3><p>原来的流程中是去基于机器名目录下去寻找固定名字的配置文件(e.g. config.ini)。那么现在必须增加配置选择，也有几种方案：<br>首先必要的是新增变量组合的配置，这个可以放在主程序配置中，也可以在Share Folder下单独配置e.g. VM_Name/parameters.ini 类似于</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[TC1]</span></span><br><span class="line"><span class="attr">configfile1.key1</span> = value1</span><br><span class="line"><span class="attr">configfile2.key2</span> = value2</span><br><span class="line"><span class="section">[TC2]</span></span><br><span class="line"><span class="attr">configfile1.key1</span> = value3</span><br><span class="line"><span class="attr">configfile2.key2</span> = value4</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>而在上面的前提下：</p>
<ul>
<li>在VM名目录下按变量顺序新加文件夹，e.g. V1_V2/config.ini,引导主程序使用该目录下的配置。</li>
<li>建立一个config.ini模板，比如VM_Name/config.template.ini，然后将读取后的配置填充进去，每次都生成新的VM_Name/config.ini。这样的话，原来的主程序并不需要改变，只需要把新功能添加进去就好，而且之前写过类似的，可以拿来复用，我偏向这个方式。</li>
</ul>
<h3 id="多台虚拟机信息交互"><a href="#多台虚拟机信息交互" class="headerlink" title="多台虚拟机信息交互"></a>多台虚拟机信息交互</h3><p>上面想通了，基本上一台机器的自动多次任务执行就没有什么问题了，主要是去实现。但现在涉及到不同机器之前先后执行顺序，一台执行完需要另一台机器接着做。</p>
<p>之前做过一个类似的，大体思路可以拿来用:</p>
<ol>
<li>将不同机器中的主程序加入Scheduler中</li>
<li>建立一个入口批处理bat，在其中先后调用不同VM中的Scheduler去执行主程</li>
<li>每次触发一个Scheduler运行之后利用timeout等方式等待(所以Delay时间必须要大于前一个所有test都完成的时间，不然会有conflict)</li>
</ol>
<p>前面<code>3</code>的改进版本：</p>
<ul>
<li>死等固定时间肯定是很不明智的，尤其是在消耗时间不明确的情况下，这样效率非常低。那么这个时候，在每个主程序中加入一个操作，就是在每次轮到自己执行的时候，就会在一个share folder下生成一个信息文件表示自己开始执行号，这样在接下来的VM要执行的时候就会block住，等待上一个机器完成的信息，之后再继续自己执行</li>
</ul>
<p>其实，现在的job benchmark就是用类似的思路。</p>
<h3 id="最后，TestResult"><a href="#最后，TestResult" class="headerlink" title="最后，TestResult"></a>最后，TestResult</h3><p>目前，每台机上跑的时候都会在本机生成以时间为名字的目录，并将该次的TestResult生成在该目录下。那么接下来的目标是：</p>
<ul>
<li>生成结果统一生成到Share Folder，这样方便管理，而且大家都能看到。</li>
<li>生成结果统一放在一个目录日期目录下，之后再以每台机器自己的名字为目录，再在每台机子下用参数值做目录，最后的Result就放在这个目录下。</li>
<li>optional:将所以的结果统一个Excel文件中，放在root目录下，这样每轮跑完就可以直接查看结果。</li>
</ul>
<h2 id="结尾，晚安！"><a href="#结尾，晚安！" class="headerlink" title="结尾，晚安！"></a>结尾，晚安！</h2></div></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous"><a href="/page/6/">Previous</a></div><div class="pagination-next"><a href="/page/8/">Next</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link" href="/">1</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/6/">6</a></li><li><a class="pagination-link is-current" href="/page/7/">7</a></li><li><a class="pagination-link" href="/page/8/">8</a></li><li><a class="pagination-link" href="/page/9/">9</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/mybear.jpg" alt="bearfly1990"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">bearfly1990</p><p class="is-size-6 is-block">有熊在飞</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>HZ, China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">81</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">0</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">100</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/bearfly1990" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/bearfly1990"><i class="fab fa-github"></i></a></div></div></div><!--!--><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://hexo.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Hexo</span></span><span class="level-right"><span class="level-item tag">hexo.io</span></span></a></li><li><a class="level is-mobile" href="https://bulma.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Bulma</span></span><span class="level-right"><span class="level-item tag">bulma.io</span></span></a></li></ul></div></div></div><!--!--><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-08-11T16:00:00.000Z">2021-08-12</time></p><p class="title"><a href="/2021/08/12/2021/08/2021-08-12-box-python-sdk/">box SDK for python</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-08-07T16:00:00.000Z">2021-08-08</time></p><p class="title"><a href="/2021/08/08/2021/08/2021-08-09-kafka-learn-01/">Kafka Learn - 01</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-07-20T16:00:00.000Z">2021-07-21</time></p><p class="title"><a href="/2021/07/21/2021/07/2021-07-21-jaydebeapi/">jaydebeapi</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-07-16T16:00:00.000Z">2021-07-17</time></p><p class="title"><a href="/2021/07/17/2021/07/2021-07-17-NanHu/">NanHu</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-07-03T16:00:00.000Z">2021-07-04</time></p><p class="title"><a href="/2021/07/04/2021/07/2021-07-04-folder-tree/">Folder Tree Info DFS/BFS</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2021/08/"><span class="level-start"><span class="level-item">August 2021</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/07/"><span class="level-start"><span class="level-item">July 2021</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/03/"><span class="level-start"><span class="level-item">March 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/02/"><span class="level-start"><span class="level-item">February 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/10/"><span class="level-start"><span class="level-item">October 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/09/"><span class="level-start"><span class="level-item">September 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/06/"><span class="level-start"><span class="level-item">June 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/05/"><span class="level-start"><span class="level-item">May 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/03/"><span class="level-start"><span class="level-item">March 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/01/"><span class="level-start"><span class="level-item">January 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/12/"><span class="level-start"><span class="level-item">December 2019</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/11/"><span class="level-start"><span class="level-item">November 2019</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/10/"><span class="level-start"><span class="level-item">October 2019</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/08/"><span class="level-start"><span class="level-item">August 2019</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/06/"><span class="level-start"><span class="level-item">June 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/05/"><span class="level-start"><span class="level-item">May 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/03/"><span class="level-start"><span class="level-item">March 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/02/"><span class="level-start"><span class="level-item">February 2019</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/01/"><span class="level-start"><span class="level-item">January 2019</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/12/"><span class="level-start"><span class="level-item">December 2018</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/11/"><span class="level-start"><span class="level-item">November 2018</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/10/"><span class="level-start"><span class="level-item">October 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/09/"><span class="level-start"><span class="level-item">September 2018</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/08/"><span class="level-start"><span class="level-item">August 2018</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/07/"><span class="level-start"><span class="level-item">July 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/06/"><span class="level-start"><span class="level-item">June 2018</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/05/"><span class="level-start"><span class="level-item">May 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/04/"><span class="level-start"><span class="level-item">April 2018</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/2019/"><span class="tag">2019</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Apache/"><span class="tag">Apache</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Diary/"><span class="tag">Diary</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/E-R/"><span class="tag">E-R</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/HDFS/"><span class="tag">HDFS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Hadoop/"><span class="tag">Hadoop</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Java/"><span class="tag">Java</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Kafka/"><span class="tag">Kafka</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/PIL/"><span class="tag">PIL</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Pandas/"><span class="tag">Pandas</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Python/"><span class="tag">Python</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/RESTful/"><span class="tag">RESTful</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/RPC/"><span class="tag">RPC</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/acm/"><span class="tag">acm</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/algorithm/"><span class="tag">algorithm</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/algorithms/"><span class="tag">algorithms</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/alibaba/"><span class="tag">alibaba</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/annotation/"><span class="tag">annotation</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/apidoc/"><span class="tag">apidoc</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/big-data/"><span class="tag">big data</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/bigdata/"><span class="tag">bigdata</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/box/"><span class="tag">box</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/chart/"><span class="tag">chart</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/chartjs/"><span class="tag">chartjs</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/class/"><span class="tag">class</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/colorlog/"><span class="tag">colorlog</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/config/"><span class="tag">config</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/console/"><span class="tag">console</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/cpu/"><span class="tag">cpu</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/csv/"><span class="tag">csv</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/dairy/"><span class="tag">dairy</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/data-analysis/"><span class="tag">data analysis</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/data-structure/"><span class="tag">data structure</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/database/"><span class="tag">database</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/db/"><span class="tag">db</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/design-patterns/"><span class="tag">design patterns</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/diary/"><span class="tag">diary</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/dokuwiki/"><span class="tag">dokuwiki</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/download/"><span class="tag">download</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/email/"><span class="tag">email</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/excel/"><span class="tag">excel</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/file/"><span class="tag">file</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/flask-restful/"><span class="tag">flask-restful</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/gRPC/"><span class="tag">gRPC</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/goal/"><span class="tag">goal</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/hadoop/"><span class="tag">hadoop</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/hive/"><span class="tag">hive</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/httpd/"><span class="tag">httpd</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/imageio/"><span class="tag">imageio</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/io/"><span class="tag">io</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/java/"><span class="tag">java</span><span class="tag">9</span></a></div><div class="control"><a class="tags has-addons" href="/tags/javascript/"><span class="tag">javascript</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/jdbc/"><span class="tag">jdbc</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/json/"><span class="tag">json</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/life/"><span class="tag">life</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/linux/"><span class="tag">linux</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/lock/"><span class="tag">lock</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/log/"><span class="tag">log</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/manual/"><span class="tag">manual</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/matplotlib/"><span class="tag">matplotlib</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/memory/"><span class="tag">memory</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/monitor/"><span class="tag">monitor</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/moviepy/"><span class="tag">moviepy</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/network/"><span class="tag">network</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/node-js/"><span class="tag">node.js</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/numpy/"><span class="tag">numpy</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/openpyxl/"><span class="tag">openpyxl</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/orm/"><span class="tag">orm</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/pandas/"><span class="tag">pandas</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/performance/"><span class="tag">performance</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/php/"><span class="tag">php</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/powershell/"><span class="tag">powershell</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/private/"><span class="tag">private</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/progress-bar/"><span class="tag">progress bar</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/proxy/"><span class="tag">proxy</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/pyodbc/"><span class="tag">pyodbc</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/python/"><span class="tag">python</span><span class="tag">45</span></a></div><div class="control"><a class="tags has-addons" href="/tags/pytz/"><span class="tag">pytz</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/pywin32/"><span class="tag">pywin32</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/reflect/"><span class="tag">reflect</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/regex/"><span class="tag">regex</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sdk/"><span class="tag">sdk</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/spider/"><span class="tag">spider</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/springboot/"><span class="tag">springboot</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sql/"><span class="tag">sql</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sqlalchemy/"><span class="tag">sqlalchemy</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/swagger/"><span class="tag">swagger</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tasklist/"><span class="tag">tasklist</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/test/"><span class="tag">test</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/thread/"><span class="tag">thread</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tiktok/"><span class="tag">tiktok</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tkinter/"><span class="tag">tkinter</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/training/"><span class="tag">training</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/txt/"><span class="tag">txt</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/unicode/"><span class="tag">unicode</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/vmware/"><span class="tag">vmware</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/work/"><span class="tag">work</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/xpath/"><span class="tag">xpath</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/yaml/"><span class="tag">yaml</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%8D%9A%E5%AE%A2/"><span class="tag">博客</span><span class="tag">1</span></a></div></div></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/favicon.ico" alt="Shawn&#039;Blog Test" height="28"></a><p class="is-size-7"><span>&copy; 2021 Shawn</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>