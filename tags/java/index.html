<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Tag: Java - Shawn&#039;Blog Test</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Shawn&#039;Blog Test"><meta name="msapplication-TileImage" content="/img/favicon.ico"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Shawn&#039;Blog Test"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta property="og:type" content="blog"><meta property="og:title" content="Shawn&#039;Blog Test"><meta property="og:url" content="https://bearfly1990.github.io/"><meta property="og:site_name" content="Shawn&#039;Blog Test"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://bearfly1990.github.io/img/og_image.png"><meta property="article:author" content="Shawn"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://bearfly1990.github.io"},"headline":"Shawn'Blog Test","image":["https://bearfly1990.github.io/img/og_image.png"],"author":{"@type":"Person","name":"Shawn"},"description":""}</script><link rel="icon" href="/img/favicon.ico"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.4.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/favicon.ico" alt="Shawn&#039;Blog Test" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/bearfly1990"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><div class="card-content"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/tags">Tags</a></li><li class="is-active"><a href="#" aria-current="page">Java</a></li></ul></nav></div></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-08-07T16:00:00.000Z" title="2021/8/8 上午12:00:00">2021-08-08</time></span><span class="level-item">Updated&nbsp;<time dateTime="2021-08-25T13:25:58.296Z" title="2021/8/25 下午9:25:58">2021-08-25</time></span><span class="level-item"> BF </span><span class="level-item">14 minutes read (About 2117 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/08/08/2021/08/2021-08-09-kafka-learn-01/">Kafka Learn - 01</a></h1><div class="content"><h3 id="Kafka"><a href="#Kafka" class="headerlink" title="Kafka"></a>Kafka</h3><p>最近报名了公司的<code>Kafka Training</code> , 主要是自己看视频。今天主要记录一下使用到的命令和练习的<code>Java Code</code>，前期的概念有时间再总结下。从CLI和Java Code的这几节来说，主要练习了<code>Producer</code>和<code>Comsumer</code>的使用，数据的推送和读取应该是一般人使用Kafka最基本和最常用的操作了吧。</p>
<h3 id="安装与配置"><a href="#安装与配置" class="headerlink" title="安装与配置"></a>安装与配置</h3><p><a target="_blank" rel="noopener" href="http://kafka.apache.org/downloads">http://kafka.apache.org/downloads</a></p>
<p>不同系统的配置大同小异，为了省事我用的是<code>windows</code>，需要把<code>D:\ProgramsDev\kafka_2.13-2.8.0\bin\windows</code>加入到环境变量中，linux到<code>bin</code>就够了。</p>
<p>在<code>data</code>目录下新建<code>kafka</code>和<code>zookeeper</code>目录。<br><img src="/img/post/2021/08/markdown-img-paste-20210809000228463.png" alt="data folder"></p>
<p>目前要动的配置文件就两个，把上面新建的目录路径加入到配置文件中：</p>
<h4 id="server-properties"><a href="#server-properties" class="headerlink" title="server.properties"></a>server.properties</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># A comma separated list of directories under which to store log files</span><br><span class="line">log.dirs&#x3D;D:&#x2F;ProgramsDev&#x2F;kafka_2.13-2.8.0&#x2F;data&#x2F;kafka</span><br><span class="line"></span><br><span class="line"># The default number of log partitions per topic. More partitions allow greater</span><br><span class="line"># parallelism for consumption, but this will also result in more files across</span><br><span class="line"># the brokers.</span><br><span class="line">num.partitions&#x3D;3</span><br></pre></td></tr></table></figure>

<h4 id="zookeeper-properties"><a href="#zookeeper-properties" class="headerlink" title="zookeeper.properties"></a>zookeeper.properties</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># the directory where the snapshot is stored.</span><br><span class="line">dataDir&#x3D;D:&#x2F;ProgramsDev&#x2F;kafka_2.13-2.8.0&#x2F;data&#x2F;zookeeper</span><br></pre></td></tr></table></figure>

<h3 id="启动服务"><a href="#启动服务" class="headerlink" title="启动服务"></a>启动服务</h3><p>注意配置文件的相对路径</p>
<p>kafka bootstrap-server <code>127.0.0.1:9092</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kafka-server-start ./config/server.properties</span><br></pre></td></tr></table></figure>

<p>zookeeper <code>127.0.0.1:2181</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zookeeper-server-start ./config/zookeeper.properties</span><br></pre></td></tr></table></figure>

<h3 id="CLI使用"><a href="#CLI使用" class="headerlink" title="CLI使用"></a>CLI使用</h3><p>视频教材中演示的很好，这边就只是简单的把<code>Command</code>列一下，可以自己试试，理解下。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">kafka-topics --zookeeper 127.0.0.1:2181 --topic first_topic --create --partitions 3 --replication-factor 1</span><br><span class="line">kafka-topics --zookeeper 127.0.0.1:2181 --topic second_topic --create --partitions 6 --replication-factor 1</span><br><span class="line"></span><br><span class="line">kafka-topics --zookeeper 127.0.0.1:2181 --list</span><br><span class="line">kafka-topics --zookeeper 127.0.0.1:2181 --topic first_topic --describe</span><br><span class="line">kafka-topics --zookeeper 127.0.0.1:2181 --topic second_topic --describe</span><br><span class="line">kafka-topics --zookeeper 127.0.0.1:2181 --topic second_topic --delete</span><br><span class="line"></span><br><span class="line">kafka-console-producer --broker-list 127.0.0.1:9092 --topic first_topic</span><br><span class="line">kafka-console-producer --broker-list 127.0.0.1:9092 --topic first_topic --producer-property acks=all</span><br><span class="line">kafka-topics --zookeeper 127.0.0.1:2181 --list</span><br><span class="line"></span><br><span class="line">kafka-console-consumer --bootstrap-server 127.0.0.1:9092 --topic first_topic --group my-second-application --from-beginning</span><br><span class="line"></span><br><span class="line">kafka-console-consumer --bootstrap-server 127.0.0.1:9092 --topic first_topic --group my-first-application</span><br><span class="line"></span><br><span class="line">kafka-console-consumer --bootstrap-server 127.0.0.1:9092 --topic first_topic --from-beginning</span><br><span class="line"></span><br><span class="line">kafka-console-consumer --bootstrap-server 127.0.0.1:9092 --topic first_topic</span><br><span class="line"></span><br><span class="line">kafka-console-consumer --bootstrap-server 127.0.0.1:9092 --topic first_topic --group my-third-application</span><br><span class="line"></span><br><span class="line">kafka-consumer-groups --bootstrap-server localhost:9092 --list</span><br><span class="line"></span><br><span class="line">kafka-consumer-groups --bootstrap-server localhost:9092 --describe --group my-first-application</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">kafka-consumer-groups --bootstrap-server localhost:9092 --group my-first-application --reset-offsets --shift-by 2 --execute --topic first_topic</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">kafka-consumer-groups --bootstrap-server localhost:9092 --group my-first-application --reset-offsets --to-earliest --execute --topic first_topic</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="Offset-Explorer-formerly-Kafka-Tool"><a href="#Offset-Explorer-formerly-Kafka-Tool" class="headerlink" title="Offset Explorer (formerly Kafka Tool)"></a>Offset Explorer (formerly Kafka Tool)</h3><p><a target="_blank" rel="noopener" href="https://www.kafkatool.com/">https://www.kafkatool.com/</a></p>
<p>这是一个可以查看Kafka信息(Broker,Topic, Consumer, Position…)的工具。<br><img src="/img/post/2021/08/markdown-img-kafka-tool.png" alt="Kafka Tool"></p>
<h3 id="Java-Code-Practice"><a href="#Java-Code-Practice" class="headerlink" title="Java Code Practice"></a>Java Code Practice</h3><p>实际操作其实和CLI差不多的，只是用Java来实现。</p>
<h4 id="pom-xml"><a href="#pom-xml" class="headerlink" title="pom.xml"></a>pom.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>fun.bearfly<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>kafka-learn<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.kafka<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>kafka_2.13<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.8.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-simple<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.32<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="ProducerDemo"><a href="#ProducerDemo" class="headerlink" title="ProducerDemo"></a>ProducerDemo</h4><p>最简单的一个Producer</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> fun.bearfly.kafka.learn;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.kafka.clients.producer.KafkaProducer;</span><br><span class="line"><span class="keyword">import</span> org.apache.kafka.clients.producer.ProducerConfig;</span><br><span class="line"><span class="keyword">import</span> org.apache.kafka.clients.producer.ProducerRecord;</span><br><span class="line"><span class="keyword">import</span> org.apache.kafka.common.serialization.StringSerializer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProducerDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String bootstrapServers = <span class="string">&quot;127.0.0.1:9092&quot;</span>;</span><br><span class="line">        Properties properties = <span class="keyword">new</span> Properties();</span><br><span class="line">        properties.setProperty(<span class="string">&quot;bootstrap.servers&quot;</span>, bootstrapServers);</span><br><span class="line">        properties.setProperty(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapServers);</span><br><span class="line">        properties.setProperty(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, StringSerializer.class.getName());</span><br><span class="line">        properties.setProperty(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, StringSerializer.class.getName());</span><br><span class="line"></span><br><span class="line">        KafkaProducer&lt;String, String&gt; producer = <span class="keyword">new</span> KafkaProducer&lt;String, String&gt;(properties);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//create producer record</span></span><br><span class="line">        ProducerRecord&lt;String, String&gt; record = <span class="keyword">new</span> ProducerRecord&lt;&gt;(<span class="string">&quot;first_topic&quot;</span>, <span class="string">&quot;hello world&quot;</span>);</span><br><span class="line">        producer.send(record);</span><br><span class="line"></span><br><span class="line">        producer.flush();</span><br><span class="line">        producer.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="ProducerDemoKeys"><a href="#ProducerDemoKeys" class="headerlink" title="ProducerDemoKeys"></a>ProducerDemoKeys</h4><p>带Keys</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> fun.bearfly.kafka.learn;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.kafka.clients.producer.*;</span><br><span class="line"><span class="keyword">import</span> org.apache.kafka.common.serialization.StringSerializer;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutionException;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProducerDemoKeys</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ExecutionException, InterruptedException </span>&#123;</span><br><span class="line">        Logger logger = LoggerFactory.getLogger(ProducerDemoKeys.class);</span><br><span class="line"></span><br><span class="line">        String bootstrapServers = <span class="string">&quot;127.0.0.1:9092&quot;</span>;</span><br><span class="line">        Properties properties = <span class="keyword">new</span> Properties();</span><br><span class="line">        properties.setProperty(<span class="string">&quot;bootstrap.servers&quot;</span>, bootstrapServers);</span><br><span class="line">        properties.setProperty(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapServers);</span><br><span class="line">        properties.setProperty(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, StringSerializer.class.getName());</span><br><span class="line">        properties.setProperty(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, StringSerializer.class.getName());</span><br><span class="line"></span><br><span class="line">        KafkaProducer&lt;String, String&gt; producer = <span class="keyword">new</span> KafkaProducer&lt;String, String&gt;(properties);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//create producer record</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            String topic = <span class="string">&quot;first_topic&quot;</span>;</span><br><span class="line">            String value = <span class="string">&quot;hello world &quot;</span> + Integer.toString(i);</span><br><span class="line">            String key = <span class="string">&quot;id_&quot;</span> + Integer.toString(i);</span><br><span class="line"></span><br><span class="line">            logger.info(<span class="string">&quot;Key: &quot;</span> + key);</span><br><span class="line">            ProducerRecord&lt;String, String&gt; record = <span class="keyword">new</span> ProducerRecord&lt;&gt;(topic, key, value);</span><br><span class="line">            producer.send(record, <span class="keyword">new</span> Callback() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCompletion</span><span class="params">(RecordMetadata recordMetadata, Exception e)</span> </span>&#123;</span><br><span class="line">                    <span class="keyword">if</span> (e == <span class="keyword">null</span>) &#123;</span><br><span class="line">                        StringBuilder sb = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">                        sb.append(<span class="string">&quot;Received new metadata. \n&quot;</span>);</span><br><span class="line">                        sb.append(<span class="string">&quot;topic:&quot;</span>).append(recordMetadata.topic()).append(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">                        sb.append(<span class="string">&quot;partition:&quot;</span>).append(recordMetadata.partition()).append(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">                        sb.append(<span class="string">&quot;offset:&quot;</span>).append(recordMetadata.offset()).append(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">                        sb.append(<span class="string">&quot;timestamp:&quot;</span>).append(recordMetadata.timestamp()).append(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">                        logger.info(sb.toString());</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        logger.error(<span class="string">&quot;Error while producing&quot;</span>, e);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;).get();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        producer.flush();</span><br><span class="line">        producer.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ProducerDemoWithCallBack"><a href="#ProducerDemoWithCallBack" class="headerlink" title="ProducerDemoWithCallBack"></a>ProducerDemoWithCallBack</h4><p>带回调</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> fun.bearfly.kafka.learn;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.kafka.clients.producer.*;</span><br><span class="line"><span class="keyword">import</span> org.apache.kafka.common.serialization.StringSerializer;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProducerDemoWithCallBack</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Logger logger = LoggerFactory.getLogger(ProducerDemoWithCallBack.class);</span><br><span class="line"></span><br><span class="line">        String bootstrapServers = <span class="string">&quot;127.0.0.1:9092&quot;</span>;</span><br><span class="line">        Properties properties = <span class="keyword">new</span> Properties();</span><br><span class="line">        properties.setProperty(<span class="string">&quot;bootstrap.servers&quot;</span>, bootstrapServers);</span><br><span class="line">        properties.setProperty(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapServers);</span><br><span class="line">        properties.setProperty(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, StringSerializer.class.getName());</span><br><span class="line">        properties.setProperty(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, StringSerializer.class.getName());</span><br><span class="line"></span><br><span class="line">        KafkaProducer&lt;String, String&gt; producer = <span class="keyword">new</span> KafkaProducer&lt;String, String&gt;(properties);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//create producer record</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            ProducerRecord&lt;String, String&gt; record = <span class="keyword">new</span> ProducerRecord&lt;&gt;(<span class="string">&quot;first_topic&quot;</span>, <span class="string">&quot;hello world&quot;</span> + Integer.toString(i));</span><br><span class="line">            producer.send(record, <span class="keyword">new</span> Callback() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCompletion</span><span class="params">(RecordMetadata recordMetadata, Exception e)</span> </span>&#123;</span><br><span class="line">                    <span class="keyword">if</span> (e == <span class="keyword">null</span>) &#123;</span><br><span class="line">                        StringBuilder sb = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">                        sb.append(<span class="string">&quot;Received new metadata. \n&quot;</span>);</span><br><span class="line">                        sb.append(<span class="string">&quot;topic:&quot;</span>).append(recordMetadata.topic()).append(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">                        sb.append(<span class="string">&quot;partition:&quot;</span>).append(recordMetadata.partition()).append(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">                        sb.append(<span class="string">&quot;offset:&quot;</span>).append(recordMetadata.offset()).append(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">                        sb.append(<span class="string">&quot;timestamp:&quot;</span>).append(recordMetadata.timestamp()).append(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">                        logger.info(sb.toString());</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        logger.error(<span class="string">&quot;Error while producing&quot;</span>, e);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        producer.flush();</span><br><span class="line">        producer.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ConsumerDemo"><a href="#ConsumerDemo" class="headerlink" title="ConsumerDemo"></a>ConsumerDemo</h4><p>订阅Topic</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> fun.bearfly.kafka.learn;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.kafka.clients.consumer.ConsumerConfig;</span><br><span class="line"><span class="keyword">import</span> org.apache.kafka.clients.consumer.ConsumerRecord;</span><br><span class="line"><span class="keyword">import</span> org.apache.kafka.clients.consumer.ConsumerRecords;</span><br><span class="line"><span class="keyword">import</span> org.apache.kafka.clients.consumer.KafkaConsumer;</span><br><span class="line"><span class="keyword">import</span> org.apache.kafka.common.serialization.StringDeserializer;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.time.Duration;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConsumerDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Logger logger = LoggerFactory.getLogger(ConsumerDemo.class.getName());</span><br><span class="line">        String bootstrapServers = <span class="string">&quot;127.0.0.1:9092&quot;</span>;</span><br><span class="line">        String groupId = <span class="string">&quot;my-fourth-application&quot;</span>;</span><br><span class="line">        String topic = <span class="string">&quot;first_topic&quot;</span>;</span><br><span class="line"></span><br><span class="line">        Properties properties = <span class="keyword">new</span> Properties();</span><br><span class="line">        properties.setProperty(<span class="string">&quot;bootstrap.servers&quot;</span>, bootstrapServers);</span><br><span class="line">        properties.setProperty(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapServers);</span><br><span class="line">        properties.setProperty(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class.getName());</span><br><span class="line">        properties.setProperty(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class.getName());</span><br><span class="line">        properties.setProperty(ConsumerConfig.GROUP_ID_CONFIG, groupId);</span><br><span class="line">        properties.setProperty(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, <span class="string">&quot;earliest&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        KafkaConsumer&lt;String, String&gt; consumer = <span class="keyword">new</span> KafkaConsumer&lt;String, String&gt;(properties);</span><br><span class="line"></span><br><span class="line">        consumer.subscribe(Arrays.asList(topic));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            ConsumerRecords&lt;String, String&gt; records = consumer.poll(Duration.ofMillis(<span class="number">100</span>));</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (ConsumerRecord&lt;String, String&gt; record : records) &#123;</span><br><span class="line">                logger.info(<span class="string">&quot;Key: &quot;</span> + record.key() + <span class="string">&quot;, Value: &quot;</span> + record.value());</span><br><span class="line">                logger.info(<span class="string">&quot;Partition: &quot;</span> + record.partition() + <span class="string">&quot;, Offset: &quot;</span> + record.offset());</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="ConsumerDemoGroups"><a href="#ConsumerDemoGroups" class="headerlink" title="ConsumerDemoGroups"></a>ConsumerDemoGroups</h4><p>带Group</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> fun.bearfly.kafka.learn;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.kafka.clients.consumer.ConsumerConfig;</span><br><span class="line"><span class="keyword">import</span> org.apache.kafka.clients.consumer.ConsumerRecord;</span><br><span class="line"><span class="keyword">import</span> org.apache.kafka.clients.consumer.ConsumerRecords;</span><br><span class="line"><span class="keyword">import</span> org.apache.kafka.clients.consumer.KafkaConsumer;</span><br><span class="line"><span class="keyword">import</span> org.apache.kafka.common.serialization.StringDeserializer;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.time.Duration;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConsumerDemoGroups</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Logger logger = LoggerFactory.getLogger(ConsumerDemoGroups.class.getName());</span><br><span class="line">        String bootstrapServers = <span class="string">&quot;127.0.0.1:9092&quot;</span>;</span><br><span class="line">        String groupId = <span class="string">&quot;my-fifth-application&quot;</span>;</span><br><span class="line">        String topic = <span class="string">&quot;first_topic&quot;</span>;</span><br><span class="line"></span><br><span class="line">        Properties properties = <span class="keyword">new</span> Properties();</span><br><span class="line">        properties.setProperty(<span class="string">&quot;bootstrap.servers&quot;</span>, bootstrapServers);</span><br><span class="line">        properties.setProperty(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapServers);</span><br><span class="line">        properties.setProperty(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class.getName());</span><br><span class="line">        properties.setProperty(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class.getName());</span><br><span class="line">        properties.setProperty(ConsumerConfig.GROUP_ID_CONFIG, groupId);</span><br><span class="line">        properties.setProperty(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, <span class="string">&quot;earliest&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        KafkaConsumer&lt;String, String&gt; consumer = <span class="keyword">new</span> KafkaConsumer&lt;String, String&gt;(properties);</span><br><span class="line"></span><br><span class="line">        consumer.subscribe(Arrays.asList(topic));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            ConsumerRecords&lt;String, String&gt; records = consumer.poll(Duration.ofMillis(<span class="number">100</span>));</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (ConsumerRecord&lt;String, String&gt; record : records) &#123;</span><br><span class="line">                logger.info(<span class="string">&quot;Key: &quot;</span> + record.key() + <span class="string">&quot;, Value: &quot;</span> + record.value());</span><br><span class="line">                logger.info(<span class="string">&quot;Partition: &quot;</span> + record.partition() + <span class="string">&quot;, Offset: &quot;</span> + record.offset());</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="ConsumerDemoWithThread"><a href="#ConsumerDemoWithThread" class="headerlink" title="ConsumerDemoWithThread"></a>ConsumerDemoWithThread</h4><p>使用线程</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> fun.bearfly.kafka.learn;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.kafka.clients.consumer.ConsumerConfig;</span><br><span class="line"><span class="keyword">import</span> org.apache.kafka.clients.consumer.ConsumerRecord;</span><br><span class="line"><span class="keyword">import</span> org.apache.kafka.clients.consumer.ConsumerRecords;</span><br><span class="line"><span class="keyword">import</span> org.apache.kafka.clients.consumer.KafkaConsumer;</span><br><span class="line"><span class="keyword">import</span> org.apache.kafka.common.errors.WakeupException;</span><br><span class="line"><span class="keyword">import</span> org.apache.kafka.common.serialization.StringDeserializer;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.time.Duration;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.CountDownLatch;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConsumerDemoWithThread</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> ConsumerDemoWithThread().run();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">ConsumerDemoWithThread</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Logger logger = LoggerFactory.getLogger(ConsumerDemoWithThread.class.getName());</span><br><span class="line">        String bootstrapServers = <span class="string">&quot;127.0.0.1:9092&quot;</span>;</span><br><span class="line">        String groupId = <span class="string">&quot;my-sixth-application&quot;</span>;</span><br><span class="line">        String topic = <span class="string">&quot;first_topic&quot;</span>;</span><br><span class="line"></span><br><span class="line">        CountDownLatch latch = <span class="keyword">new</span> CountDownLatch(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        logger.info(<span class="string">&quot;Creating the consumer thread&quot;</span>);</span><br><span class="line">        Runnable myConsumerThread = <span class="keyword">new</span> ConsumerRunnable(</span><br><span class="line">                bootstrapServers,</span><br><span class="line">                groupId,</span><br><span class="line">                topic,</span><br><span class="line">                latch</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        Thread myThread = <span class="keyword">new</span> Thread(myConsumerThread);</span><br><span class="line"></span><br><span class="line">        myThread.start();</span><br><span class="line"></span><br><span class="line">        Runtime.getRuntime().addShutdownHook(<span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">            logger.info(<span class="string">&quot;Caught shutdown hook&quot;</span>);</span><br><span class="line">            ((ConsumerRunnable) myConsumerThread).shutdown();</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                latch.await();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            logger.info(<span class="string">&quot;Application has exited&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        ));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            latch.await();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            logger.error(<span class="string">&quot;Application got interrupted&quot;</span>, e);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            logger.info(<span class="string">&quot;Application is closing&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConsumerRunnable</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> CountDownLatch latch;</span><br><span class="line">        <span class="keyword">private</span> KafkaConsumer&lt;String, String&gt; consumer;</span><br><span class="line">        <span class="keyword">private</span> Logger logger = LoggerFactory.getLogger(ConsumerRunnable.class.getName());</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">ConsumerRunnable</span><span class="params">(String bootstrapServers,</span></span></span><br><span class="line"><span class="function"><span class="params">                                String groupId,</span></span></span><br><span class="line"><span class="function"><span class="params">                                String topic,</span></span></span><br><span class="line"><span class="function"><span class="params">                                CountDownLatch latch</span></span></span><br><span class="line"><span class="function"><span class="params">        )</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.latch = latch;</span><br><span class="line">            Properties properties = <span class="keyword">new</span> Properties();</span><br><span class="line">            properties.setProperty(<span class="string">&quot;bootstrap.servers&quot;</span>, bootstrapServers);</span><br><span class="line">            properties.setProperty(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapServers);</span><br><span class="line">            properties.setProperty(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class.getName());</span><br><span class="line">            properties.setProperty(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class.getName());</span><br><span class="line">            properties.setProperty(ConsumerConfig.GROUP_ID_CONFIG, groupId);</span><br><span class="line">            properties.setProperty(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, <span class="string">&quot;earliest&quot;</span>);</span><br><span class="line">            consumer = <span class="keyword">new</span> KafkaConsumer&lt;String, String&gt;(properties);</span><br><span class="line">            consumer.subscribe(Arrays.asList(topic));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">                    ConsumerRecords&lt;String, String&gt; records = consumer.poll(Duration.ofMillis(<span class="number">100</span>));</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">for</span> (ConsumerRecord&lt;String, String&gt; record : records) &#123;</span><br><span class="line">                        logger.info(<span class="string">&quot;Key: &quot;</span> + record.key() + <span class="string">&quot;, Value: &quot;</span> + record.value());</span><br><span class="line">                        logger.info(<span class="string">&quot;Partition: &quot;</span> + record.partition() + <span class="string">&quot;, Offset: &quot;</span> + record.offset());</span><br><span class="line"></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (WakeupException e) &#123;</span><br><span class="line">                logger.info(<span class="string">&quot;Received shutdown signal!&quot;</span>);</span><br><span class="line">            &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                consumer.close();</span><br><span class="line">                latch.countDown();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">shutdown</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="comment">// special method to interrupt consumer.poll()</span></span><br><span class="line">            <span class="comment">// will throw the exception WakeUpException</span></span><br><span class="line">            consumer.wakeup();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="ConsumerDemoAssignSeek"><a href="#ConsumerDemoAssignSeek" class="headerlink" title="ConsumerDemoAssignSeek"></a>ConsumerDemoAssignSeek</h4><p>指定topic offset</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> fun.bearfly.kafka.learn;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.kafka.clients.consumer.ConsumerConfig;</span><br><span class="line"><span class="keyword">import</span> org.apache.kafka.clients.consumer.ConsumerRecord;</span><br><span class="line"><span class="keyword">import</span> org.apache.kafka.clients.consumer.ConsumerRecords;</span><br><span class="line"><span class="keyword">import</span> org.apache.kafka.clients.consumer.KafkaConsumer;</span><br><span class="line"><span class="keyword">import</span> org.apache.kafka.common.TopicPartition;</span><br><span class="line"><span class="keyword">import</span> org.apache.kafka.common.serialization.StringDeserializer;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.time.Duration;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConsumerDemoAssignSeek</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Logger logger = LoggerFactory.getLogger(ConsumerDemoAssignSeek.class.getName());</span><br><span class="line">        String bootstrapServers = <span class="string">&quot;127.0.0.1:9092&quot;</span>;</span><br><span class="line">        String groupId = <span class="string">&quot;my-seven-application&quot;</span>;</span><br><span class="line">        String topic = <span class="string">&quot;first_topic&quot;</span>;</span><br><span class="line"></span><br><span class="line">        Properties properties = <span class="keyword">new</span> Properties();</span><br><span class="line">        properties.setProperty(<span class="string">&quot;bootstrap.servers&quot;</span>, bootstrapServers);</span><br><span class="line">        properties.setProperty(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapServers);</span><br><span class="line">        properties.setProperty(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class.getName());</span><br><span class="line">        properties.setProperty(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class.getName());</span><br><span class="line"><span class="comment">//        properties.setProperty(ConsumerConfig.GROUP_ID_CONFIG, groupId);</span></span><br><span class="line">        properties.setProperty(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, <span class="string">&quot;earliest&quot;</span>);</span><br><span class="line"></span><br><span class="line">        KafkaConsumer&lt;String, String&gt; consumer = <span class="keyword">new</span> KafkaConsumer&lt;String, String&gt;(properties);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// assign and seek are mostly used to replay data or fetch a specific message</span></span><br><span class="line">        <span class="comment">// assign</span></span><br><span class="line">        TopicPartition partitionToReadFrom = <span class="keyword">new</span> TopicPartition(topic, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">long</span> offsetToReadFrom = <span class="number">15L</span>;</span><br><span class="line">        consumer.assign(Arrays.asList(partitionToReadFrom));</span><br><span class="line">        <span class="comment">//seek</span></span><br><span class="line">        consumer.seek(partitionToReadFrom, offsetToReadFrom);</span><br><span class="line"><span class="comment">//        consumer.subscribe(Arrays.asList(topic));</span></span><br><span class="line">        <span class="keyword">int</span> numberOfMessagesToRead = <span class="number">5</span>;</span><br><span class="line">        <span class="keyword">boolean</span> keepOnReading = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">int</span> numberOfMessagesReadSoFar = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (keepOnReading) &#123;</span><br><span class="line">            ConsumerRecords&lt;String, String&gt; records = consumer.poll(Duration.ofMillis(<span class="number">100</span>));</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (ConsumerRecord&lt;String, String&gt; record : records) &#123;</span><br><span class="line">                numberOfMessagesReadSoFar += <span class="number">1</span>;</span><br><span class="line">                logger.info(<span class="string">&quot;Key: &quot;</span> + record.key() + <span class="string">&quot;, Value: &quot;</span> + record.value());</span><br><span class="line">                logger.info(<span class="string">&quot;Partition: &quot;</span> + record.partition() + <span class="string">&quot;, Offset: &quot;</span> + record.offset());</span><br><span class="line">                <span class="keyword">if</span> (numberOfMessagesReadSoFar &gt;= numberOfMessagesToRead) &#123;</span><br><span class="line">                    keepOnReading = <span class="keyword">false</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        logger.info(<span class="string">&quot;Exiting the application&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h3><p>都是一些基本操作，深入学习后再回头总结下理论概念，实践出真知。</p>
</div></article></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/mybear.jpg" alt="bearfly1990"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">bearfly1990</p><p class="is-size-6 is-block">有熊在飞</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>HZ, China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">81</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">0</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">100</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/bearfly1990" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/bearfly1990"><i class="fab fa-github"></i></a></div></div></div><!--!--><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://hexo.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Hexo</span></span><span class="level-right"><span class="level-item tag">hexo.io</span></span></a></li><li><a class="level is-mobile" href="https://bulma.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Bulma</span></span><span class="level-right"><span class="level-item tag">bulma.io</span></span></a></li></ul></div></div></div><!--!--><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-08-11T16:00:00.000Z">2021-08-12</time></p><p class="title"><a href="/2021/08/12/2021/08/2021-08-12-box-python-sdk/">box SDK for python</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-08-07T16:00:00.000Z">2021-08-08</time></p><p class="title"><a href="/2021/08/08/2021/08/2021-08-09-kafka-learn-01/">Kafka Learn - 01</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-07-20T16:00:00.000Z">2021-07-21</time></p><p class="title"><a href="/2021/07/21/2021/07/2021-07-21-jaydebeapi/">jaydebeapi</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-07-16T16:00:00.000Z">2021-07-17</time></p><p class="title"><a href="/2021/07/17/2021/07/2021-07-17-NanHu/">NanHu</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-07-03T16:00:00.000Z">2021-07-04</time></p><p class="title"><a href="/2021/07/04/2021/07/2021-07-04-folder-tree/">Folder Tree Info DFS/BFS</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2021/08/"><span class="level-start"><span class="level-item">August 2021</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/07/"><span class="level-start"><span class="level-item">July 2021</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/03/"><span class="level-start"><span class="level-item">March 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/02/"><span class="level-start"><span class="level-item">February 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/10/"><span class="level-start"><span class="level-item">October 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/09/"><span class="level-start"><span class="level-item">September 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/06/"><span class="level-start"><span class="level-item">June 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/05/"><span class="level-start"><span class="level-item">May 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/03/"><span class="level-start"><span class="level-item">March 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/01/"><span class="level-start"><span class="level-item">January 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/12/"><span class="level-start"><span class="level-item">December 2019</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/11/"><span class="level-start"><span class="level-item">November 2019</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/10/"><span class="level-start"><span class="level-item">October 2019</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/08/"><span class="level-start"><span class="level-item">August 2019</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/06/"><span class="level-start"><span class="level-item">June 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/05/"><span class="level-start"><span class="level-item">May 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/03/"><span class="level-start"><span class="level-item">March 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/02/"><span class="level-start"><span class="level-item">February 2019</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/01/"><span class="level-start"><span class="level-item">January 2019</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/12/"><span class="level-start"><span class="level-item">December 2018</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/11/"><span class="level-start"><span class="level-item">November 2018</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/10/"><span class="level-start"><span class="level-item">October 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/09/"><span class="level-start"><span class="level-item">September 2018</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/08/"><span class="level-start"><span class="level-item">August 2018</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/07/"><span class="level-start"><span class="level-item">July 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/06/"><span class="level-start"><span class="level-item">June 2018</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/05/"><span class="level-start"><span class="level-item">May 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/04/"><span class="level-start"><span class="level-item">April 2018</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/2019/"><span class="tag">2019</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Apache/"><span class="tag">Apache</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Diary/"><span class="tag">Diary</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/E-R/"><span class="tag">E-R</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/HDFS/"><span class="tag">HDFS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Hadoop/"><span class="tag">Hadoop</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Java/"><span class="tag">Java</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Kafka/"><span class="tag">Kafka</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/PIL/"><span class="tag">PIL</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Pandas/"><span class="tag">Pandas</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Python/"><span class="tag">Python</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/RESTful/"><span class="tag">RESTful</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/RPC/"><span class="tag">RPC</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/acm/"><span class="tag">acm</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/algorithm/"><span class="tag">algorithm</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/algorithms/"><span class="tag">algorithms</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/alibaba/"><span class="tag">alibaba</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/annotation/"><span class="tag">annotation</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/apidoc/"><span class="tag">apidoc</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/big-data/"><span class="tag">big data</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/bigdata/"><span class="tag">bigdata</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/box/"><span class="tag">box</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/chart/"><span class="tag">chart</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/chartjs/"><span class="tag">chartjs</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/class/"><span class="tag">class</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/colorlog/"><span class="tag">colorlog</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/config/"><span class="tag">config</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/console/"><span class="tag">console</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/cpu/"><span class="tag">cpu</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/csv/"><span class="tag">csv</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/dairy/"><span class="tag">dairy</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/data-analysis/"><span class="tag">data analysis</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/data-structure/"><span class="tag">data structure</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/database/"><span class="tag">database</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/db/"><span class="tag">db</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/design-patterns/"><span class="tag">design patterns</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/diary/"><span class="tag">diary</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/dokuwiki/"><span class="tag">dokuwiki</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/download/"><span class="tag">download</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/email/"><span class="tag">email</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/excel/"><span class="tag">excel</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/file/"><span class="tag">file</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/flask-restful/"><span class="tag">flask-restful</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/gRPC/"><span class="tag">gRPC</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/goal/"><span class="tag">goal</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/hadoop/"><span class="tag">hadoop</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/hive/"><span class="tag">hive</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/httpd/"><span class="tag">httpd</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/imageio/"><span class="tag">imageio</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/io/"><span class="tag">io</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/java/"><span class="tag">java</span><span class="tag">9</span></a></div><div class="control"><a class="tags has-addons" href="/tags/javascript/"><span class="tag">javascript</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/jdbc/"><span class="tag">jdbc</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/json/"><span class="tag">json</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/life/"><span class="tag">life</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/linux/"><span class="tag">linux</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/lock/"><span class="tag">lock</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/log/"><span class="tag">log</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/manual/"><span class="tag">manual</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/matplotlib/"><span class="tag">matplotlib</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/memory/"><span class="tag">memory</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/monitor/"><span class="tag">monitor</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/moviepy/"><span class="tag">moviepy</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/network/"><span class="tag">network</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/node-js/"><span class="tag">node.js</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/numpy/"><span class="tag">numpy</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/openpyxl/"><span class="tag">openpyxl</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/orm/"><span class="tag">orm</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/pandas/"><span class="tag">pandas</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/performance/"><span class="tag">performance</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/php/"><span class="tag">php</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/powershell/"><span class="tag">powershell</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/private/"><span class="tag">private</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/progress-bar/"><span class="tag">progress bar</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/proxy/"><span class="tag">proxy</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/pyodbc/"><span class="tag">pyodbc</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/python/"><span class="tag">python</span><span class="tag">45</span></a></div><div class="control"><a class="tags has-addons" href="/tags/pytz/"><span class="tag">pytz</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/pywin32/"><span class="tag">pywin32</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/reflect/"><span class="tag">reflect</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/regex/"><span class="tag">regex</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sdk/"><span class="tag">sdk</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/spider/"><span class="tag">spider</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/springboot/"><span class="tag">springboot</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sql/"><span class="tag">sql</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sqlalchemy/"><span class="tag">sqlalchemy</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/swagger/"><span class="tag">swagger</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tasklist/"><span class="tag">tasklist</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/test/"><span class="tag">test</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/thread/"><span class="tag">thread</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tiktok/"><span class="tag">tiktok</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tkinter/"><span class="tag">tkinter</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/training/"><span class="tag">training</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/txt/"><span class="tag">txt</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/unicode/"><span class="tag">unicode</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/vmware/"><span class="tag">vmware</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/work/"><span class="tag">work</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/xpath/"><span class="tag">xpath</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/yaml/"><span class="tag">yaml</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%8D%9A%E5%AE%A2/"><span class="tag">博客</span><span class="tag">1</span></a></div></div></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/favicon.ico" alt="Shawn&#039;Blog Test" height="28"></a><p class="is-size-7"><span>&copy; 2021 Shawn</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>pan><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">matchPattern2</span><span class="params">(String input, String pattern)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// [&quot;hello&quot;, &quot;world&quot;, &quot;java&quot;]</span></span><br><span class="line">    String[] wordArray = input.split(<span class="string">&quot; &quot;</span>);</span><br><span class="line">    <span class="comment">// [&quot;A&quot;,&quot;B&quot;,&quot;C&quot;]</span></span><br><span class="line">    String[] patternArray = StringUtils.arrayCharToStr(pattern.toCharArray());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// if pattern and string num is not matched, no compare any more.</span></span><br><span class="line">    <span class="comment">// e.g. hello world java ！= AB</span></span><br><span class="line">    <span class="keyword">if</span> (wordArray.length != patternArray.length) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; patternArray.length; i++) &#123;</span><br><span class="line">        String patternEntry = patternArray[i];</span><br><span class="line">        String wordEntry = wordArray[i];</span><br><span class="line">        <span class="keyword">if</span> (wordEntry.startsWith(<span class="string">&quot;**&quot;</span>)) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!wordEntry.equals(patternEntry)) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (patternEntry.startsWith(<span class="string">&quot;**&quot;</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = i; j &lt; patternArray.length; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (wordArray[j].equals(wordEntry)) &#123;</span><br><span class="line">                wordArray[j] = <span class="string">&quot;**&quot;</span> + patternEntry;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (patternArray[j].equals(patternEntry)) &#123;</span><br><span class="line">                patternArray[j] = <span class="string">&quot;**&quot;</span> + patternEntry;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="测试代码"><a href="#测试代码" class="headerlink" title="测试代码"></a>测试代码</h2><p>写了简单的单元测试，主要的 case 应该都包含了。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Description</span>: Algorithms Test Class</span></span><br><span class="line"><span class="comment">* <span class="doctag">@author</span> bearfly1990</span></span><br><span class="line"><span class="comment">* <span class="doctag">@date</span> Nov 30, 2018 9:42:29 PM</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">package</span> org.bearfly.fun.javalearn.algorithms;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.Assert.assertEquals;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.bearfly.fun.javalearn.algorithms.impl.AlgorithmsImpl;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AlgorithmsTest</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testStringMatch</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        IAlgorithms as = <span class="keyword">new</span> AlgorithmsImpl();</span><br><span class="line"></span><br><span class="line">        String input = <span class="string">&quot;java hello world&quot;</span>;</span><br><span class="line">        String pattern = <span class="string">&quot;ABC&quot;</span>;</span><br><span class="line">        assertEquals(<span class="keyword">true</span>, as.matchPattern(input, pattern));</span><br><span class="line"></span><br><span class="line">        input = <span class="string">&quot;hello hello hello&quot;</span>;</span><br><span class="line">        pattern = <span class="string">&quot;AAA&quot;</span>;</span><br><span class="line">        assertEquals(<span class="keyword">true</span>, as.matchPattern(input, pattern));</span><br><span class="line"></span><br><span class="line">        input = <span class="string">&quot;hello java hello java good&quot;</span>;</span><br><span class="line">        pattern = <span class="string">&quot;ABABC&quot;</span>;</span><br><span class="line">        assertEquals(<span class="keyword">true</span>, as.matchPattern(input, pattern));</span><br><span class="line"></span><br><span class="line">        input = <span class="string">&quot;hello java hello java good&quot;</span>;</span><br><span class="line">        pattern = <span class="string">&quot;ABABD&quot;</span>;</span><br><span class="line">        assertEquals(<span class="keyword">true</span>, as.matchPattern(input, pattern));</span><br><span class="line"></span><br><span class="line">        input = <span class="string">&quot;hello java hello java good&quot;</span>;</span><br><span class="line">        pattern = <span class="string">&quot;ABABA&quot;</span>;</span><br><span class="line">        assertEquals(<span class="keyword">false</span>, as.matchPattern(input, pattern));</span><br><span class="line"></span><br><span class="line">        input = <span class="string">&quot;java hello hello&quot;</span>;</span><br><span class="line">        pattern = <span class="string">&quot;ABC&quot;</span>;</span><br><span class="line">        assertEquals(<span class="keyword">false</span>, as.matchPattern(input, pattern));</span><br><span class="line"></span><br><span class="line">        input = <span class="string">&quot;java hello hello&quot;</span>;</span><br><span class="line">        pattern = <span class="string">&quot;AB&quot;</span>;</span><br><span class="line">        assertEquals(<span class="keyword">false</span>, as.matchPattern(input, pattern));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h1><p>思路理顺了之后实现还是很简单的，但是没有一个实际操作编码的过程，只在脑子里构思还是不容易的，主要还是一时没有反应过来，或者想的太复杂的时候，哈哈哈。</p>
<p>有空可以再去撸几道 ZJU 的 Online Judge 了（捂脸）</p>
<p>代码我上传到了 github：<a target="_blank" rel="noopener" href="https://github.com/bearfly1990/PowerScript/tree/master/Java/workspace/javalearn">https://github.com/bearfly1990/PowerScript/tree/master/Java/workspace/javalearn</a></p>
<hr>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2018-11-26T16:00:00.000Z" title="2018/11/27 上午12:00:00">2018-11-27</time></span><span class="level-item">Updated&nbsp;<time dateTime="2020-09-08T15:43:26.383Z" title="2020/9/8 下午11:43:26">2020-09-08</time></span><span class="level-item"> BF </span><span class="level-item">6 minutes read (About 832 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2018/11/27/2018/11/2018-11-27-SwaggerSpringBoot/">Swagger in SpringBoot</a></h1><div class="content"><h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><p>前两天提到项目组打算用 swagger 来做为 RESTful API 的解决方案，现在已经确定下来了。</p>
<p>之前看到有文章介绍 SpringBoot 中结合 Swagger 直接生成文档的方法，今天尝试了一下，入门还是比较简单的。</p>
<h1 id="建立-Maven-工程"><a href="#建立-Maven-工程" class="headerlink" title="建立 Maven 工程"></a>建立 Maven 工程</h1><p>我们使用 Maven 管理 jar 包依赖，网上有许多的教程，就不赘述。今天在配置环境的时候，看到有一个阿里云的镜像，可以记录一下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span>&gt;</span>alimaven<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>aliyun maven<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.aliyun.com/nexus/content/groups/public/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>central<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="引入相关依赖"><a href="#引入相关依赖" class="headerlink" title="引入相关依赖"></a>引入相关依赖</h2><p>完整的配置请看<a target="_blank" rel="noopener" href="https://github.com/bearfly1990/PowerScript/blob/master/Java/Swagger/pom.xml">pom.xml</a></p>
<h3 id="SpringBoot-相关"><a href="#SpringBoot-相关" class="headerlink" title="SpringBoot 相关"></a>SpringBoot 相关</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.0.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">relativePath</span> /&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-devtools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">fork</span>&gt;</span>true<span class="tag">&lt;/<span class="name">fork</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="Swagger-相关依赖"><a href="#Swagger-相关依赖" class="headerlink" title="Swagger 相关依赖"></a>Swagger 相关依赖</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- swagger2 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger-ui<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="热启动"><a href="#热启动" class="headerlink" title="热启动"></a>热启动</h3><p>通过下面的片段来开启了热启动，代码更新后自动重启，方便很多。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-devtools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">fork</span>&gt;</span>true<span class="tag">&lt;/<span class="name">fork</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="创建-Swagger2-配置类"><a href="#创建-Swagger2-配置类" class="headerlink" title="创建 Swagger2 配置类"></a>创建 Swagger2 配置类</h1><p>在 SpringBoot 主类同级目录下新建 Swagger 的配置类如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableSwagger2</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Swagger2</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Docket <span class="title">createRestApi</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Docket(DocumentationType.SWAGGER_2)</span><br><span class="line">                .apiInfo(apiInfo())</span><br><span class="line">                .select()</span><br><span class="line">                .apis(RequestHandlerSelectors.basePackage(<span class="string">&quot;fun.bearfly&quot;</span>))</span><br><span class="line">                .paths(PathSelectors.any())</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> ApiInfo <span class="title">apiInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ApiInfoBuilder()</span><br><span class="line">                .title(<span class="string">&quot;Generate RESTful APIs with Spring Boot and Swagger2 &quot;</span>)</span><br><span class="line">                .description(<span class="string">&quot;More info please see:https://bearfly1990.github.io/&quot;</span>)</span><br><span class="line">                .termsOfServiceUrl(<span class="string">&quot;https://bearfly1990.github.io/&quot;</span>)</span><br><span class="line">                .contact(<span class="string">&quot;bearfly1990&quot;</span>)</span><br><span class="line">                .version(<span class="string">&quot;1.0&quot;</span>)</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Controller-中的注解"><a href="#Controller-中的注解" class="headerlink" title="Controller 中的注解"></a>Controller 中的注解</h1><p>接口文档的信息通过注解来写入，所以就放在 Controller 这一层。</p>
<p>下面的代码主要模拟了对单词的 CRUD 操作，每个接口都有对应的接口注释，通过@ApiOperation， @ApiImplicitParam 等注解来实现，这个我之前的文章有提到：<a href="https://bearfly1990.github.io/2018/11/25/Swagger/#%E4%BB%A3%E7%A0%81%E4%B8%AD%E7%9A%84%E4%BD%BF%E7%94%A8">Swagger#代码中的使用</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(value=&quot;/ewords&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EWordController</span> </span>&#123;</span><br><span class="line">	<span class="keyword">static</span> Map&lt;Long, EWord&gt; ewordsMap = Collections.synchronizedMap(<span class="keyword">new</span> HashMap&lt;Long, EWord&gt;());</span><br><span class="line"></span><br><span class="line">	<span class="meta">@ApiOperation(value=&quot;HelloWorld&quot;, notes=&quot;&quot;)</span></span><br><span class="line">	<span class="meta">@RequestMapping(value=&quot;helloworld&quot;, method=RequestMethod.GET)</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">sayHello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;hello, world!&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiOperation(value=&quot;GetEword&quot;, notes=&quot;&quot;)</span></span><br><span class="line">    <span class="meta">@RequestMapping(value=&#123;&quot;&quot;&#125;, method=RequestMethod.GET)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;EWord&gt; <span class="title">getEWordList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        List&lt;EWord&gt; ewords = <span class="keyword">new</span> ArrayList&lt;EWord&gt;(ewordsMap.values());</span><br><span class="line">        <span class="keyword">return</span> ewords;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiOperation(value=&quot;CreateEword&quot;, notes=&quot;Create Eword by Eword&quot;)</span></span><br><span class="line">    <span class="meta">@ApiImplicitParam(name = &quot;eword&quot;, value = &quot;user domain&quot;, required = true, dataType = &quot;EWord&quot;)</span></span><br><span class="line">    <span class="meta">@RequestMapping(value=&quot;&quot;, method=RequestMethod.POST)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">postEWord</span><span class="params">(<span class="meta">@RequestBody</span> EWord eword)</span> </span>&#123;</span><br><span class="line">    	ewordsMap.put(eword.getId(), eword);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiOperation(value=&quot;GetEwordDetails&quot;, notes=&quot;Get eword by id&quot;)</span></span><br><span class="line">    <span class="meta">@ApiImplicitParam(name = &quot;id&quot;, value = &quot;ewordID&quot;, required = true, dataType = &quot;Long&quot;)</span></span><br><span class="line">    <span class="meta">@RequestMapping(value=&quot;/&#123;id&#125;&quot;, method=RequestMethod.GET)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> EWord <span class="title">getEWord</span><span class="params">(<span class="meta">@PathVariable</span> Long id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ewordsMap.get(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiOperation(value=&quot;UpdateEwordInfo&quot;, notes=&quot;Update eword by id&quot;)</span></span><br><span class="line">    <span class="meta">@ApiImplicitParams(&#123;</span></span><br><span class="line"><span class="meta">            @ApiImplicitParam(name = &quot;id&quot;, value = &quot;ewordID&quot;, required = true, dataType = &quot;Long&quot;),</span></span><br><span class="line"><span class="meta">            @ApiImplicitParam(name = &quot;user&quot;, value = &quot;ewordDomain&quot;, required = true, dataType = &quot;EWord&quot;)</span></span><br><span class="line"><span class="meta">    &#125;)</span></span><br><span class="line">    <span class="meta">@RequestMapping(value=&quot;/&#123;id&#125;&quot;, method=RequestMethod.PUT)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">putEWord</span><span class="params">(<span class="meta">@PathVariable</span> Long id, <span class="meta">@RequestBody</span> EWord newUser)</span> </span>&#123;</span><br><span class="line">        EWord eword = ewordsMap.get(id);</span><br><span class="line">        eword.setCnWord(newUser.getCnWord());</span><br><span class="line">        eword.setEnWord(newUser.getEnWord());</span><br><span class="line">        ewordsMap.put(id, eword);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiOperation(value=&quot;DeleteEword&quot;, notes=&quot;Delete eword by id&quot;)</span></span><br><span class="line">    <span class="meta">@ApiImplicitParam(name = &quot;id&quot;, value = &quot;ewordID&quot;, required = true, dataType = &quot;Long&quot;)</span></span><br><span class="line">    <span class="meta">@RequestMapping(value=&quot;/&#123;id&#125;&quot;, method=RequestMethod.DELETE)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">deleteEWord</span><span class="params">(<span class="meta">@PathVariable</span> Long id)</span> </span>&#123;</span><br><span class="line">        ewordsMap.remove(id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="生成文档"><a href="#生成文档" class="headerlink" title="生成文档"></a>生成文档</h1><p>上面的配置与代码完成后，直接启动 SpringBoot，访问：<a target="_blank" rel="noopener" href="http://localhost:8080/swagger-ui.html">http://localhost:8080/swagger-ui.html</a> 就能查看文档了。</p>
<p><img src="/img/post/2018/11/2018-11-27-SwaggerSpringBoot.jpg" alt="swagger-ui"></p>
<p>搞定~</p>
<p>工程目录：<a target="_blank" rel="noopener" href="https://github.com/bearfly1990/PowerScript/tree/master/Java/workspace/swagger">https://github.com/bearfly1990/PowerScript/tree/master/Java/workspace/swagger</a></p>
<hr>
<p>参考：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/8033ef83a8ed">深入理解 RPC : 基于 Python 自建分布式高并发 RPC 服务</a> - 程序猿 DD</li>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/ityouknow/p/5662753.html">构建微服务：Spring boot 入门篇</a> - 微信公众号：纯洁的微笑</li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2018-11-24T16:00:00.000Z" title="2018/11/25 上午12:00:00">2018-11-25</time></span><span class="level-item">Updated&nbsp;<time dateTime="2018-11-27T16:42:54.853Z" title="2018/11/28 上午12:42:54">2018-11-28</time></span><span class="level-item"> BF </span><span class="level-item">9 minutes read (About 1280 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2018/11/25/2018/11/2018-11-22-Swagger/">Swagger</a></h1><div class="content"><h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><p>项目组最近新开发一套 RESTful API，需要对应的 API 文档，其实之前我有用 <a target="_blank" rel="noopener" href="http://apidocjs.com/">apidoc</a> 作为方案给大家看过。</p>
<p>感觉还好，也是可以直接写成注释放在代码里最后生成。但能感受到它属于轻量级的，内容相对自由，灵活度很大，但也意味着更容易犯错。</p>
<p>不过最后上面还是决定使用 <a target="_blank" rel="noopener" href="https://swagger.io/">swagger</a> 这一套东西，所以简单的看了下，功能果然成强大，显得更 professionnal 一些。</p>
<p>下面就罗列下我目前掌握的一些信息，其实学习 swagger 的过程就是学习 RESTful API 的过程。</p>
<h1 id="Swagger"><a href="#Swagger" class="headerlink" title="Swagger"></a>Swagger</h1><p>Swagger 是一个规范和完整的框架，用于生成、描述、调用和可视化 RESTful 风格的 Web 服务。总体目标是使客户端和文件系统作为服务器以同样的速度来更新 。</p>
<p>接口的方法，参数和模型紧密集成到服务器端的代码，允许 API 来始终保持同步。</p>
<p>Swagger 让部署管理和使用功能强大的 API 从未如此简单。</p>
<h1 id="Swagger-UI"><a href="#Swagger-UI" class="headerlink" title="Swagger UI"></a>Swagger UI</h1><p>我们先来看一看最后文档的样子，下面是官方的 <a target="_blank" rel="noopener" href="https://swagger.io/tools/swagger-ui/">Live Demo</a>， 大家可以感受一下。<br><img src="/img/post/2018/11/2018-11-22-Swagger-ui.gif" alt="Swagger UI"></p>
<p>Swagger UI 主要用来通过读取对应的 YAML/JSON 文件，来解析并展示 “漂亮”的 api 文档，效果还是不错的，相当于前端展示功能。</p>
<p>它的 github 地址<a target="_blank" rel="noopener" href="https://github.com/swagger-api/swagger-ui">https://github.com/swagger-api/swagger-ui</a></p>
<p>可以下载之后，在本地放在 http server 下直接使用，当然也可以二次开发，具体内容请看官方的 ReadMe。</p>
<h1 id="Swagger-Editor"><a href="#Swagger-Editor" class="headerlink" title="Swagger Editor"></a>Swagger Editor</h1><p>那么另外一个项目<a target="_blank" rel="noopener" href="https://github.com/swagger-api/swagger-editor">https://github.com/swagger-api/swagger-editor</a> 便是用来编写文档的。</p>
<p>它采用的是 YAML 语法，所以可以丰富的表达许多内容。下面是官方的<a target="_blank" rel="noopener" href="https://swagger.io/tools/swagger-editor/">Live Demo</a>，其实很多细节内容在这边就可以学习到，它的样例就已经很丰富。</p>
<p>Editor 也可以下载来到本地使用，但是需要 Node.js的支持，具体请参考官方 ReadMe。<br><img src="/img/post/2018/11/2018-11-22-Swagger-editor.jpg" alt="Swagger Editor"></p>
<h1 id="代码中的使用"><a href="#代码中的使用" class="headerlink" title="代码中的使用"></a>代码中的使用</h1><p>通过一定的配置（需要继续研究），可以通过注解的方式(主要以 java 为例)，可以生成 api 文档，甚至可以直接调试。</p>
<table>
<thead>
<tr>
<th align="center">作用范围</th>
<th align="center">API</th>
<th align="right">使用位置</th>
</tr>
</thead>
<tbody><tr>
<td align="center">对象属性</td>
<td align="center">@ApiModelProperty</td>
<td align="right">用在出入参数对象的字段上</td>
</tr>
<tr>
<td align="center">协议集描述</td>
<td align="center">@Api</td>
<td align="right">用于 controller 类上</td>
</tr>
<tr>
<td align="center">协议描述</td>
<td align="center">@ApiOperation</td>
<td align="right">用在 controller 的方法上</td>
</tr>
<tr>
<td align="center">Response 集</td>
<td align="center">@ApiResponses</td>
<td align="right">用在 controller 的方法上</td>
</tr>
<tr>
<td align="center">Response</td>
<td align="center">@ApiResponse</td>
<td align="right">用在 @ApiResponses 里边</td>
</tr>
<tr>
<td align="center">非对象参数集</td>
<td align="center">@ApiImplicitParams</td>
<td align="right">用在 controller 的方法上</td>
</tr>
<tr>
<td align="center">非对象参数描述</td>
<td align="center">@ApiImplicitParam</td>
<td align="right">用在@ApiImplicitParams 的方法里边</td>
</tr>
<tr>
<td align="center">描述返回对象的意义</td>
<td align="center">@ApiModel</td>
<td align="right">用在返回对象类上</td>
</tr>
</tbody></table>
<h2 id="Samples"><a href="#Samples" class="headerlink" title="Samples"></a>Samples</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ApiOperation(&quot;信息软删除&quot;)</span></span><br><span class="line"><span class="meta">@ApiResponses(&#123; @ApiResponse(code = CommonStatus.OK, message = &quot;操作成功&quot;),</span></span><br><span class="line"><span class="meta">        @ApiResponse(code = CommonStatus.EXCEPTION, message = &quot;服务器内部异常&quot;),</span></span><br><span class="line"><span class="meta">        @ApiResponse(code = CommonStatus.FORBIDDEN, message = &quot;权限不足&quot;) &#125;)</span></span><br><span class="line"><span class="meta">@ApiImplicitParams(&#123; @ApiImplicitParam(paramType = &quot;query&quot;, dataType = &quot;Long&quot;, name = &quot;id&quot;, value = &quot;信息id&quot;, required = true) &#125;)</span></span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;/remove.json&quot;, method = RequestMethod.GET, produces = MediaType.APPLICATION_JSON_UTF8_VALUE)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> RestfulProtocol <span class="title">remove</span><span class="params">(Long id)</span> </span>&#123;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ApiModelProperty(value = &quot;标题&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String  title;</span><br></pre></td></tr></table></figure>

<h2 id="ApiImplicitParam"><a href="#ApiImplicitParam" class="headerlink" title="@ApiImplicitParam"></a>@ApiImplicitParam</h2><table>
<thead>
<tr>
<th align="center">属性</th>
<th align="center">取值</th>
<th align="right">作用</th>
</tr>
</thead>
<tbody><tr>
<td align="center">paramType</td>
<td align="center"></td>
<td align="right">查询参数类型</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">path</td>
<td align="right">以地址的形式提交数据</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">query</td>
<td align="right">直接跟参数完成自动映射赋值</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">body</td>
<td align="right">以流的形式提交 仅支持 POST</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">header</td>
<td align="right">参数在 request headers 里边提交</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">form</td>
<td align="right">以 form 表单的形式提交 仅支持 POST</td>
</tr>
<tr>
<td align="center">dataType</td>
<td align="center"></td>
<td align="right">参数的数据类型 只作为标志说明，并没有实际验证</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">Long</td>
<td align="right"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center">String</td>
<td align="right"></td>
</tr>
<tr>
<td align="center">name</td>
<td align="center"></td>
<td align="right">接收参数名</td>
</tr>
<tr>
<td align="center">value</td>
<td align="center"></td>
<td align="right">接收参数的意义描述</td>
</tr>
<tr>
<td align="center">required</td>
<td align="center"></td>
<td align="right">参数是否必填</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">true</td>
<td align="right">必填</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">false</td>
<td align="right">非必填</td>
</tr>
<tr>
<td align="center">defaultValue</td>
<td align="center"></td>
<td align="right">默认值</td>
</tr>
</tbody></table>
<h3 id="paramType-示例"><a href="#paramType-示例" class="headerlink" title="paramType 示例"></a>paramType 示例</h3><h4 id="path"><a href="#path" class="headerlink" title="path"></a>path</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/findById1/&#123;id&#125;&quot;, method = RequestMethod.GET, produces = MediaType.APPLICATION_JSON_UTF8_VALUE)</span></span><br><span class="line"><span class="meta">@PathVariable(name = &quot;id&quot;)</span> Long id</span><br></pre></td></tr></table></figure>

<h4 id="body"><a href="#body" class="headerlink" title="body"></a>body</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ApiImplicitParams(&#123; @ApiImplicitParam(paramType = &quot;body&quot;, dataType = &quot;MessageParam&quot;, name = &quot;param&quot;, value = &quot;信息参数&quot;, required = true) &#125;)</span></span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;/findById3&quot;, method = RequestMethod.POST, produces = MediaType.APPLICATION_JSON_UTF8_VALUE, consumes = MediaType.APPLICATION_JSON_VALUE)</span></span><br><span class="line"><span class="meta">@RequestBody</span> MessageParam param</span><br></pre></td></tr></table></figure>

<p>提交的参数是这个对象的一个 json，然后会自动解析到对应的字段上去，也可以通过流的形式接收当前的请求数据，但是这个和上面的接收方式仅能使用一个（用@RequestBody 之后流就会关闭了）</p>
<h4 id="header"><a href="#header" class="headerlink" title="header"></a>header</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ApiImplicitParams(&#123; @ApiImplicitParam(paramType = &quot;header&quot;, dataType = &quot;Long&quot;, name = &quot;id&quot;, value = &quot;信息id&quot;, required = true) &#125;)</span></span><br><span class="line"></span><br><span class="line">String idstr = request.getHeader(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (StringUtils.isNumeric(idstr)) &#123;</span><br><span class="line">        id = Long.parseLong(idstr);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h4 id="Form"><a href="#Form" class="headerlink" title="Form"></a>Form</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ApiImplicitParams(&#123; @ApiImplicitParam(paramType = &quot;form&quot;, dataType = &quot;Long&quot;, name = &quot;id&quot;, value = &quot;信息id&quot;, required = true) &#125;)</span></span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;/findById5&quot;, method = RequestMethod.POST, produces = MediaType.APPLICATION_JSON_UTF8_VAL</span></span><br></pre></td></tr></table></figure>

<h2 id="SpringMVC-集成-Swagger-插件以及-Swagger-注解的简单使用"><a href="#SpringMVC-集成-Swagger-插件以及-Swagger-注解的简单使用" class="headerlink" title="SpringMVC 集成 Swagger 插件以及 Swagger 注解的简单使用"></a>SpringMVC 集成 Swagger 插件以及 Swagger 注解的简单使用</h2><p>我发现一篇不错的文章，有时间试一下。</p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/67c9b84226cd">SpringMVC 集成 Swagger 插件以及 Swagger 注解的简单使用</a></p>
<h1 id="未完待续，保持更新。"><a href="#未完待续，保持更新。" class="headerlink" title="未完待续，保持更新。"></a>未完待续，保持更新。</h1><hr>
<p>参考：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/xupeng874395012/article/details/68946676">swagger注释API详细说明</a></li>
<li><a target="_blank" rel="noopener" href="https://swagger.io/">https://swagger.io/</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2018-11-18T16:00:00.000Z" title="2018/11/19 上午12:00:00">2018-11-19</time></span><span class="level-item">Updated&nbsp;<time dateTime="2018-11-19T01:23:54.297Z" title="2018/11/19 上午9:23:54">2018-11-19</time></span><span class="level-item"> BF </span><span class="level-item">8 minutes read (About 1212 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2018/11/19/2018/11/2018-11-19-DesignPattern-Proxy/">Design Patterns(Proxy)</a></h1><div class="content"><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>早些年看《大话设计模式》的时候，用<code>Java</code>实现了书中的例子，可惜当年没有保存好，好多东西都丢了。</p>
<p>现在想着用<code>python</code>重新实现一下 ，重新学习。</p>
<p>虽然 python 没有接口的概念，但是可以用抽象类代替。</p>
<h1 id="代理模式"><a href="#代理模式" class="headerlink" title="代理模式"></a>代理模式</h1><p>代理模式是给某一个对象提供一个代理对象，并由代理对象控制对原对象的引用。通俗的来讲代理模式就是我们生活中常见的中介。</p>
<p><img src="/img/post/2018/11/2018-11-19-DesignPattern-Proxy.jpg" alt="proxy"></p>
<p><strong>为什么要用代理模式？</strong></p>
<p><strong>中介隔离作用：</strong></p>
<p>在某些情况下，一个客户类不想或者不能直接引用一个委托对象，而代理类对象可以在客户类和委托对象之间起到中介的作用，其特征是代理类和委托类实现相同的接口。</p>
<p><strong>开闭原则，增加功能：</strong></p>
<p>代理类除了是客户类和委托类的中介之外，我们还可以通过给代理类增加额外的功能来扩展委托类的功能，这样做我们只需要修改代理类而不需要再修改委托类，符合代码设计的开闭原则。</p>
<p>代理类主要负责为委托类预处理消息、过滤消息、把消息转发给委托类，以及事后对返回结果的处理等。代理类本身并不真正实现服务，而是同过调用委托类的相关方法，来提供特定的服务。</p>
<p>真正的业务功能还是由委托类来实现，但是可以在业务功能执行的前后加入一些公共的服务。例如我们想给项目加入缓存、日志这些功能，我们就可以使用代理类来完成，而没必要打开已经封装好的委托类。</p>
<p><strong>有哪几种代理模式？</strong></p>
<p>我们有多种不同的方式来实现代理。如果按照代理创建的时期来进行分类的话， 可以分为两种：<strong>静态代理</strong>、<strong>动态代理</strong>。</p>
<h1 id="静态代理"><a href="#静态代理" class="headerlink" title="静态代理"></a>静态代理</h1><p>静态代理是由程序员创建或特定工具自动生成源代码，在对其编译。</p>
<p>下面这个是以购买房子为例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> abc <span class="keyword">import</span> ABCMeta,abstractmethod</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IBuyHouseMan</span>(<span class="params">metaclass=ABCMeta</span>):</span></span><br><span class="line"><span class="meta">    @abstractmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">pay_money</span>(<span class="params">self, money</span>):</span></span><br><span class="line">        <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">        :param money:</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        &#x27;&#x27;&#x27;</span></span><br><span class="line">        <span class="keyword">raise</span> NotImplementedError</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BuyHouseManImpl</span>(<span class="params">IBuyHouseMan</span>):</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">pay_money</span>(<span class="params">self, money</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;pay money(&#123;&#125;) for house!&quot;</span>.<span class="built_in">format</span>(money))</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BuyHouseManProxy</span>(<span class="params">IBuyHouseMan</span>):</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, buy_house_man</span>):</span></span><br><span class="line">        self.buy_house_man = buy_house_man</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">pay_money</span>(<span class="params">self, money</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;prepare contract&quot;</span>)</span><br><span class="line">        self.buy_house_man.pay_money(money)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;get commission &quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span>():</span></span><br><span class="line">    buy_house_man = BuyHouseManImpl()</span><br><span class="line">    buy_house_man.pay_money(<span class="number">1000</span>)</span><br><span class="line"></span><br><span class="line">    buy_house_proxy = BuyHouseManProxy(buy_house_man)</span><br><span class="line">    buy_house_proxy.pay_money(<span class="number">1000</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    test()</span><br></pre></td></tr></table></figure>

<h1 id="动态代理"><a href="#动态代理" class="headerlink" title="动态代理"></a>动态代理</h1><p>动态代理是在程序运行时通过反射机制动态创建的，耦合性大大降低，更加灵活。</p>
<p>我对 python 的反射还不太熟悉，下面是网上的例子，感觉他写的有点麻烦和绕, 到时我重新写下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> abc <span class="keyword">import</span> ABCMeta,abstractmethod</span><br><span class="line"><span class="keyword">import</span> types</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">InvocationHandler</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, obj, func</span>):</span></span><br><span class="line">        self.obj = obj</span><br><span class="line">        self.func = func</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__call__</span>(<span class="params">self, *args, **kwargs</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;handler:&#x27;</span>, self.func, args, kwargs)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;before call the func.&#x27;</span>)</span><br><span class="line">        self.func(*args, **kwargs)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;after call the func.&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HandlerException</span>(<span class="params">Exception</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, cls</span>):</span></span><br><span class="line">        <span class="built_in">super</span>(HandlerException, self).__init__(cls,  <span class="string">&#x27;is not a hanlder class&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Proxy</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, cls, hcls</span>):</span></span><br><span class="line">        self.cls = cls</span><br><span class="line">        self.hcls = hcls</span><br><span class="line">        self.handlers = <span class="built_in">dict</span>()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__call__</span>(<span class="params">self, *args, **kwargs</span>):</span></span><br><span class="line">        self.obj = self.cls(*args, **kwargs)</span><br><span class="line">        <span class="keyword">return</span> self</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getattr__</span>(<span class="params">self, attr</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;get attr:&#x27;</span>, attr)</span><br><span class="line">        isExist = <span class="built_in">hasattr</span>(self.obj, attr)</span><br><span class="line">        res = <span class="literal">None</span></span><br><span class="line">        <span class="keyword">if</span> isExist:</span><br><span class="line">            res = <span class="built_in">getattr</span>(self.obj, attr)</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">isinstance</span>(res, types.MethodType):</span><br><span class="line">                <span class="keyword">if</span> self.handlers.get(res) <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">                    self.handlers[res] = self.hcls(self.obj, res)</span><br><span class="line">                <span class="keyword">return</span> self.handlers[res]</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">return</span> res</span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProxyFactory</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, hcls</span>):</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">issubclass</span>(hcls, InvocationHandler) <span class="keyword">or</span> hcls <span class="keyword">is</span> InvocationHandler:</span><br><span class="line">            self.hcls = hcls</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">raise</span> HandlerException(hcls)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__call__</span>(<span class="params">self, cls</span>):</span></span><br><span class="line">        <span class="keyword">return</span> Proxy(cls, self.hcls)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@ProxyFactory(<span class="params">InvocationHandler</span>)</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BuyHouseMan</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, money</span>):</span></span><br><span class="line">        self.money = money</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">pay_money</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;pay money(&#123;&#125;) for house!&quot;</span>.<span class="built_in">format</span>(self.money))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span>():</span></span><br><span class="line">    buy_house_man  = BuyHouseMan(<span class="number">1000</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">type</span>(buy_house_man))</span><br><span class="line">    buy_house_man.pay_money()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    test()</span><br></pre></td></tr></table></figure>

<p>如果使用 Java 的话，那么就很简单了，reflect类库中就有现成的<code>InvocationHandler</code>，很方便：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main.java.proxy.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.InvocationHandler;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DynamicProxyHandler</span> <span class="keyword">implements</span> <span class="title">InvocationHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Object object;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DynamicProxyHandler</span><span class="params">(<span class="keyword">final</span> Object object)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.object = object;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;before invoke&quot;</span>);</span><br><span class="line">        Object result = method.invoke(object, args);</span><br><span class="line">        System.out.println(<span class="string">&quot;after invoke&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main.java.proxy.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> main.java.proxy.BuyHouse;</span><br><span class="line"><span class="keyword">import</span> main.java.proxy.impl.BuyHouseImpl;</span><br><span class="line"><span class="keyword">import</span> main.java.proxy.impl.DynamicProxyHandler;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Proxy;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DynamicProxyTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        BuyHouse buyHouse = <span class="keyword">new</span> BuyHouseImpl();</span><br><span class="line">        BuyHouse proxyBuyHouse = (BuyHouse) Proxy.newProxyInstance(BuyHouse.class.getClassLoader(), <span class="keyword">new</span></span><br><span class="line">                Class[]&#123;BuyHouse.class&#125;, <span class="keyword">new</span> DynamicProxyHandler(buyHouse));</span><br><span class="line">        proxyBuyHouse.buyHosue();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="CGLIB代理"><a href="#CGLIB代理" class="headerlink" title="CGLIB代理"></a>CGLIB代理</h1><p>待填坑。</p>
<p><strong>参考:</strong></p>
<ul>
<li><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/daniels/p/8242592.html">设计模式—代理模式</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/water_likud/article/details/80566177">Python：动态代理机制</a></p>
</li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2018-11-16T16:00:00.000Z" title="2018/11/17 上午12:00:00">2018-11-17</time></span><span class="level-item">Updated&nbsp;<time dateTime="2018-11-17T15:08:06.484Z" title="2018/11/17 下午11:08:06">2018-11-17</time></span><span class="level-item"> BF </span><span class="level-item">30 minutes read (About 4475 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2018/11/17/2018/11/2018-11-17-JavaDevManual/">Java Developement Manual</a></h1><div class="content"><h1 id="Java-开发手册-alibaba"><a href="#Java-开发手册-alibaba" class="headerlink" title="Java 开发手册(alibaba)"></a>Java 开发手册(alibaba)</h1><p>闲来无聊，手打一份手册，当做自己在网络的备份，方便以后查看，顺便当练习打字了，哈哈哈哈，我的五笔都生疏了，嘿嘿。</p>
<h2 id="第一章-编程规约"><a href="#第一章-编程规约" class="headerlink" title="第一章 编程规约"></a>第一章 编程规约</h2><p>本章是传统意义上的代码规范，包括变量名、代码风格、控制语句、代码注释等基本的编程习惯，以及从高并发场景中提炼出来的集合处理技巧和并发多线程的注意事项。</p>
<h3 id="1-1-命名风格"><a href="#1-1-命名风格" class="headerlink" title="1.1 命名风格"></a>1.1 命名风格</h3><h4 id="【强制】"><a href="#【强制】" class="headerlink" title="【强制】"></a>【强制】</h4><ul>
<li><p>代码中的命名均不能以下画线或美元符号开始，也不能以下画线或美元符号结束。</p>
</li>
<li><p>代码中的命名严禁使用拼与英文混合的方式，更不允许直接使用中文的方式。</p>
</li>
<li><p>类名使用 UpperCamelCamel 风格， 但 DO/BO/DTO/VO/AO/PO 等情形例外。</p>
</li>
<li><p>方法名、参数名、成员变量 、局部变量都统一使用 lowerCamelCase 风格，必须遵从驼峰的形式。</p>
</li>
<li><p>常量命名全部大写，单词间用下画线隔开，力求语义表达完整清楚，不要嫌名字长。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">e.g. MAX_STOCK_COUNT &#x2F; PRIZE_NUMBER_EVERYDAY</span><br></pre></td></tr></table></figure></li>
<li><p>抽象类名使用 Abstract 或 Base 开头；异常类使用 Exception 结尾；测试类命名要以它测试的类名开始，以 Test 结尾。</p>
</li>
<li><p>类型与中括号之间无空格相连定义数组。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">e.g. int[] arrayDemo;</span><br></pre></td></tr></table></figure></li>
<li><p>POJO 类中布尔类型的变量都不要加 is 前缀，否则部分框架解析会引起序列化错误。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">e.g. Boolean isDeleted, it&#39;s method is isDeleted(), </span><br><span class="line">Error happened when RPC Framwork try to get property name deleted)</span><br></pre></td></tr></table></figure></li>
<li><p>包名统一使用小写，点分隔符之间有且仅有一个自然语义的英语单词。包名统一使用单数形式，但是类名如果有复数含义，则类名可以使用复数形式。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">e.g. com.alibaba.ai.util.MessageUtils</span><br></pre></td></tr></table></figure></li>
<li><p>杜绝完全不规范的缩写，避免词不达义。</p>
</li>
</ul>
<h4 id="【推荐】"><a href="#【推荐】" class="headerlink" title="【推荐】"></a>【推荐】</h4><ul>
<li><p>为了达到代码自解释的目标，任何自定义编程元素在命名时，使用尽量完整的单词组合来表达其意。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">e.g 在JDK中，对某个对象引用的volatile字段进行原子更新的类名为： AtomicReferenceFieldUpdater。</span><br></pre></td></tr></table></figure></li>
<li><p>如果模块、接口、类、方法使用了设计模式 ，应在命名时体现出具体模式。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public class OrderFactory;</span><br><span class="line">public class LoginProxy;</span><br><span class="line">public class ResourceObserver;</span><br></pre></td></tr></table></figure></li>
<li><p>接口类中的方法和属性不要加任何修饰符号(public 也不要加)， 保持代码的简洁性，并加上有效的 Javadoc 注释。尽量不要在接口里定义变量，如果一定要定义变量，必须是与接口方法相关的，并且是整个应用的基础常量。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">接口方法签名：void commit();</span><br><span class="line">接口基础常量：String COMPANY &#x3D; &quot;alibaba&quot;;</span><br><span class="line">c.g. public abstract void commit();</span><br><span class="line">如果JDK8中接口允许有默认实现，那么这个default方法，是对所有实现类都有价值的默认实现。</span><br></pre></td></tr></table></figure></li>
<li><p>接口和实现类的命名有两套规则： </p>
<ul>
<li>【强制】对于 Service 和 DAO 类，基于 SOA 的理念，暴露出来的服务一定是接口，内部的实现类用以 Impl 后缀与接口区别。<code>e.g. CacheServiceImpl实现CacheService接口</code> </li>
<li>【推荐】如果是形容能力的接口名称，取对应的形容词为接口名（通常是-able 的形式）。<code>e.g. AbstractTranslator 实现 Translatable</code></li>
</ul>
</li>
</ul>
<h4 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h4><ul>
<li><p>枚举类名建议带上 Enum 后缀，枚举成员名称需要全大写， 单词间用下画线隔开。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">枚举其实就是特殊的常量类，且构造方法被默认强制为私有。</span><br><span class="line">e.g.枚举名字为ProcessStatusEnum的成员名称：SUCCESS &#x2F; UNKNOWN_REASON</span><br></pre></td></tr></table></figure></li>
<li><p>各层命名规约：</p>
<ul>
<li>Service/DAO 层方法命名规约如下：<ul>
<li>获取单个对象的方法用 get 作为前缀。</li>
<li>获取多个对象的方法用 list 作为前缀。</li>
<li>获取统计值的方法用 count 作为前缀。</li>
<li>插入的方法用 sava / insert 作为前缀。</li>
<li>删除的方法用 remove / delete 作为前缀。</li>
<li>修改的方法用 update 作为前缀</li>
</ul>
</li>
<li>领域模型命名规约如下:<ul>
<li>数据对象： xxxDO, xxx 为数据表名。</li>
<li>数据传输对象： xxxDTO, xxx 为业务领域相关的名称。</li>
<li>展示对象： xxxVO, xxx 一般为网页名称。</li>
<li><code>POJO</code> 是 DO/DTO/BO/VO 的统称，禁止命名成 xxx<code>POJO</code>。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="1-2-常量定义"><a href="#1-2-常量定义" class="headerlink" title="1.2 常量定义"></a>1.2 常量定义</h3><h4 id="强制"><a href="#强制" class="headerlink" title="强制"></a>强制</h4><ul>
<li>不允许任何魔法值（即未经预先定义的常量）直接出现在代码中。</li>
<li>long 或者 Long 初始赋值时，使用大写的<code>L</code>，不能是小写的<code>l</code>。小写的<code>l</code>容易跟数字<code>1</code>混淆，造成误解。</li>
</ul>
<h4 id="推荐"><a href="#推荐" class="headerlink" title="推荐"></a>推荐</h4><ul>
<li>不要使用一个常量类维护所有常量，要按常量功能进行归类，分开维护。</li>
<li>常量的复用层次有 5 层：跨应用共享常量、应用内共享常量、子工程内共享常量、包内共享常量、类内共享常量。 - 跨应用共享常量：放置在二方库中，通常是在 client.jar 中的 constant 目录下。 - 应用内共享常量：旋转在一方库中，通常是在子模块中的 constant 目录下。 - 子工程内部共享常量：即在当前子工程的 constant 目录下。 - 包内共享常量：即在当前包下单独的 constant 目录下。 - 类内共享常量：直接在类内部以<code>private static final</code>的方式定义。</li>
<li>如果变量值仅在一个范围内变化，则用 enum 类型来定义。如果存在名称之外的延伸属性，则使用 enum 类型，下面正例的数字就是延伸信息，表示一年中的第几个季节。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public enum SeasonEnum &#123;</span><br><span class="line">    SPRINT(1), SUMMER(2), AUTUMN(3), WINTER(4);</span><br><span class="line">    private int seq;</span><br><span class="line">    SeasonEnum(int seq)&#123;</span><br><span class="line">        this.seq &#x3D; seq;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="1-3-代码格式"><a href="#1-3-代码格式" class="headerlink" title="1.3 代码格式"></a>1.3 代码格式</h3><h4 id="强制-1"><a href="#强制-1" class="headerlink" title="强制"></a>强制</h4><ul>
<li><p>大括号的使用约定。如果大括号内为空，则简洁地写成{}即可，也不需要换行；如果是非空代码，则： </p>
<ul>
<li>左大括号前不换行。 </li>
<li>左大括号后换行。 </li>
<li>右大括号前换行。 </li>
<li>右大括号后还有 else 等代码刚不换行；</li>
</ul>
</li>
<li><p>表示终止的右大括号必须换行。</p>
</li>
<li><p>左小括号和字符之间不出现空格；同样，右小括号和字符之间也不出现空格。</p>
</li>
<li><p>if / for / while / switch / do 等保留字与括号之间都必须加上空格。</p>
</li>
<li><p>任何二目、三目运算符的左右两边都需要加一个空格。采用 4 个空格缩进，禁止使用 Tab 控制符。</p>
</li>
<li><p>注释的双斜线与注释内容之间有且仅有一个空格。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args)&#123;</span><br><span class="line">    &#x2F;&#x2F; 缩进4个空格</span><br><span class="line">    String say &#x3D; &quot;hello&quot;;</span><br><span class="line">    &#x2F;&#x2F; 运算符的左右必须有1个空格</span><br><span class="line">    int flag &#x3D; 0;</span><br><span class="line">    &#x2F;&#x2F; 关键字 if 与括号之间必须有 1 个空格，</span><br><span class="line">    &#x2F;&#x2F; 括号内的 f 与左括号、0 与右括号之间不需要空格</span><br><span class="line">    if (flag &#x3D;&#x3D; 0) &#123;</span><br><span class="line">        System.out.println(say);</span><br><span class="line">    &#125;</span><br><span class="line">    &#x2F;&#x2F; 左大括号前加空格且不换行；左大括号后换行</span><br><span class="line">    if (flag &#x3D;&#x3D; 1) ｛</span><br><span class="line">        System.out.println(&quot;world&quot;);</span><br><span class="line">    &#x2F;&#x2F; 右大括号前换行，右大括号后有else，不用换行</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        System.out.println(&quot;ok&quot;);</span><br><span class="line">    &#x2F;&#x2F; 在右大括号后直接结束，则必须换行</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>单行字符数不超过 120 个，超出则需要换行，换行是遵循如下原则： </p>
<ul>
<li>第二行相对第一行缩进 4 个空格，从第三行开始，不再持续缩进，参考示例。 </li>
<li>运算符与下文一起换行。 </li>
<li>方法调用的点符号与下方一起换行。 </li>
<li>方法调用中的多个参数需要换行时，在逗号后进行。 </li>
<li>在括号前不要换行。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">StringBuffer sb &#x3D; new StringBuffer();</span><br><span class="line">sb.append(&quot;you &quot;).append(&quot;are &quot;)...</span><br><span class="line">    .append(&quot;so &quot;)...</span><br><span class="line">    .append(&quot;kind!&quot;);</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>方法参数在定义和传入时，多个参数逗号后面必须加空格。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">method(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;);</span><br></pre></td></tr></table></figure></li>
<li><p>IDE 的 text file encoding 设置为 UTF-8；IDE 中文件的换行符使用 UNIX 格式， 不要使用 Windows 格式。</p>
</li>
</ul>
<h4 id="推荐-1"><a href="#推荐-1" class="headerlink" title="推荐"></a>推荐</h4><ul>
<li>没有必要增加若干空格来使某一行的字符与上一行对应位置的字符对齐。</li>
<li>不同逻辑、不同语义、不同业务的代码之间插入一个空行分隔开来，以提升可读性。（没必要插入多个空行来隔开。）</li>
</ul>
<h3 id="OOP-规约"><a href="#OOP-规约" class="headerlink" title="OOP 规约"></a>OOP 规约</h3><h4 id="强制-2"><a href="#强制-2" class="headerlink" title="强制"></a>强制</h4><ul>
<li><p>避免通过一个类的对象引用访问此类的静态变量或静态方法，造成无谓增加编译器解析成本，直接用类名来访问即可。</p>
</li>
<li><p>所以的覆写方法，必须加<code>@Override</code>注解</p>
</li>
<li><p>相同参数类型，相同业务含义，才可以使用 Java 的可变参数，避免使用 Object。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">可变参数必须放置在参数列表的最后（建议工程师们尽量不用可变参数编程）。</span><br><span class="line">public User listUsers(String type, Long... ids)&#123;...&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>对外部正在调用或者二方库依赖的接口，不允许修改方法接口，以避免对接口调用方产生影响。若接口过时，必须加 <code>@Deprecated</code>注解，并清晰地说明采用的新接口或者新服务是什么。</p>
</li>
<li><p>不能使用过时的类或方法。</p>
</li>
<li><p>Object 的 equals 方法容易抛空指针，应使用常量或者确定有值的对象来调用 equals。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">e.g. &quot;test&quot;.equals(object)</span><br><span class="line">c.g. object.equest(&quot;test&quot;);</span><br></pre></td></tr></table></figure></li>
<li><p>所有相同类型的包装类对象之间值的比较，全部使用 equals 方法。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">对于 Integer var &#x3D; ? 在 - 128~127范围内的赋值， </span><br><span class="line">Integer 对象是在IntegerCache.cache中产生 的。</span><br><span class="line">会复用已有对象， 这个区间内的Integer值可以直接使用 &#x3D;&#x3D; 进行判断， </span><br><span class="line">但是这个区间外的所有数据， 都会在堆上产生，</span><br><span class="line">并不会利用已有对象。这是个大坑，推荐使用equals方法进行判断。</span><br></pre></td></tr></table></figure></li>
<li><p>关于基本数据类型与包装数据类型的使用标准如下：</p>
<ul>
<li>【强制】所有的<code>POJO</code>类属性必须使用包装数据类型。</li>
<li>【强制】RPC 方法的返回值和参数必须使用包装数据类型。</li>
<li>【推荐】所有的局部变量使用基本数据类型。</li>
</ul>
</li>
<li><p>在定义 DO/DTO/VO 等 <code>POJO</code>类时，不要设定任何属性默认值。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">c.g. &#96;POJO&#96;类的gmtCreate默认值为 new Date();</span><br><span class="line">但是这个属性在数据提取时并没有置入具体值，</span><br><span class="line">在更新其它字段时又附带更新了此字段，导致创建时间被修改成当前时间。</span><br></pre></td></tr></table></figure></li>
<li><p>当序列化类新增属性时，请不要修改<code>serialVersionUID</code>字段，以避免反序列失败；如果完全不兼容升级， 避免反序列化混乱，那么请修改<code>serialVersionUID</code>值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">注意&#96;serialVersionUID&#96;不一致会抛出序列化运行时异常。</span><br></pre></td></tr></table></figure></li>
<li><p>构造方法里禁止加入任何业务逻辑，如果有初始化逻辑，请放在 init 方法中。</p>
</li>
<li><p><code>POJO</code>类必须写 <code>toString</code>方法。在使用 IDE 中的工具 <code>source&gt; generate toString</code>时， 如果继承了另一个<code>POJO</code>类，注意在前面加一下 super.toString。</p>
</li>
</ul>
<h4 id="推荐-2"><a href="#推荐-2" class="headerlink" title="推荐"></a>推荐</h4><ul>
<li>当使用索引访问用 String 的 split 方法等到的数组时，需在最后一个分隔符后面做有无内容的检查，否则会有抛 <code>IndexOutofBoundsException</code>的风险。</li>
<li>当一个类有多个构造方法，或者多个同名方法时，这些方法应该按顺序放置在一起，便于阅读。</li>
<li>类内方法定义的顺序是： 公有方法或保护方法＞私有方法＞ getter / setter 方法。</li>
<li>在 setter 方法中， 参数名称与类成员变量名称一致，this.成员名 = 参数名。在 getter / setter 方法中，不要增加业务逻辑， 否则会增加排查问题的难度。</li>
<li>在循环体内，字符串的连接方式使用<code>StringBuilder</code>的<code>append</code>方法进行扩展。</li>
<li>final 可以声明类、成员变量、方法及本地变量，下列情况使用 final 关键字： - 不允许被继承的类，如：<code>String</code>类。 - 不允许修改引用的域对象， 如：<code>POJO</code>类的域变量。 - 不允许被重写的方法，如： <code>POJO</code>类的 setter 方法。 - 不允许运行过程中重新赋值的局部变量。 - 避免上下文重复使用一个变量，使用 final 描述可以强制重新定义一个新变量，方便更好地进行重构</li>
<li>慎用 Object 的 clone 方法来拷贝对象。</li>
<li>类成员与方法访问控制从严： - 如果不外部直接通过 new 来创建对象，那么构造方法必须限制为<code>private</code>。 - 工具类不允许有 public 或 default 构造方法。 - 类非<code>static</code>成员变量并且与子类共享，必须限制为<code>protected</code>。 - 类非<code>static</code>成员变量并且仅在本类使用，必须限制为<code>private</code>。 - 类<code>static</code>成员变量如果公在本类使用，必须限制为<code>private</code>。 - 若是<code>static</code> 成员变量，必须考虑是否为<code>final</code>。 - 类成员方法只供类内部调用，必须限制为<code>private</code>。 - 类成员方法只对继承类公开，限制为<code>protected</code>.</li>
</ul>
<h3 id="1-5-集合处理"><a href="#1-5-集合处理" class="headerlink" title="1.5 集合处理"></a>1.5 集合处理</h3><h4 id="强制-3"><a href="#强制-3" class="headerlink" title="强制"></a>强制</h4><ul>
<li><p>关于<code>hashCode</code> 和<code>equals</code>的处理，遵循如下规则： </p>
</li>
<li><p>只要重写 equals, 就必须重写 hashCode。 </p>
</li>
<li><p>因为 <code>Set</code>存储的是不重复的对象，依据 hashCode 和 equals 进行判断，所以 Set 存储的对象必须重写这两种方法。 </p>
</li>
<li><p>如果自定义对象作为<code>Map</code>的键，那么必须重写 hashCode 和 equals。</p>
</li>
<li><p><code>ArrayList</code>的<code>subList</code>结果不可强转成<code>ArrayList</code>, 否则会抛出<code>ClassCastExcpetion</code>异常，即</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java.util.RandomAccessSubList cannot be cast to java.util.ArrayList&#96;</span><br></pre></td></tr></table></figure></li>
<li><p>在<code>subList</code>场景中，高度注意对原集合元素个数的修改，会导致子列表的遍历、增加、删除均产生<code>ConcurrentModificationException</code>异常。</p>
</li>
<li><p>使用集合转数组的方法，必须使用集合的<code>toArray(T[] array)</code>，传入的是类型完全一样的数据，大小就是 list.size()。</p>
</li>
<li><p>在使用工具类<code>Arrays.asList()</code>把数组转换成集合时，不能使用其修改集合相关的方法，它的<code>add</code>/<code>remove</code>/<code>clear</code>方法会抛出<code>UnsupportedOperationException</code>异常。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">asList 的返回对象是一个Arrays内部类，并没有实现集合的修改方法。</span><br><span class="line">Arrays.asList体现的是适配器模式，只是转换接口，后台的数据仍是数组。</span><br><span class="line">String[] strs &#x3D; new String[] &#123;&quot;you&quot;, &quot;are&quot;&#125;;</span><br><span class="line">List list &#x3D; Arrays.asList(strs);</span><br><span class="line">scenario 1: list.add(&quot;chenxiong&quot;) 运行时异常。</span><br><span class="line">scenario 2: 如果 str[0] &#x3D; &quot;xiche&quot;; 那么list.get(0)也会随之修改。</span><br></pre></td></tr></table></figure></li>
<li><p>泛型通配符<code>&lt;? extends T&gt;</code>用来接收返回的数据，此写法的泛型集合不能使用 add 方法，而<code>&lt;? super T&gt;</code>不能使用 get 方法， 因为 其作为接口调用赋值时易出错。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">扩展说一下 PECS(Producer Extends Consumer Super)原则：</span><br><span class="line">    第一，频繁往外读取内容的，适合用&lt;? extends T&gt;;</span><br><span class="line">    第二，经常往里插入的，适合用&lt;? super T&gt;。</span><br></pre></td></tr></table></figure></li>
<li><p>不要在<code>foreach</code>循环里进行元素的<code>remove</code>/<code>add</code>操作。remove 元素请用 <code>Iterator</code>方式，如果并发操作，需要对 Iterator 对象加锁。</p>
</li>
<li><p>在 JDK7 及以上版本中， <code>Comparator</code>要满足如下三个条件，不然<code>Arrays.sort</code>, <code>Collections.sort</code>会报<code>IllegalArgumentException</code>异常。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">三个条件如下：</span><br><span class="line">    1) x, y 的比较结果和y, x的比较结果相反。</span><br><span class="line">    2) x&gt;y, y&gt;z, 则 x&gt;z。</span><br><span class="line">    3) x&#x3D;y, 则x, z 比较结果和y, z比较结果相同</span><br><span class="line">c.g. 下例中没有处理相等的情况，交换两个对象判断结果并不互反，不符合第一个条件，在实际使用中可能会出现异常。</span><br><span class="line">    new Comparator&lt;Student&gt;()&#123;</span><br><span class="line">        @Override</span><br><span class="line">        public int compare(Student o1, Student o2)&#123;</span><br><span class="line">            return 01.getId() &gt; o2.getId() ? 1:-1;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="推荐-3"><a href="#推荐-3" class="headerlink" title="推荐"></a>推荐</h4><ul>
<li><p>在集合初始化时，指定集合初始值大小。</p>
</li>
<li><p>使用<code>entrySet</code>遍历<code>Map</code>类集合 K/V， 而不是用 keySet 方式遍历。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">keySet 其实遍历了2次，一次是转为Iterator对象，</span><br><span class="line">另一次是从hashMap中取出key反对应的value。</span><br><span class="line">如果是JDK8，使用Map.foreach方法。</span><br></pre></td></tr></table></figure></li>
<li><p>高度注意<code>Map</code>类集合 K/V 能不能存储 null 值的情况</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>集合类</th>
<th>Key</th>
<th>Value</th>
<th>Super</th>
<th>Comment</th>
</tr>
</thead>
<tbody><tr>
<td>Hashtable</td>
<td>no null</td>
<td>no null</td>
<td>Dictionary</td>
<td>Thread Safe</td>
</tr>
<tr>
<td>ConcurrentHashMap</td>
<td>no null</td>
<td>no null</td>
<td>AbstractMap</td>
<td>锁分段技术 (JDK8:CAS)</td>
</tr>
<tr>
<td>TreeMap</td>
<td>no null</td>
<td>null</td>
<td>AbstractMap</td>
<td>Thread Unsafe</td>
</tr>
<tr>
<td>HashMap</td>
<td>null</td>
<td>null</td>
<td>AbstractMap</td>
<td>Thread Unsafe</td>
</tr>
</tbody></table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">由于HashMap的干扰，很多人认为ConcurrentHashMap是可以置入null值的，而事实上，存储null值会抛出NPE异常</span><br></pre></td></tr></table></figure>

<h4 id="参考-1"><a href="#参考-1" class="headerlink" title="参考"></a>参考</h4><ul>
<li><p>合理利用集合的有序性(sort)和稳定性(order)，避免集合的无序性(unsort)和不稳定性(unorder)带来的负面影响。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">有序性批遍历的结果是按某种比较规则依次排列的。</span><br><span class="line">稳定性指的是集合每次遍历的元素次序是一定的。如：</span><br><span class="line">ArrayList 是 order&#x2F;unsort;</span><br><span class="line">HashMap 是unorder&#x2F;unsort;</span><br><span class="line">TreeSet 是order&#x2F;sort.</span><br></pre></td></tr></table></figure></li>
<li><p>利用 Set 元素唯一的特性，可以快速对一个集合进行去重操作，避免使用 List 的 contains 方法进行遍历、对比、去重操作。</p>
</li>
</ul>
<p>未完待续…└(^o^)┘</p>
</div></article></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/mybear.jpg" alt="bearfly1990"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">bearfly1990</p><p class="is-size-6 is-block">有熊在飞</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>HZ, China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">81</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">0</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">100</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/bearfly1990" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/bearfly1990"><i class="fab fa-github"></i></a></div></div></div><!--!--><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://hexo.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Hexo</span></span><span class="level-right"><span class="level-item tag">hexo.io</span></span></a></li><li><a class="level is-mobile" href="https://bulma.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Bulma</span></span><span class="level-right"><span class="level-item tag">bulma.io</span></span></a></li></ul></div></div></div><!--!--><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-08-11T16:00:00.000Z">2021-08-12</time></p><p class="title"><a href="/2021/08/12/2021/08/2021-08-12-box-python-sdk/">box SDK for python</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-08-07T16:00:00.000Z">2021-08-08</time></p><p class="title"><a href="/2021/08/08/2021/08/2021-08-09-kafka-learn-01/">Kafka Learn - 01</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-07-20T16:00:00.000Z">2021-07-21</time></p><p class="title"><a href="/2021/07/21/2021/07/2021-07-21-jaydebeapi/">jaydebeapi</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-07-16T16:00:00.000Z">2021-07-17</time></p><p class="title"><a href="/2021/07/17/2021/07/2021-07-17-NanHu/">NanHu</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-07-03T16:00:00.000Z">2021-07-04</time></p><p class="title"><a href="/2021/07/04/2021/07/2021-07-04-folder-tree/">Folder Tree Info DFS/BFS</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2021/08/"><span class="level-start"><span class="level-item">August 2021</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/07/"><span class="level-start"><span class="level-item">July 2021</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/03/"><span class="level-start"><span class="level-item">March 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/02/"><span class="level-start"><span class="level-item">February 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/10/"><span class="level-start"><span class="level-item">October 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/09/"><span class="level-start"><span class="level-item">September 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/06/"><span class="level-start"><span class="level-item">June 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/05/"><span class="level-start"><span class="level-item">May 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/03/"><span class="level-start"><span class="level-item">March 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/01/"><span class="level-start"><span class="level-item">January 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/12/"><span class="level-start"><span class="level-item">December 2019</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/11/"><span class="level-start"><span class="level-item">November 2019</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/10/"><span class="level-start"><span class="level-item">October 2019</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/08/"><span class="level-start"><span class="level-item">August 2019</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/06/"><span class="level-start"><span class="level-item">June 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/05/"><span class="level-start"><span class="level-item">May 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/03/"><span class="level-start"><span class="level-item">March 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/02/"><span class="level-start"><span class="level-item">February 2019</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/01/"><span class="level-start"><span class="level-item">January 2019</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/12/"><span class="level-start"><span class="level-item">December 2018</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/11/"><span class="level-start"><span class="level-item">November 2018</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/10/"><span class="level-start"><span class="level-item">October 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/09/"><span class="level-start"><span class="level-item">September 2018</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/08/"><span class="level-start"><span class="level-item">August 2018</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/07/"><span class="level-start"><span class="level-item">July 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/06/"><span class="level-start"><span class="level-item">June 2018</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/05/"><span class="level-start"><span class="level-item">May 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/04/"><span class="level-start"><span class="level-item">April 2018</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/2019/"><span class="tag">2019</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Apache/"><span class="tag">Apache</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Diary/"><span class="tag">Diary</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/E-R/"><span class="tag">E-R</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/HDFS/"><span class="tag">HDFS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Hadoop/"><span class="tag">Hadoop</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Java/"><span class="tag">Java</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Kafka/"><span class="tag">Kafka</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/PIL/"><span class="tag">PIL</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Pandas/"><span class="tag">Pandas</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Python/"><span class="tag">Python</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/RESTful/"><span class="tag">RESTful</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/RPC/"><span class="tag">RPC</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/acm/"><span class="tag">acm</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/algorithm/"><span class="tag">algorithm</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/algorithms/"><span class="tag">algorithms</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/alibaba/"><span class="tag">alibaba</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/annotation/"><span class="tag">annotation</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/apidoc/"><span class="tag">apidoc</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/big-data/"><span class="tag">big data</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/bigdata/"><span class="tag">bigdata</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/box/"><span class="tag">box</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/chart/"><span class="tag">chart</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/chartjs/"><span class="tag">chartjs</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/class/"><span class="tag">class</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/colorlog/"><span class="tag">colorlog</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/config/"><span class="tag">config</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/console/"><span class="tag">console</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/cpu/"><span class="tag">cpu</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/csv/"><span class="tag">csv</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/dairy/"><span class="tag">dairy</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/data-analysis/"><span class="tag">data analysis</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/data-structure/"><span class="tag">data structure</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/database/"><span class="tag">database</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/db/"><span class="tag">db</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/design-patterns/"><span class="tag">design patterns</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/diary/"><span class="tag">diary</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/dokuwiki/"><span class="tag">dokuwiki</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/download/"><span class="tag">download</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/email/"><span class="tag">email</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/excel/"><span class="tag">excel</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/file/"><span class="tag">file</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/flask-restful/"><span class="tag">flask-restful</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/gRPC/"><span class="tag">gRPC</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/goal/"><span class="tag">goal</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/hadoop/"><span class="tag">hadoop</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/hive/"><span class="tag">hive</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/httpd/"><span class="tag">httpd</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/imageio/"><span class="tag">imageio</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/io/"><span class="tag">io</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/java/"><span class="tag">java</span><span class="tag">9</span></a></div><div class="control"><a class="tags has-addons" href="/tags/javascript/"><span class="tag">javascript</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/jdbc/"><span class="tag">jdbc</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/json/"><span class="tag">json</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/life/"><span class="tag">life</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/linux/"><span class="tag">linux</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/lock/"><span class="tag">lock</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/log/"><span class="tag">log</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/manual/"><span class="tag">manual</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/matplotlib/"><span class="tag">matplotlib</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/memory/"><span class="tag">memory</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/monitor/"><span class="tag">monitor</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/moviepy/"><span class="tag">moviepy</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/network/"><span class="tag">network</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/node-js/"><span class="tag">node.js</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/numpy/"><span class="tag">numpy</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/openpyxl/"><span class="tag">openpyxl</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/orm/"><span class="tag">orm</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/pandas/"><span class="tag">pandas</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/performance/"><span class="tag">performance</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/php/"><span class="tag">php</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/powershell/"><span class="tag">powershell</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/private/"><span class="tag">private</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/progress-bar/"><span class="tag">progress bar</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/proxy/"><span class="tag">proxy</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/pyodbc/"><span class="tag">pyodbc</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/python/"><span class="tag">python</span><span class="tag">45</span></a></div><div class="control"><a class="tags has-addons" href="/tags/pytz/"><span class="tag">pytz</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/pywin32/"><span class="tag">pywin32</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/reflect/"><span class="tag">reflect</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/regex/"><span class="tag">regex</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sdk/"><span class="tag">sdk</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/spider/"><span class="tag">spider</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/springboot/"><span class="tag">springboot</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sql/"><span class="tag">sql</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sqlalchemy/"><span class="tag">sqlalchemy</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/swagger/"><span class="tag">swagger</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tasklist/"><span class="tag">tasklist</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/test/"><span class="tag">test</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/thread/"><span class="tag">thread</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tiktok/"><span class="tag">tiktok</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tkinter/"><span class="tag">tkinter</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/training/"><span class="tag">training</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/txt/"><span class="tag">txt</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/unicode/"><span class="tag">unicode</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/vmware/"><span class="tag">vmware</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/work/"><span class="tag">work</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/xpath/"><span class="tag">xpath</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/yaml/"><span class="tag">yaml</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%8D%9A%E5%AE%A2/"><span class="tag">博客</span><span class="tag">1</span></a></div></div></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/favicon.ico" alt="Shawn&#039;Blog Test" height="28"></a><p class="is-size-7"><span>&copy; 2021 Shawn</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>