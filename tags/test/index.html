<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Tag: test - BF Blog</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="BF Blog"><meta name="msapplication-TileImage" content="/img/favicon.ico"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="BF Blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta property="og:type" content="blog"><meta property="og:title" content="BF Blog"><meta property="og:url" content="https://bearfly1990.github.io/"><meta property="og:site_name" content="BF Blog"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://bearfly1990.github.io/img/og_image.png"><meta property="article:author" content="bearfly1990"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://bearfly1990.github.io"},"headline":"BF Blog","image":["https://bearfly1990.github.io/img/og_image.png"],"author":{"@type":"Person","name":"bearfly1990"},"publisher":{"@type":"Organization","name":"BF Blog","logo":{"@type":"ImageObject","url":"https://bearfly1990.github.io/img/favicon.ico"}},"description":""}</script><link rel="icon" href="/img/favicon.ico"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.4.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/favicon.ico" alt="BF Blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/bearfly1990"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><div class="card-content"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/tags">Tags</a></li><li class="is-active"><a href="#" aria-current="page">test</a></li></ul></nav></div></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2018-11-20T16:00:00.000Z" title="2018/11/21 上午12:00:00">2018-11-21</time></span><span class="level-item">Updated&nbsp;<time dateTime="2020-09-08T15:43:26.380Z" title="2020/9/8 下午11:43:26">2020-09-08</time></span><span class="level-item"> BF </span><span class="level-item">15 minutes read (About 2250 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2018/11/21/2018/11/2018-11-21-WorkDiary-01/">Work Diary (01)</a></h1><div class="content"><h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><p>昨天有一个重要的测试任务，感觉可以做的更好，有一些点可以稍微总结分析一下，作为参考。</p>
<h1 id="主要任务"><a href="#主要任务" class="headerlink" title="主要任务"></a>主要任务</h1><p>由于客户遇到了相对严重的问题（在极端情况下，客户及本地无法重现），这次需要修复（根据分析 Log 与代码，得到修复方案），并根据客户需求增加了 log 的输出。</p>
<p>可测版本在昨天中午准备就绪，大约 1 点钟左右开始正式测试。</p>
<p>主要测试点为：</p>
<ul>
<li>冒烟及回归测试，保证新的版本没有影响原来的功能。（包括将一些参数设长，如 timeout 的时间，保证没有意外错误）</li>
<li>通过特殊代码，主动触发 bug，检测能否 catch 到，保证客户方面再出现这方面的情况，不会再出来重大错误。</li>
<li>通过设置特殊参数，使系统容易触发异常，并测试在参数正常情况下，重置服务后能否修复并继续执行任务。</li>
<li>etc…</li>
<li><strong>测试新增的 Log 功能</strong></li>
<li><strong>测试新的改动尤其是 Log 功能对性能的影响</strong></li>
</ul>
<h1 id="测试过程回顾与分析"><a href="#测试过程回顾与分析" class="headerlink" title="测试过程回顾与分析"></a>测试过程回顾与分析</h1><p>首先第一点，自己没做好的是没有制定详细的测试计划。 虽然在小本本上有简单罗列测试要点，但没有完整的 Test Cases 列表，导致后续测试工作“无法可依”，尤其是在遇到问题的情况下，容易思路混淆。</p>
<p>至少提前一天已经知道大概的测试内容，但还是小看了相关测试的复杂度与可能遇到的问题。</p>
<p><strong>至下午 5 点</strong>左右，除 Log 相关功能外，其它测试点基本完成。</p>
<h2 id="出不来的-Log"><a href="#出不来的-Log" class="headerlink" title="出不来的 Log"></a>出不来的 Log</h2><p>当时把 Log 功能放到最后，是因为与开发人员沟通过，觉得功能实现简单，相对容易测试，所以认为优先级最低（结果证明出问题的就是这边，尴尬）。</p>
<p>开始测试 Log 功能之后，便一直发现不能得到预期的结果，开始怀疑功能有问题，开始与开发人员一同查看。</p>
<p>这边就涉及到一个问题，就是开发人员一直认为是配置与运行使用的问题，所以一直在尝试重启，配置，运行的过程，所以耗费了不少时间。</p>
<p>主要是我本身对这个功能模块不是很熟悉，所以只能不断根据开发人员的建议配置与重试，但仍然无法成功，此时已将近 <strong>7 点</strong>左右。</p>
<blockquote>
<p>这次的增加的 Log 功能是基于原先已有的模块，增加了输出的内容，原计划是在 Debug 级别配置。</p>
</blockquote>
<p>最后，向原先熟悉相关模块的开发人员寻求帮忙与确认后，找到了问题的症结，Debug 级别只有在 Debug 版本能会输出想到的内容，在 Release 版本是不会输出的，这属于 C++的坑。</p>
<h2 id="消失的进程"><a href="#消失的进程" class="headerlink" title="消失的进程"></a>消失的进程</h2><p>在明确问题后，开发人员改过代码，special build 了一个版本给我测试，能够看到预期的 Log 内容, 本来还是很开心的。</p>
<p>但是当这个问题解决后，我们的目光又聚集到另外一个问题: xxxService 的进程数目不对，并一直在创建与销毁。</p>
<blockquote>
<p>在我们在系统中，需要配置 xxxService 的数量，当服务整个起来之后，可以在 task manager 那边看到相应数目的进程。<br>这些进程会提供一定的服务，并且上文提到的 Log 便是它们来输出的。</p>
</blockquote>
<p>当时的现象是：</p>
<ul>
<li>Log 能够输出，但是文件数量一直在增加(正常情况是文件数量应与进程数一致，并在短期内不会有新建与销毁)</li>
<li>在任务管理器可以看出，设置了 15 个数，但实际上只有 3 个，并且偶尔能看到新增几个新的，但立马消失。</li>
<li>不管 Log 打开还是关闭，都有同样的问题。</li>
<li>在其它相关联的服务 log 中，有大量的与 xxxService Time Out 的 error（侧面证明了一直在销毁与新建）</li>
<li>不影响正常的业务处理</li>
<li>etc…</li>
</ul>
<p>其实在下午的测试过程中，就有感觉一些不对劲，但当时关注点不在这上面，而且一直是在做破坏性测试，所以一直有一些 error 都没太在意。<br>尤其是这个问题不影响正常的业务处理。</p>
<p>当所有功能没有问题之后，目光就集中在这上边，开始意识到问题的严重性，带着这样的问题，产品肯定是不能发布的。</p>
<p>所以一方面，开发人员在查找原因，而我开始对比测试。</p>
<h2 id="原因到底是什么"><a href="#原因到底是什么" class="headerlink" title="原因到底是什么"></a>原因到底是什么</h2><p>开发人员的反馈是最新加的功能不会有大的问题，逻辑很简单，而最近两天基本上只有这次的改动。很可能是别的问题，所以一直在查找。</p>
<p>而我这边，首先确认了下上一个 release 版本是没有这样的问题的，然后也尝试把 log disable 掉，没有输出，但在新版本还是有这样的问题。<br>潜意识里觉得新加的 Log 功能应该是没有问题了，这时，又没有了头绪，而时间已经将近 10 点。</p>
<p>最后，开发人员有了另一种假设，可能是编译的问题，导致 exe 自己出错死掉（但其实不能解释为什么还坚挺地活着几个）。<br>并且发现当前版本前一天的 build 是可以的，便更加相信是其它因素。</p>
<p>我第一次听说可能会有这样的问题（build 不对），基本上那时便没有更深入的去定位出问题的范围。</p>
<p>等到近事出反常必有妖，新的 full build 版本出来后，我尝试了下，还是不行，便陷入的僵局。</p>
<h2 id="柳暗花明"><a href="#柳暗花明" class="headerlink" title="柳暗花明"></a>柳暗花明</h2><p>由于时间太晚，便只能暂时做罢（哈哈哈哈哈，要是某些公司，肯定等不及第二天再来看的）</p>
<p>但事出反常必有妖，我一直觉得肯定是代码哪里有问题，但我心里也把 Log 这边排除了（毕竟逻辑相对简单，只是多增加输出，更有两位开发人员的肯定）。<br>更觉得是其它的问题。</p>
<p>早上来了之后，便与 David 一起 review，我把现象展示出来，在 David 的提示下，我们将 error log 打开（不确定昨晚是否一样打开过）。<br>重现问题之后，猛然在几个进程的 log 里看到了一段 exception,大意是 map 的 key 不对，找不到。</p>
<p>这回我看到了代码，确实在新的更改那边有取 map 值的操作，但理论上来说，从 map 中取值最多为空 null 之类，不应该有重大 error.</p>
<p>在简单分析之后，还是重新修改编译了一个版本，我尝试之后，问题果然解决了。</p>
<p>根源是在为了取一个值(user)的时候，用的是已有的一个公共方法（方式)，而在当前使用情况下，会诱发问题，更详细具体的根源我没有深究。</p>
<h1 id="反思"><a href="#反思" class="headerlink" title="反思"></a>反思</h1><p>总之，如果做的更好一点，就能更早的定位问题，让代价更小一些。</p>
<ul>
<li>要制定相对详细的测试计划，辅助整个流程的进行。</li>
<li>优先测试目标明确的case，比如这次的log，如果一开始就发现出不来，就可以给回开发人员研究，自己做其它的测试，更高效一些。</li>
<li>一定要按自己的思路去定位问题，在有限的条件下，缩小问题的范围，确定好的与有问题的版本的界线。</li>
<li><strong>不要相信开发人员</strong>，哈哈哈哈哈，revert 大法好，在实现不能确定问题根源情况下，回退代码测试是最有效的。尤其是像这次代码 commit 很少的情况下，代价相对很低。</li>
</ul>
<p>晚安</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2018-11-12T16:00:00.000Z" title="2018/11/13 上午12:00:00">2018-11-13</time></span><span class="level-item">Updated&nbsp;<time dateTime="2020-09-08T15:43:26.377Z" title="2020/9/8 下午11:43:26">2020-09-08</time></span><span class="level-item"> BF </span><span class="level-item">23 minutes read (About 3474 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2018/11/13/2018/11/2018-11-13-TestCategories/">Software Test Categories</a></h1><div class="content"><h1 id="软件测试的分类"><a href="#软件测试的分类" class="headerlink" title="软件测试的分类"></a>软件测试的分类</h1><p>在刚入测试坑的时候，测试的基本概念还停留在早期学习的相关知识。对于黑盒/白盒，单元测试，集成测试，冒烟测试等多多少少有点了解，但其实分的不是很清楚。</p>
<p>入坑之后，补充过基础知识，参加过一些培训，再加上真正深入测试工作，才有了更多的体会，恍然大悟的感觉。</p>
<p>今天主要总结下软件测试的分类。</p>
<h2 id="按软件测试的阶段"><a href="#按软件测试的阶段" class="headerlink" title="按软件测试的阶段"></a>按软件测试的阶段</h2><h3 id="单元测试-Unit-Testing"><a href="#单元测试-Unit-Testing" class="headerlink" title="单元测试(Unit Testing)"></a>单元测试(Unit Testing)</h3><p>单元测试是对软件组成单元进行测试。其目的是检验软件基本组成单位的正确性。测试的对象是软件设计的最小单位：模块。所以也可能被称为<strong>模块测试</strong></p>
<ul>
<li>测试阶段：编码后</li>
<li>测试对象：最小模块</li>
<li>测试人员：白盒测试工程师或开发工程师</li>
<li>测试依据：代码和注释+详细设计文档</li>
<li>测试方法：白盒测试</li>
<li>测试内容：模块接口测试、局部数据结构测试、路径测试、错误处理测试、边界测试</li>
</ul>
<h3 id="集成测试-Integration-Testing"><a href="#集成测试-Integration-Testing" class="headerlink" title="集成测试(Integration Testing)"></a>集成测试(Integration Testing)</h3><p>集成测试也称联合测试、组装测试，将程序模块采用适当的集成策略组装起来，对系统的接口及集成后的功能进行正确性检测的测试工作。主要目的是检查软件单位之间的接口是否正确。</p>
<ul>
<li>测试阶段：一般单元测试之后进行</li>
<li>测试对象：模块间的接口</li>
<li>测试人员：白盒测试工程师或开发工程师</li>
<li>测试依据：单元测试的模块+概要设计文档</li>
<li>测试方法：黑盒测试与白盒测试相结合</li>
<li>测试内容：模块之间数据传输、模块之间功能冲突、模块组装功能正确性、全局数据结构、单模块缺陷对系统的影响</li>
</ul>
<h3 id="系统测试-System-Testing"><a href="#系统测试-System-Testing" class="headerlink" title="系统测试(System Testing)"></a>系统测试(System Testing)</h3><p>将软件系统看成是一个系统的测试。包括对功能、性能以及软件所运行的软硬件环境进行测试。一般测试的时间也是最多花在系统测试阶段，耗费最多的人时，并且自动化的 Case 都要覆盖。</p>
<ul>
<li>测试阶段：集成测试通过之后</li>
<li>测试对象：整个系统（软、硬件）</li>
<li>测试人员：黑盒测试工程师</li>
<li>测试依据：需求规格说明文档</li>
<li>测试方法：黑盒测试</li>
<li>测试内容：功能、界面、可靠性、易用性、性能、兼容性、安全性等</li>
</ul>
<h3 id="验收测试-Acceptance-Testing"><a href="#验收测试-Acceptance-Testing" class="headerlink" title="验收测试(Acceptance Testing)"></a>验收测试(Acceptance Testing)</h3><p>验收测试是部署软件之前的最后一个测试操作。它是技术测试的最后一个阶段，也称为交付测试。验收测试的目的是确保软件准备就绪，按照项目合同、任务书、双方约定的验收依据文档，向软件购买都展示该软件系统满足原始需求。</p>
<ul>
<li>测试阶段：系统测试通过之后</li>
<li>测试对象：整个系统（包括软硬件）。</li>
<li>测试人员：主要是最终用户或者需求方。</li>
<li>测试依据：用户需求、验收标准</li>
<li>测试方法：黑盒测试</li>
<li>测试内容：同系统测试(功能…各类文档等)</li>
</ul>
<h2 id="按是否查看代码划分"><a href="#按是否查看代码划分" class="headerlink" title="按是否查看代码划分"></a>按是否查看代码划分</h2><h3 id="黑盒测试-Black-box-Testing"><a href="#黑盒测试-Black-box-Testing" class="headerlink" title="黑盒测试(Black-box Testing)"></a>黑盒测试(Black-box Testing)</h3><p>黑盒测试也称功能测试，测试中把被测的软件当成一个黑盒子，不关心盒子的内部结构是什么，只关心软件的输入数据与输出数据。</p>
<h3 id="白盒测试-White-box-Testing"><a href="#白盒测试-White-box-Testing" class="headerlink" title="白盒测试(White-box Testing)"></a>白盒测试(White-box Testing)</h3><p>白盒测试又称结构测试、透明盒测试、逻辑驱动测试或基于代码的测试。白盒指的打开盒子，去研究里面的源代码和程序结果。</p>
<h3 id="灰盒测试-Gray-Box-Testing"><a href="#灰盒测试-Gray-Box-Testing" class="headerlink" title="灰盒测试(Gray-Box Testing)"></a>灰盒测试(Gray-Box Testing)</h3><p>灰盒测试，是介于白盒测试与黑盒测试之间的一种测试，灰盒测试多用于集成测试阶段，不仅关注输出、输入的正确性，同时也关注程序内部的情况。</p>
<h2 id="按是否执行程序划分"><a href="#按是否执行程序划分" class="headerlink" title="按是否执行程序划分"></a>按是否执行程序划分</h2><h3 id="静态测试-Static-testing"><a href="#静态测试-Static-testing" class="headerlink" title="静态测试(Static testing)"></a>静态测试(Static testing)</h3><p>静态测试是指不运行被测程序本身，仅通过分析或检查源程序的语法、结构、过程、接口等来检查程序的正确性。对需求规格说明书、软件设计说明书、源程序做结构分析、流程图分析、符号执行来找错。</p>
<h4 id="检查项："><a href="#检查项：" class="headerlink" title="检查项："></a>检查项：</h4><ul>
<li>代码风格和规则审核；</li>
<li>程序设计和结构的审核；</li>
<li>业务逻辑的审核；</li>
<li>走查、审查与技术复审手册。</li>
</ul>
<h4 id="静态质量："><a href="#静态质量：" class="headerlink" title="静态质量："></a>静态质量：</h4><p>度量所依据的标准是 ISO9126。在该标准中，软件的质量用以下几个方面来衡量，即:</p>
<ul>
<li>功能性(Functionality)</li>
<li>可靠性(Reliability)</li>
<li>可用性(Usability)</li>
<li>有效性(Efficiency)</li>
<li>可维护性（Maintainability）</li>
<li>可移植性(Portability)。</li>
</ul>
<h3 id="动态测试-Dynamic-testing"><a href="#动态测试-Dynamic-testing" class="headerlink" title="动态测试(Dynamic testing)"></a>动态测试(Dynamic testing)</h3><p>动态测试方法是指通过运行被测程序，检查运行结果与预期结果的差异，并分析运行效率、正确性和健壮性等性能。这种方法由三部分组成：构造测试用例、执行程序、分析程序的输出结果。</p>
<h2 id="按是否手工执行测试"><a href="#按是否手工执行测试" class="headerlink" title="按是否手工执行测试"></a>按是否手工执行测试</h2><h3 id="手工测试-Manual-testing"><a href="#手工测试-Manual-testing" class="headerlink" title="手工测试(Manual testing)"></a>手工测试(Manual testing)</h3><p>手工测试就是由人去一个一个的输入用例，然后观察结果，和机器测试相对应，属于比较原始但是必须的一个步骤。</p>
<p><strong>优点：</strong> 自动化无法替代探索性测试、发散思维类无既定结果的测试。</p>
<p><strong>缺点：</strong> 执行效率慢，量大易错。</p>
<h3 id="自动化测试-Automation-Testing"><a href="#自动化测试-Automation-Testing" class="headerlink" title="自动化测试(Automation Testing)"></a>自动化测试(Automation Testing)</h3><p>就是在预设条件下运行系统或应用程序，评估运行结果，预先条件应包括正常条件和异常条件。简单说自动化测试是把以人为驱动的测试行为转化为机器执行的一种过程。</p>
<p>自动化测试又可分为：</p>
<ul>
<li>功能测试自动化</li>
<li>性能测试自动化</li>
<li>安全测试自动化。</li>
</ul>
<p>通常所说的自动化是指<strong>功能测试自动化</strong>。<br>AI 技术的兴起发展，类似可预见工作都有可能会被伪 AI 代替。</p>
<h2 id="按软件质量特性分类"><a href="#按软件质量特性分类" class="headerlink" title="按软件质量特性分类"></a>按软件质量特性分类</h2><h3 id="安全测试-Security-Testing"><a href="#安全测试-Security-Testing" class="headerlink" title="安全测试(Security Testing)"></a>安全测试(Security Testing)</h3><p>安全测试是在 IT 软件产品的生命周期中，特别是产品开发基本完成到发布阶段，对产品进行检验以验证产品符合安全需求定义和产品质量标准的过程。</p>
<p>现在对安全知识的普及，大家意识都提上来了。比如现在越来越多的不支持 HTTP 协议，转用 HTTPS 等。</p>
<h3 id="性能测试-Performance-Testing"><a href="#性能测试-Performance-Testing" class="headerlink" title="性能测试(Performance Testing)"></a>性能测试(Performance Testing)</h3><p>性能测试是通过自动化的测试工具模拟多种正常、峰值以及异常负载条件来对系统的各项性能指标进行测试。</p>
<p><strong>可靠性测试</strong>和<strong>压力测试</strong>都属于性能测试，两者可以结合进行。</p>
<p>通过负载测试，确定在各种工作负载下系统的性能，目标是测试当负载逐渐增加时，系统各项性能指标的变化情况。压力测试是通过确定一个系统的瓶颈或者不能接受的性能点，来获得系统能提供的最大服务级别的测试。</p>
<h3 id="可靠性测试-Reliability-Testing"><a href="#可靠性测试-Reliability-Testing" class="headerlink" title="可靠性测试(Reliability Testing)"></a>可靠性测试(Reliability Testing)</h3><p>软件可靠性 (software reliability )是软件产品在规定的条件下和规定的时间区间完成规定功能的能力。</p>
<p>规定的条件是指直接与软件运行相关的使用该软件的计算机系统的状态和软件的输入条件，或统称为软件运行时的外部输入条件;<br>规定的时间区间是指软件的实际运行时间区间;规定功能是指为提供给定的服务，软件产品所必须具备的功能。</p>
<p>软件可靠性不但与软件存在的缺陷和(或)差错有关，而且与系统输入和系统使用有关。软件可靠性的概率度量称软件可靠度。</p>
<h3 id="安装测试-Installing-Testing"><a href="#安装测试-Installing-Testing" class="headerlink" title="安装测试(Installing Testing)"></a>安装测试(Installing Testing)</h3><p>安装测试即对于需要安装的软件的测试，保证软件的安装包能正常安装部署，需要考虑到系统版本，环境依赖等因素。</p>
<h3 id="兼容性测试-Compatibility-Testing"><a href="#兼容性测试-Compatibility-Testing" class="headerlink" title="兼容性测试(Compatibility Testing)"></a>兼容性测试(Compatibility Testing)</h3><p>软件兼容性测试是指检查软件之间能否正确地进行交互和共享信息。<br>随着用户对来自各种类型软件之间共享数据能力和充分利用空间同时执行多个程序能力的要求，测试软件之间能否协作变得越来越重要。<br>软件兼容性测试工作的目标是保证软件按照用户期望的方式进行交互。</p>
<h2 id="其它测试分类"><a href="#其它测试分类" class="headerlink" title="其它测试分类"></a>其它测试分类</h2><h3 id="冒烟测试-Smoke-Testing"><a href="#冒烟测试-Smoke-Testing" class="headerlink" title="冒烟测试(Smoke Testing)"></a>冒烟测试(Smoke Testing)</h3><p>冒烟测试目的是确认软件基本功能正常，冒烟测试的执行者是版本编译人员。</p>
<p>现在基本执行对象为测试人员，在正规测试一个新版本之前，投入较少的人力和时间验证基本功能，通过则测试准入。</p>
<p>我忘记有一个很形象的比喻，据说最早在硬件测试中，对测试样品通电之后，如果直接冒烟了，那么说明这个样品直接不合格，不需要后续的测试了，打回重做。</p>
<h3 id="随机测试-Ad-hoc-Testing"><a href="#随机测试-Ad-hoc-Testing" class="headerlink" title="随机测试(Ad-hoc Testing)"></a>随机测试(Ad-hoc Testing)</h3><p>随机测试主要是根据测试者的经验对软件进行功能和性能抽查。</p>
<p>根据测试说明书执行用例测试的重要补充手段，是保证测试覆盖完整性的有效方式和过程。</p>
<p>随机测试主要是对被测软件的一些重要功能进行复测，也包括测试那些当前的测试用例(TestCase)没有覆盖到的部分。</p>
<h3 id="探索性测试-Exploratory-testing"><a href="#探索性测试-Exploratory-testing" class="headerlink" title="探索性测试(Exploratory testing)"></a>探索性测试(Exploratory testing)</h3><p>探索性测试可以说是一种测试思维技术。它没有很多实际的测试方法、技术和工具，但是却是所有测试人员都应该掌握的一种测试思维方式。探索性强调测试人员的主观能动性，抛弃繁杂的测试计划和测试用例设计过程，强调在碰到问题时及时改变测试策略。</p>
<p>探索性测试自动化暂时无法代替。好的测试人员也无法被代替。</p>
<h3 id="回归测试-Regression-Testing"><a href="#回归测试-Regression-Testing" class="headerlink" title="回归测试(Regression Testing)"></a>回归测试(Regression Testing)</h3><p>回归测试是指修改了旧代码后，重新进行测试以确认修改没有引入新的错误或导致其他代码产生错误。自动回归测试将大幅降低系统测试、维护升级等阶段的成本。</p>
<p>在整个软件测试过程中占有很大的工作量比重，软件开发的各个阶段都会进行多次回归测试。通过选择正确的回归测试策略来改进回归测试的效率和有效性是很有意义的。</p>
<h3 id="α-测试-Alpha-Testing"><a href="#α-测试-Alpha-Testing" class="headerlink" title="α 测试(Alpha Testing)"></a>α 测试(Alpha Testing)</h3><p>α 测试是由一个用户在开发环境下进行的测试，也可以是公司内部的用户在模拟实际操作环境下进行的测试。α 测试的目的是评价软件产品的 FLURPS(即功能、局域化、可使用性、可靠性、性能和支持)。</p>
<p>大型通用软件，在正式发布前，通常需要执行 Alpha 和 Beta 测试。α 测试不能由程序员或测试员完成。</p>
<h3 id="β-测试-Beta-Testing"><a href="#β-测试-Beta-Testing" class="headerlink" title="β 测试(Beta Testing)"></a>β 测试(Beta Testing)</h3><p>Beta 测试是一种验收测试。Beta 测试由软件的最终用户们在一个或多个客户场所进行。</p>
<p><strong>α 测试与 Beta 测试的区别</strong>：Findyou</p>
<p>测试的场所不同：Alpha 测试是指把用户请到开发方的场所来测试,beta 测试是指在一个或多个用户的场所进行的测试。</p>
<p>Alpha 测试的环境是受开发方控制的,用户的数量相对比较少,时间比较集中。beta 测试的环境是不受开发方控制的,用户数量相对比较多,时间不集中。</p>
<p>alpha 测试先于 beta 测试执行。通用的软件产品需要较大规模的 beta 测试,测试周期比较长。</p>
<h2 id="测试分类的思维导图"><a href="#测试分类的思维导图" class="headerlink" title="测试分类的思维导图"></a>测试分类的思维导图</h2><p>下面就用一张图来稍微总结一下，不一定完全准确，就当参考一下吧。</p>
<p><img src="/img/post/2018/11/2018-11-13-TestCategories.jpg" alt="TestCategoriesMind"></p>
<h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><p>软件测试的分类可以从许多角度切入，主要的分类了解了就差不多了，具体的可以针对性的学习。</p>
<p>参考：</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/findyou/p/6480411.html">软件测试概念及分类整理汇总</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/chaosmax/article/details/71617807">软件测试的定义与分类</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_35867537/article/details/77477775">软件测试分类及测试中三个主要概念</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2018-08-26T16:00:00.000Z" title="2018/8/27 上午12:00:00">2018-08-27</time></span><span class="level-item">Updated&nbsp;<time dateTime="2018-10-18T13:45:48.462Z" title="2018/10/18 下午9:45:48">2018-10-18</time></span><span class="level-item"> BF </span><span class="level-item">16 minutes read (About 2431 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2018/08/27/2018/08/2018-08-27-PerfTestTraining_02/">Performance Test Training (2)</a></h1><div class="content"><h1 id="Performance-Test-Training-2"><a href="#Performance-Test-Training-2" class="headerlink" title="Performance Test Training (2)"></a>Performance Test Training (2)</h1><p>性能测试培训的第二天，主要内容是性能测试一些实例，这些要总结好难，还是要实际操作。</p>
<p>核心的规则还是从进程，到线程，CPU，内存，堆栈，IO，网络一步步分析。</p>
<p>培训上基本上是都是 linux 的命令，我下面简单罗列了一些window下的命令，而且很不全，参考意义不大。</p>
<p>之后有时候再一块一块深入，每一块都有好多细节。。。今天就算给自己交个差吧（捂脸）</p>
<h2 id="Performance-Monitor-Link"><a href="#Performance-Monitor-Link" class="headerlink" title="Performance Monitor (Link)"></a>Performance Monitor <a target="_blank" rel="noopener" href="https://www.cnblogs.com/cappuccino917/p/6699418.html">(Link)</a></h2><p>性能计数器是windows提供的核心监控数据，可以根据自己需要去获取。</p>
<p>Processor: <code>% Processor Time</code> CPU当前利用率，百分比</p>
<p>Memory: <code>Available MBytes</code> 当前可用内存，兆字节（虚拟内存不需要监控，只有当物理内存不够时才会使用虚拟内存，物理内存已有监控）</p>
<p>LogicalDisk: <code>% Free Space</code> 逻辑分区可用空间，百分比（物理磁盘IO由于RAID级别不同，或者有的机器没有RAID，无法定义统一的监控阈值）</p>
<p>Network Interface: <code>Bytes Total/sec</code> 网卡流量：发送+接收，字节</p>
<p>TCPv4: <code>Connections Established</code> 当前连接数（Established + Close-Wait）</p>
<h3 id="CPU"><a href="#CPU" class="headerlink" title="CPU:"></a>CPU:</h3><h4 id="Processor-Time"><a href="#Processor-Time" class="headerlink" title="%Processor Time"></a>%Processor Time</h4><p><code>%Priviliaged Time</code> CPU在特权模式下处理线程所花的时间百分比。一般的系统服务，进城管理，内存管理等一些由操作系统自行启动的进程属于这类</p>
<p><code>%User Time</code> 与<code>%Privileged Time</code>计数器正好相反，指的是在用户状态模式下（即非特权模式）的操作所花的时间百分比。如果该值较大，可以考虑是否通过算法优化等方法降低这个值。如果该服务器是数据库服务器，导致此值较大的原因很可能是数据库的排序或是函数操作消耗了过多的CPU时间，此时可以考虑对数据库系统进行优化。</p>
<p><code>%DPC Time</code> 处理器在网络处理上消耗的时间，该值越低越好。在多处理器系统中，如果这个值大于50%并且<code>%Processor Time</code>非常高，加入一个网卡可能会提高性能。</p>
<h3 id="Memory"><a href="#Memory" class="headerlink" title="Memory:"></a>Memory:</h3><h4 id="Available-Bytes"><a href="#Available-Bytes" class="headerlink" title="Available Bytes"></a>Available Bytes</h4><p><strong>Pages/sec</strong>该计数器显示由于页面不在物理内存中而需要从磁盘读取的页面数。<code>Pages/sec</code> 的值很大不一定表明内存有问题，而可能是运行使用内存映射文件的程序所致，操作系统经常会利用磁盘交换的方式提高系统可用的内存量或是提高内存的使用效率。（注意该计数器与 Page Faults/sec 的区别，后者只表明数据不能在内存的指定工作集中立即使用，包括硬错误和软错误）</p>
<p><strong>Page Faults/sec</strong>计数器可以确保磁盘活动不是由分页导致的。在 Windows 中，换页的原因包括：配置进程占用了过多内存 或者 文件系统活动。</p>
<p>如果在同一硬盘上有多个逻辑分区，需要使用 <code>Logical Disk</code>计数器而非 <code>Physical Disk</code>计数器。查看逻辑磁盘计数器有助于确定哪些文件被频繁访问。当发现磁盘有大量读/写活动时，请查看读写专用计数器以确定导致每个逻辑卷负荷增加的磁盘活动类型，例如，Logical Disk: <code>Disk Write Bytes/sec</code>。</p>
<p><strong>Page Input/sec</strong>表示为了解决硬错误而写入硬盘的页数（参考值：&gt;=<code>Page Reads/sec</code>）</p>
<p><strong>Page Reads/sec</strong> 表示为了解决硬错误而从硬盘上读取的页数。（参考值： &lt;=5）</p>
<p>如果怀疑有内存泄露，请监视 <code>Memory/Available Bytes</code> 和 <code>Memory/ Committed Bytes</code>，以观察内存行为，并监视你认为可能在泄露内存的进程的 <code>Process/ Private Bytes</code>、<code>Process/ Working Set</code> 和<code>Process/ Handle Count</code>。如果怀疑是内核模式进程导致了泄露，则还应该监视 <code>Memory/ Pool Nonpaged Bytes</code>、<code>Memory/ Pool Nonpaged Allocs</code> 和 <code>Process(process_name)/ Pool Nonpaged Bytes</code></p>
<p>如果发生了内存泄漏,<code>process\private bytes</code>计数器和<code>process\working set</code> 计数器的值往往会升高,同时<code>avaiable bytes</code>的值会降低</p>
<p><code>private Bytes</code> 是指进程所分配的无法与其他进程共享的当前字节数量。该计数器主要用来判断进程在性能测试过程中有无内存泄漏。</p>
<p>例如：对于一个IIS之上的web应用，我们可以重点监控inetinfo进程的<code>Private Bytes</code>，如果在性能测试过程中，该进程的<code>Private Bytes</code>计数器值不断增加，或是性能测试停止后一段时间，该进程的<code>Private Bytes</code>仍然持续在高水平，则说明应用存在内存泄漏。</p>
<h3 id="Disk："><a href="#Disk：" class="headerlink" title="Disk："></a>Disk：</h3><h4 id="PhysicalDisk-Avg-Disk-sec-Read"><a href="#PhysicalDisk-Avg-Disk-sec-Read" class="headerlink" title="PhysicalDisk\Avg. Disk sec/Read"></a>PhysicalDisk\Avg. Disk sec/Read</h4><p>以秒计算的在此盘上读取数据的所需平均时间。</p>
<h4 id="Physical-Disk-Disk-Reads-sec"><a href="#Physical-Disk-Disk-Reads-sec" class="headerlink" title="Physical Disk\ Disk Reads/sec"></a>Physical Disk\ Disk Reads/sec</h4><p>在读取操作时从磁盘上传送的字节平均数。</p>
<h4 id="PhysicalDisk-Avg-Disk-sec-Write"><a href="#PhysicalDisk-Avg-Disk-sec-Write" class="headerlink" title="PhysicalDisk\ Avg. Disk sec/Write"></a>PhysicalDisk\ Avg. Disk sec/Write</h4><p>以秒计算的在此盘上写入数据的所需平均时间。</p>
<h4 id="Physical-Disk-DiskWrites-sec"><a href="#Physical-Disk-DiskWrites-sec" class="headerlink" title="Physical Disk\ DiskWrites/sec"></a>Physical Disk\ DiskWrites/sec</h4><p>在写入操作时从磁盘上传送的字节平均数。</p>
<h4 id="Physical-Disk-Avg-Disk-sec-Transfer"><a href="#Physical-Disk-Avg-Disk-sec-Transfer" class="headerlink" title="Physical Disk\ Avg.Disk sec/Transfer"></a>Physical Disk\ Avg.Disk sec/Transfer</h4><p>反映磁盘完成请求所用的时间。较高的值表明磁盘控制器由于失败而不断重试该磁盘。这些故障会增加平均磁盘传送时间。</p>
<h4 id="Disk-Time-和-Avg-Disk-Queue-Length"><a href="#Disk-Time-和-Avg-Disk-Queue-Length" class="headerlink" title="%Disk Time 和 Avg.Disk Queue Length"></a>%Disk Time 和 Avg.Disk Queue Length</h4><p>RAID 磁盘中的 <code>% Disk Time</code> 计数器会指示大于 100% 的值。如果出现这种情况，则使用 <code>PhysicalDisk: Avg.Disk Queue Length</code>计数器来确定等待进行磁盘访问的平均系统请求数量。</p>
<p>如果不是RAID，则使用 <code>% Disk Time</code> 和 <code>Current Disk Queue Length</code>计数器确定是否磁盘存在瓶颈，如果这两个计数器的值一直很高，则可能是磁盘存在瓶颈</p>
<p>Physical Disk： <code>DiskTransfers/sec</code> 磁盘<code>IOPS % Disk Time</code> 当前物理磁盘利用率，如果是RAID，该值会大于100% <code>Current Disk Queue Length</code> 等待进行磁盘访问的当前系统请求数量 <code>Avg.Disk Queue Length</code> 等待进行磁盘访问的平均系统请求数量，用于RAID</p>
<h2 id="Task"><a href="#Task" class="headerlink" title="Task"></a>Task</h2><h3 id="tasklist"><a href="#tasklist" class="headerlink" title="tasklist"></a>tasklist</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">PS C:\Users\mayn\Desktop&gt; tasklist</span><br><span class="line"></span><br><span class="line">映像名称                       PID 会话名              会话#       内存使用</span><br><span class="line">========================= ======== ================ =========== ============</span><br><span class="line">System Idle Process              0 Services                   0          8 K</span><br><span class="line">System                           4 Services                   0        128 K</span><br><span class="line">Registry                       108 Services                   0     13,504 K</span><br><span class="line">smss.exe                       376 Services                   0      1,168 K</span><br><span class="line">csrss.exe                      580 Services                   0      4,932 K</span><br><span class="line">wininit.exe                    672 Services                   0      6,576 K</span><br><span class="line">csrss.exe                      680 Console                    1      5,368 K</span><br></pre></td></tr></table></figure>

<h3 id="tskill-taskkill"><a href="#tskill-taskkill" class="headerlink" title="tskill/taskkill"></a>tskill/taskkill</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tskill notepad</span><br></pre></td></tr></table></figure>
<h2 id="CPU-1"><a href="#CPU-1" class="headerlink" title="CPU"></a>CPU</h2><h3 id="wmic-cpu"><a href="#wmic-cpu" class="headerlink" title="wmic cpu"></a>wmic cpu</h3><p>上面显示的有位宽，最大始终频率， 生产厂商，二级缓存等信息</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">PS C:\Users\mayn\Desktop&gt; wmic cpu</span><br><span class="line">AddressWidth  Architecture  AssetTag                Availability  Caption                                 Characteristics  ConfigManagerErrorCode  ConfigManagerUserConfig  CpuStatus  CreationClassName  CurrentClockSpeed  CurrentVoltage  DataWidth  Description                             DeviceID  ErrorCleared  ErrorDescription  ExtClock  Family  InstallDate  L2CacheSize  L2CacheSpeed  L3CacheSize  L3CacheSpeed  LastErrorCode  Level  LoadPercentage  Manufacturer  MaxClockSpeed  Name                                     NumberOfCores  NumberOfEnabledCore  NumberOfLogicalProcessors  OtherFamilyDescription  PartNumber              PNPDeviceID  PowerManagementCapabilities  PowerManagementSupported  ProcessorId       ProcessorType  Revision  Role  SecondLevelAddressTranslationExtensions  SerialNumber            SocketDesignation  Status  StatusInfo  Stepping  SystemCreationClassName  SystemName  ThreadCount  UniqueId  UpgradeMethod  Version  VirtualizationFirmwareEnabled  VMMonitorModeExtensions  VoltageCaps</span><br><span class="line">64            9             To Be Filled By O.E.M.  3             Intel64 Family 6 Model 158 Stepping 10  236                                                               1          Win32_Processor    3000               10              64         Intel64 Family 6 Model 158 Stepping 10  CPU0                                      100       205                  1536                       9216         0                            6      13              GenuineIntel  3000           Intel(R) Core(TM) i5-8500 CPU @ 3.00GHz  6              6                    6                                                  To Be Filled By O.E.M.                                            FALSE                     BFEBFBFF000906EA  3                        CPU   TRUE                                     To Be Filled By O.E.M.  LGA1151            OK      3                     Win32_ComputerSystem     PC-CX       6                      1                       FALSE                          TRUE</span><br></pre></td></tr></table></figure>

<h2 id="Memory-1"><a href="#Memory-1" class="headerlink" title="Memory"></a>Memory</h2><h3 id="wmic-memorychip"><a href="#wmic-memorychip" class="headerlink" title="wmic memorychip"></a>wmic memorychip</h3><p>可以显示出来 2 条内存，各 8G 速度 2666MHz</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">PS C:\Users\mayn\Desktop&gt; wmic memorychip</span><br><span class="line">Attributes  BankLabel  Capacity    Caption   ConfiguredClockSpeed  ConfiguredVoltage  CreationClassName     DataWidth  Description  DeviceLocator   FormFactor  HotSwappable  InstallDate  InterleaveDataDepth  InterleavePosition  Manufacturer  MaxVoltage  MemoryType  MinVoltage  Model  Name      OtherIdentifyingInfo  PartNumber       PositionInRow  PoweredOn  Removable  Replaceable  SerialNumber  SKU  SMBIOSMemoryType  Speed  Status  Tag                TotalWidth  TypeDetail  Version</span><br><span class="line">1           BANK 0     8589934592  物理内存   2666                  1200               Win32_PhysicalMemory  64          物理内存     ChannelA-DIMM1  8                                      1                    1                   G-Skill       0           0           0                  物理内存                        F4-2666C19-8GNT                                                    00000000           26                2666           Physical Memory 0  64          128</span><br><span class="line">1           BANK 2     8589934592  物理内存   2666                  1200               Win32_PhysicalMemory  64          物理内存     ChannelB-DIMM1  8                                      1                    2                   G-Skill       0           0           0                  物理内存                        F4-2666C19-8GNT                                                    00000000           26                2666           Physical Memory 1  64          128</span><br></pre></td></tr></table></figure>

<h2 id="Disk"><a href="#Disk" class="headerlink" title="Disk"></a>Disk</h2><h3 id="wmic-logicaldisk"><a href="#wmic-logicaldisk" class="headerlink" title="wmic logicaldisk"></a>wmic logicaldisk</h3><p>可以看到有几个盘，每一个盘的文件系统和剩余空间</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">PS C:\Users\mayn\Desktop&gt; wmic logicaldisk</span><br><span class="line">Access  Availability  BlockSize  Caption  Compressed  ConfigManagerErrorCode  ConfigManagerUserConfig  CreationClassName  Description   DeviceID  DriveType  ErrorCleared  ErrorDescription  ErrorMethodology  FileSystem  FreeSpace     InstallDate  LastErrorCode  MaximumComponentLength  MediaType  Name  NumberOfBlocks  PNPDeviceID  PowerManagementCapabilities  PowerManagementSupported  ProviderName  Purpose  QuotasDisabled  QuotasIncomplete  QuotasRebuilding  Size           Status  StatusInfo  SupportsDiskQuotas  SupportsFileBasedCompression  SystemCreationClassName  SystemName  VolumeDirty  VolumeName  VolumeSerialNumber</span><br><span class="line">0                                C:       FALSE                                                        Win32_LogicalDisk  本地固定磁盘   C:        3                                                            NTFS        74612744192                               255                     12         C:                                                                                                                                                                   106530430976                       FALSE               TRUE                          Win32_ComputerSystem     PC-CX                                04C2790D</span><br><span class="line">0                                D:       FALSE                                                        Win32_LogicalDisk  本地固定磁盘   D:        3                                                            NTFS        342652858368                              255                     12         D:                                                                                                                                                                   372486508544                       FALSE               TRUE                          Win32_ComputerSystem     PC-CX                                00004823</span><br><span class="line">0                                E:       FALSE                                                        Win32_LogicalDisk  本地固定磁盘   E:        3                                                            NTFS        364452909056                              255                     12         E:                                                                                                                                                                   1000202768384                      FALSE               TRUE                          Win32_ComputerSystem     PC-CX                                00004823</span><br></pre></td></tr></table></figure>

<h3 id="wmic-volume"><a href="#wmic-volume" class="headerlink" title="wmic volume"></a>wmic volume</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">PS C:\Users\mayn\Desktop&gt; wmic volume</span><br><span class="line">Access  Automount  Availability  BlockSize  BootVolume  Capacity       Caption                                            Compressed  ConfigManagerErrorCode  ConfigManagerUserConfig  CreationClassName  Description  DeviceID                                           DirtyBitSet  DriveLetter  DriveType  ErrorCleared  ErrorDescription  ErrorMethodology  FileSystem  FreeSpace     IndexingEnabled  InstallDate  Label  LastErrorCode  MaximumFileNameLength  Name                                               NumberOfBlocks  PageFilePresent  PNPDeviceID  PowerManagementCapabilities  PowerManagementSupported  Purpose  QuotasEnabled  QuotasIncomplete  QuotasRebuilding  SerialNumber  Status  StatusInfo  SupportsDiskQuotas  SupportsFileBasedCompression  SystemCreationClassName  SystemName  SystemVolume</span><br><span class="line">        TRUE                     4096       TRUE        106530430976   C:\                                                FALSE                                                                                        \\?\Volume&#123;81b9fa95-b225-44ef-84fe-e6b4bcd49f21&#125;\               C:           3                                                            NTFS        74612363264   TRUE                                                255                    C:\                                                                TRUE                                                                                                                                             79853837                          TRUE                TRUE                                                   PC-CX       FALSE</span><br><span class="line">        TRUE                     4096       FALSE       844099584      \\?\Volume&#123;d9656dfe-1091-41c2-b677-aed0eda4ea25&#125;\  FALSE                                                                                        \\?\Volume&#123;d9656dfe-1091-41c2-b677-aed0eda4ea25&#125;\                            3                                                            NTFS        369049600     TRUE                                                255                    \\?\Volume&#123;d9656dfe-1091-41c2-b677-aed0eda4ea25&#125;\                  FALSE                                                                                                                                            2759807823                        TRUE                TRUE                                                   PC-CX       FALSE</span><br><span class="line">        TRUE                     4096       FALSE       372486508544   D:\                                                FALSE                                                                                        \\?\Volume&#123;da460ecc-d1db-4ffc-8fd3-9445c2154bf4&#125;\               D:           3                                                            NTFS        342652858368  TRUE                                                255                    D:\                                                                FALSE                                                                                                                                            18467                             TRUE                TRUE                                                   PC-CX       FALSE</span><br><span class="line">        TRUE                     4096       FALSE       1000202768384  E:\                                                FALSE                                                                                        \\?\Volume&#123;673bf2eb-d8ce-4689-98fe-add079591f66&#125;\               E:           3                                                            NTFS        364452909056  TRUE                                                255                    E:\                                                                FALSE                                                                                                                                            18467                             TRUE                TRUE                                                   PC-CX       FALSE</span><br><span class="line">        TRUE                     2048       FALSE       102539264      \\?\Volume&#123;e9b34647-3273-4702-9f11-7296af3707f2&#125;\                                                                                               \\?\Volume&#123;e9b34647-3273-4702-9f11-7296af3707f2&#125;\                            3                                                            FAT         76158976                                                          255                    \\?\Volume&#123;e9b34647-3273-4702-9f11-7296af3707f2&#125;\                  FALSE                                                                                                                                            18467                             FALSE               FALSE                                                  PC-CX       TRUE</span><br></pre></td></tr></table></figure>

<p>每个盘的剩余空间量，其实上一个命令也可以查看的</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">PS C:\Users\mayn\Desktop&gt; fsutil volume diskfree c:</span><br><span class="line">可用字节总数              : 74612154368</span><br><span class="line">字节总数                  : 106530430976</span><br><span class="line">可用的尚未使用的字节总数  : 74612154368</span><br></pre></td></tr></table></figure>

<p>这个命令查看每一个卷的容量信息是很方便</p>
<h2 id="BIOS"><a href="#BIOS" class="headerlink" title="BIOS"></a>BIOS</h2><h3 id="wmic-bios"><a href="#wmic-bios" class="headerlink" title="wmic bios"></a>wmic bios</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">PS C:\Users\mayn\Desktop&gt; wmic bios</span><br><span class="line">BiosCharacteristics                                                              BIOSVersion                                                  BuildNumber  Caption  CodeSet  CurrentLanguage  Description  EmbeddedControllerMajorVersion  EmbeddedControllerMinorVersion  IdentificationCode  InstallableLanguages  InstallDate  LanguageEdition  ListOfLanguages                                                                                                                                                      Manufacturer              Name  OtherTargetOS  PrimaryBIOS  ReleaseDate                SerialNumber          SMBIOSBIOSVersion  SMBIOSMajorVersion  SMBIOSMinorVersion  SMBIOSPresent  SoftwareElementID  SoftwareElementState  Status  SystemBiosMajorVersion  SystemBiosMinorVersion  TargetOperatingSystem  Version</span><br><span class="line">&#123;7, 10, 11, 12, 15, 16, 17, 19, 23, 24, 25, 26, 27, 28, 29, 32, 33, 40, 42, 43&#125;  &#123;&quot;ALASKA - 1072009&quot;, &quot;0401&quot;, &quot;American Megatrends - 5000D&quot;&#125;               0401              en|US|iso8859-1  0401         255                             255                                                 9                                                   &#123;&quot;en|US|iso8859-1&quot;, &quot;fr|FR|iso8859-1&quot;, &quot;zh|TW|unicode&quot;, &quot;zh|CN|unicode&quot;, &quot;ja|JP|unicode&quot;, &quot;de|DE|iso8859-1&quot;, &quot;es|ES|iso8859-1&quot;, &quot;ru|RU|iso8859-5&quot;, &quot;ko|KR|unicode&quot;&#125;  American Megatrends Inc.  0401                 TRUE         20180319000000.000000+000  System Serial Number  0401               3                   1                   TRUE           0401               3                     OK      5                       13                      0                      ALASKA - 1072009</span><br></pre></td></tr></table></figure>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2018-08-24T16:00:00.000Z" title="2018/8/25 上午12:00:00">2018-08-25</time></span><span class="level-item">Updated&nbsp;<time dateTime="2018-11-30T15:46:40.248Z" title="2018/11/30 下午11:46:40">2018-11-30</time></span><span class="level-item"> BF </span><span class="level-item">9 minutes read (About 1300 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2018/08/25/2018/08/2018-08-25-PerfTestTraining/">Performance Test Training (1)</a></h1><div class="content"><h1 id="Performance-Test-Training-1"><a href="#Performance-Test-Training-1" class="headerlink" title="Performance Test Training (1)"></a>Performance Test Training (1)</h1><p>今天是性能测试培训的第一天，主要内容是性能测试涉及到的概念，以及讲师自己的一些实践，个人感觉还是有些收获的。</p>
<p>下面就简单总结下一点知识。</p>
<h2 id="Performance-Idicator"><a href="#Performance-Idicator" class="headerlink" title="Performance Idicator"></a>Performance Idicator</h2><p>针对目前大多数的系统，都可以发起请求，来得到结果。尤其是<code>REST API</code>这种形式的，比如之前针对<code>Publisher Rest API</code>，就有对应的<code>SoupUI</code>的cases，也有基于<code>Jmeter</code>对api的反应时间(Response Time)进行的测试。</p>
<p>总的来说，有下面三个主要的指标:</p>
<ul>
<li>TPS (Transaction Per Second)</li>
<li>Response Time</li>
<li>Error Rate</li>
</ul>
<h3 id="TPS"><a href="#TPS" class="headerlink" title="TPS"></a>TPS</h3><p><code>Transaction per second</code>指是一秒钟时间内能完成的事务数，是一个最基本最重要的指标。一般来说，在制定性能测试计划的时候，会设定目标TPS的目标值，从具体的需求中抽离出来。</p>
<p><code>TPS</code>的计算方式为1/RT*users，比如一个用户实例时，假设RT为0.2,则<code>TPS = 1/0.2=20</code></p>
<p>在理想情况下，假设RT不变，则<code>TPS</code>如下所示：</p>
<table>
<thead>
<tr>
<th>Users(Threads)</th>
<th>RT</th>
<th>TPS</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>0.2</td>
<td>1/0.2*1=5</td>
</tr>
<tr>
<td>2</td>
<td>0.2</td>
<td>1/0.2*2=10</td>
</tr>
<tr>
<td>3</td>
<td>0.2</td>
<td>1/0.2*3=15</td>
</tr>
<tr>
<td>…</td>
<td>…</td>
<td>…</td>
</tr>
</tbody></table>
<h3 id="Response-Time-RT"><a href="#Response-Time-RT" class="headerlink" title="Response Time(RT)"></a>Response Time(RT)</h3><p>系统反应时间一般不会一成不变的，当系统请求越来越多的时候，反应时间会逐渐延长。所以结合上请求数，<code>TPS</code>一般为一个曲线，并且有峰值。</p>
<p>当超过之后，便会开始达到系统处理的瓶颈，使反应时间增加，反而使<code>TPS</code>减小。所以一般我们会从小变大线程数来得到<code>TPS</code>的结果，示意图如下，实际没有这么平滑。</p>
<p><img src="/img/post/2018/08/2018-08-25-PerfTestTraining-TPS.jpg" alt="TPS"></p>
<h3 id="Error-Rate"><a href="#Error-Rate" class="headerlink" title="Error Rate"></a>Error Rate</h3><p>当线程增加的时候，便会增加应用的负荷，便可能会有error产生，这个时候便有一个指标便是<code>Error Rate</code>，即一批线程中有错误的比率，比如一个正常的请求返回繁忙的错误。</p>
<p>尤其是在达到最大的<code>TPS</code>的时候，如果错误率很高的话，那也是没有意义的。</p>
<h3 id="Others"><a href="#Others" class="headerlink" title="Others"></a>Others</h3><p>一般来说，性能指标能否完成，主要看以下：</p>
<ul>
<li>速度相关(TPS / RT)</li>
<li>容量相关(吞吐, Hit, PV)</li>
<li>资源相关(CPU, Memory, IO)</li>
</ul>
<p>我们很多时候会先定义性能指标，而最后的测试是为了估算应用最后能否达到预期的数值，给予项目人员及时的反馈，并帮助分析性能的瓶颈，甚至找到最根本的原因。</p>
<h2 id="Performance-Test-Roles"><a href="#Performance-Test-Roles" class="headerlink" title="Performance Test Roles"></a>Performance Test Roles</h2><p>上面讲的是性能测试中的表象和指标，其实只是性能测试一个最基本的一个方面，理论上来说，性能测试工作可以划分为以下几个角色：</p>
<ul>
<li>性能脚本工程师</li>
<li>性能场景设计工程师</li>
<li>性能分析工程师</li>
</ul>
<h3 id="Performance-Scripts-Engineer"><a href="#Performance-Scripts-Engineer" class="headerlink" title="Performance Scripts Engineer"></a>Performance Scripts Engineer</h3><p>这个最好理解，同时也是我最近的角色，负责Messaage Import的性能测试环境的搭建，性能相关数据的采集。</p>
<p>相对来说，大部分人都能做到这个程度，毕竟技术门槛不高，而且目标比较明确。</p>
<h3 id="Performance-Scenario-Design-Engineer"><a href="#Performance-Scenario-Design-Engineer" class="headerlink" title="Performance Scenario Design Engineer"></a>Performance Scenario Design Engineer</h3><p>这一块的话，更像是目前David和陶总担任的角色。因为从用户需求角度和项目理解熟悉程度，我还没有那么高，同时我更多的精力是在完成测试脚本和执行测试计划。</p>
<p>当然，在一些情况下，我也有自己的一些测试方向和想法，但因为资源有限的情况下，还是要优先以客户需求为导向的测试。</p>
<p>希望之后我也能更多承担起这块的角色，但这个前提是我对业务还有系统的功能有更深入的了解。</p>
<p>因为测试数据的建立对我来说就有一定的难度，需要大家的support.</p>
<h3 id="Performance-Analysis-Engineer"><a href="#Performance-Analysis-Engineer" class="headerlink" title="Performance Analysis Engineer"></a>Performance Analysis Engineer</h3><p>这个角色是性能测试最核心也是最难的一个角色。需要对应用，业务都了解的情况下，掌握非常好的分析方法和经验，会使用各种分析工具和系统级命令。</p>
<p>从最直接的性能结果开始，最终达到代码级别的诊断与分析。</p>
<p>一般来说都是一步一步精细化下去：</p>
<p>现象 -&gt; OS -&gt; CPU -&gt; Processor -&gt; Thread -&gt;Java/C/…-&gt; dump -&gt; code</p>
<h2 id="Performance-Test-Knowledge"><a href="#Performance-Test-Knowledge" class="headerlink" title="Performance Test Knowledge"></a>Performance Test Knowledge</h2><p>性能测试要做的好，需要掌握了解许多的知识，也是一个很庞大的知识体系：</p>
<ul>
<li>压力工具(Load Runner/Jmeter/…)</li>
<li>监控分析工具</li>
<li>中间件(MQ/Tuxedo/…)</li>
<li>网络(Network)，网络性能分析</li>
<li>OS(Windows/Linux/…)</li>
<li>应用服务器(Apache/Nginx/…)</li>
<li>DB</li>
<li>存储</li>
<li>Code</li>
<li>…</li>
</ul>
<h2 id="Last"><a href="#Last" class="headerlink" title="Last"></a>Last</h2><p>今天还介绍了许多实用的知识，比如Linux系统的架构，常用的一些网络协议，系统自己的性能查看工具等。</p>
<p>之后有时候，再自己多实践与总结。</p>
<p>晚安。</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2018-06-13T16:00:00.000Z" title="2018/6/14 上午12:00:00">2018-06-14</time></span><span class="level-item">Updated&nbsp;<time dateTime="2018-10-18T13:45:48.446Z" title="2018/10/18 下午9:45:48">2018-10-18</time></span><span class="level-item"> BF </span><span class="level-item">10 minutes read (About 1468 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2018/06/14/2018/06/2018-06-16-MultiVarsPerformanceTest/">Multi-parameters performance test</a></h1><div class="content"><h1 id="Multi-variables-performance-test"><a href="#Multi-variables-performance-test" class="headerlink" title="Multi-variables performance test"></a>Multi-variables performance test</h1><p>最近一直在忙，都没有时间总结和改进现在的测试流程，瓶颈已经显现出来。下周的一个主要的任务就是大批量的测试不同虚拟机下不同参数执行任务的性能,从而得到CPU和Memory消耗适合的一些参数，并做为benchmark。可以预见之后还有类似的测试的任务，那必要要提前做好改变。今天主要是把思路整理出来。</p>
<h2 id="背景与需求"><a href="#背景与需求" class="headerlink" title="背景与需求"></a>背景与需求</h2><p>之前已经有经过多次改良的脚本，可以执行在一个虚拟机上的完整测试任务，针对不同的机器，都有对应的配置文件。当测试流程开始时，会读取对应的配置，而且这些配置都是存放在Share Folder下对应的机器名文件夹下，那么每次测试之前，都需要手动去把对应的文件改成要想要的数据（主要就2个配置文件），然后执行任务，结束之后会有对应的Test Result和Monitor Data以供收集数据。</p>
<p>那么，接下来想要实现的就是<strong>一次性配置</strong>多个参数，不同的机器能够自动依次执行测试任务，最后将所有的测试结果合在一处，形成报表，而不再需要人工再去采集一下。</p>
<h2 id="实现思路"><a href="#实现思路" class="headerlink" title="实现思路"></a>实现思路</h2><h3 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h3><p>目前DB需要人工去回滚，因为之前数据库资源紧张，经常需要去切换。如果写在代码中，容易失误而restore错数据库，所以用sql人工去执行回滚，当时为适合的方案。那么接下来要自动连续测试的话，首先第一步就是把自动回滚加入到每次测试用例执行前。</p>
<p>需要考虑的是使用什么方式：</p>
<ul>
<li>可以直接用目前的python去写回滚脚本，并加入到整体流程代码中。</li>
<li>可以先用Powershell或Python写一个独立的回滚脚本，并可以加入系统Scheduler中，而主程序只是调用，这样可以将回滚任务分离。比如具体的DB信息，回滚基于的Backup都不需要在主程序中设置。我比较偏向这个选择，这样回滚数据库功能更容易共享，可以给别的测试任务使用。</li>
</ul>
<h3 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h3><p>原来的流程中是去基于机器名目录下去寻找固定名字的配置文件(e.g. config.ini)。那么现在必须增加配置选择，也有几种方案：<br>首先必要的是新增变量组合的配置，这个可以放在主程序配置中，也可以在Share Folder下单独配置e.g. VM_Name/parameters.ini 类似于</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[TC1]</span></span><br><span class="line"><span class="attr">configfile1.key1</span> = value1</span><br><span class="line"><span class="attr">configfile2.key2</span> = value2</span><br><span class="line"><span class="section">[TC2]</span></span><br><span class="line"><span class="attr">configfile1.key1</span> = value3</span><br><span class="line"><span class="attr">configfile2.key2</span> = value4</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>而在上面的前提下：</p>
<ul>
<li>在VM名目录下按变量顺序新加文件夹，e.g. V1_V2/config.ini,引导主程序使用该目录下的配置。</li>
<li>建立一个config.ini模板，比如VM_Name/config.template.ini，然后将读取后的配置填充进去，每次都生成新的VM_Name/config.ini。这样的话，原来的主程序并不需要改变，只需要把新功能添加进去就好，而且之前写过类似的，可以拿来复用，我偏向这个方式。</li>
</ul>
<h3 id="多台虚拟机信息交互"><a href="#多台虚拟机信息交互" class="headerlink" title="多台虚拟机信息交互"></a>多台虚拟机信息交互</h3><p>上面想通了，基本上一台机器的自动多次任务执行就没有什么问题了，主要是去实现。但现在涉及到不同机器之前先后执行顺序，一台执行完需要另一台机器接着做。</p>
<p>之前做过一个类似的，大体思路可以拿来用:</p>
<ol>
<li>将不同机器中的主程序加入Scheduler中</li>
<li>建立一个入口批处理bat，在其中先后调用不同VM中的Scheduler去执行主程</li>
<li>每次触发一个Scheduler运行之后利用timeout等方式等待(所以Delay时间必须要大于前一个所有test都完成的时间，不然会有conflict)</li>
</ol>
<p>前面<code>3</code>的改进版本：</p>
<ul>
<li>死等固定时间肯定是很不明智的，尤其是在消耗时间不明确的情况下，这样效率非常低。那么这个时候，在每个主程序中加入一个操作，就是在每次轮到自己执行的时候，就会在一个share folder下生成一个信息文件表示自己开始执行号，这样在接下来的VM要执行的时候就会block住，等待上一个机器完成的信息，之后再继续自己执行</li>
</ul>
<p>其实，现在的job benchmark就是用类似的思路。</p>
<h3 id="最后，TestResult"><a href="#最后，TestResult" class="headerlink" title="最后，TestResult"></a>最后，TestResult</h3><p>目前，每台机上跑的时候都会在本机生成以时间为名字的目录，并将该次的TestResult生成在该目录下。那么接下来的目标是：</p>
<ul>
<li>生成结果统一生成到Share Folder，这样方便管理，而且大家都能看到。</li>
<li>生成结果统一放在一个目录日期目录下，之后再以每台机器自己的名字为目录，再在每台机子下用参数值做目录，最后的Result就放在这个目录下。</li>
<li>optional:将所以的结果统一个Excel文件中，放在root目录下，这样每轮跑完就可以直接查看结果。</li>
</ul>
<h2 id="结尾，晚安！"><a href="#结尾，晚安！" class="headerlink" title="结尾，晚安！"></a>结尾，晚安！</h2></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2018-04-20T16:00:00.000Z" title="2018/4/21 上午12:00:00">2018-04-21</time></span><span class="level-item">Updated&nbsp;<time dateTime="2018-10-18T13:45:48.446Z" title="2018/10/18 下午9:45:48">2018-10-18</time></span><span class="level-item"> BF </span><span class="level-item">3 minutes read (About 500 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2018/04/21/2018/04/2018-04-21-ManageTxtFiles/">Manage txt files</a></h1><div class="content"><h2 id="处理txt文件"><a href="#处理txt文件" class="headerlink" title="处理txt文件"></a>处理txt文件</h2><p>在最近的项目中，需要创建数据用来测试。有时生成的文件太大，需要分散到小的文件中，或者反之。</p>
<p>之前已经有用java写的生成数据的代码，但是改起来不太方便，也没有针对性，用python就方便很多。</p>
<p>代码其实很简单，以后工作中有用到的话，可以直接拿来用，不用再花时间造轮子了：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#/usr/bin/python3</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">author: xiche</span></span><br><span class="line"><span class="string">create at: 04/21/2018</span></span><br><span class="line"><span class="string">description:</span></span><br><span class="line"><span class="string">There are two operations in this script</span></span><br><span class="line"><span class="string">    1. Aggregate several txt files to one file by the file name order which contains the same part name </span></span><br><span class="line"><span class="string">    2. Seperate one large txt file to several small files, you could control how many files you want to generate</span></span><br><span class="line"><span class="string">Change log:</span></span><br><span class="line"><span class="string">Date        Author      Version    Description</span></span><br><span class="line"><span class="string">04/21/2018  xiche       1.0        Set up this script</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> glob</span><br><span class="line"></span><br><span class="line"><span class="comment"># Aggregate all the files which name contains the name as below</span></span><br><span class="line">AGGREGATED_INPUT_FILE_PART_NAME = <span class="string">&quot;WKLMF&quot;</span></span><br><span class="line">AGGREGATED_OUTPUT_FILE_NAME     = <span class="string">&quot;AggregatedFiles.txt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># The original file which want to seperate to several files</span></span><br><span class="line">SEPERATED_INPUT_FILE_NAME   = <span class="string">&quot;AggregatedFiles.txt&quot;</span></span><br><span class="line"><span class="comment"># Output files which like Seperated_1.txt/Seperated_2.txt/Seperated_3.txt/...</span></span><br><span class="line">SEPERATED_OUTPUT_FILE_NAME  = <span class="string">&quot;Seperated.txt&quot;</span></span><br><span class="line">SEPERATED_OUTPUT_FILE_NUMS  = <span class="number">6</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getFileNameWithoutSuffix</span>(<span class="params">fullPath</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;Get filename without suffix: Filename.txt =&gt; FileName&quot;&quot;&quot;</span></span><br><span class="line">    lastIndex = fullPath.rfind(<span class="string">&#x27;.&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> fullPath[:lastIndex]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getFileNameSuffix</span>(<span class="params">fullPath</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;Get file name suffix like .txt&quot;&quot;&quot;</span></span><br><span class="line">    lastIndex = fullPath.rfind(<span class="string">&#x27;.&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> fullPath[lastIndex:]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">writeRowsListToFile</span>(<span class="params">filePath, fileRows</span>):</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(filePath, <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        <span class="keyword">for</span> rows <span class="keyword">in</span> fileRows:</span><br><span class="line">            <span class="keyword">for</span> row <span class="keyword">in</span> rows:</span><br><span class="line">                f.write(<span class="string">&quot;%s\n&quot;</span> % row)</span><br><span class="line">            </span><br><span class="line"><span class="comment"># def writeRowsToFile(filePath, rows):</span></span><br><span class="line">    <span class="comment"># with open(filePath, &#x27;w&#x27;) as f:</span></span><br><span class="line">        <span class="comment"># for row in rows:</span></span><br><span class="line">            <span class="comment"># f.write(&quot;%s\n&quot; % row)</span></span><br><span class="line">            </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">aggregateTxtFilesToOneFile</span>(<span class="params">inputFilesPartName, outputFileName</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;Main function to aggregate txt files&quot;&quot;&quot;</span></span><br><span class="line">    totalRows = []</span><br><span class="line">    list_of_files = glob.glob(<span class="string">&#x27;./*&#123;&#125;*&#x27;</span>.<span class="built_in">format</span>(inputFilesPartName))</span><br><span class="line">    <span class="keyword">for</span> filePath <span class="keyword">in</span> list_of_files:</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(filePath) <span class="keyword">as</span> f:</span><br><span class="line">            lines = f.read().splitlines()</span><br><span class="line">            totalRows.append(lines)</span><br><span class="line">    writeRowsListToFile(outputFileName, totalRows)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">seperateTxtFilesToSeveralFiles</span>(<span class="params">inputFileName, outputFileName, outputFileNums</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;Main function to seperate txt files&quot;&quot;&quot;</span></span><br><span class="line">    totalRows   = []</span><br><span class="line">    totalRowNums = <span class="number">0</span></span><br><span class="line">    rowsEachFile = <span class="number">0</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(inputFileName) <span class="keyword">as</span> f:</span><br><span class="line">        totalRows = f.read().splitlines()</span><br><span class="line">        totalRowNums = <span class="built_in">len</span>(totalRows)</span><br><span class="line">    <span class="keyword">if</span>(totalRowNums % outputFileNums == <span class="number">0</span>):</span><br><span class="line">        rowsEachFile = <span class="built_in">int</span>(totalRowNums/outputFileNums)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        rowsEachFile = <span class="built_in">int</span>(totalRowNums/outputFileNums) + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(outputFileNums):</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;&#123;&#125;_&#123;&#125;&#123;&#125;&quot;</span>.<span class="built_in">format</span>(getFileNameWithoutSuffix(outputFileName), i+<span class="number">1</span>, getFileNameSuffix(outputFileName)), <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(rowsEachFile):</span><br><span class="line">                f.write(<span class="string">&quot;%s\n&quot;</span> % totalRows[i *rowsEachFile  + j])</span><br><span class="line">            </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">__main__</span>():</span></span><br><span class="line">    aggregateTxtFilesToOneFile(AGGREGATED_INPUT_FILE_PART_NAME, AGGREGATED_OUTPUT_FILE_NAME)</span><br><span class="line">    seperateTxtFilesToSeveralFiles(SEPERATED_INPUT_FILE_NAME, SEPERATED_OUTPUT_FILE_NAME, SEPERATED_OUTPUT_FILE_NUMS)</span><br><span class="line">__main__()</span><br></pre></td></tr></table></figure>

<p>更具体的信息参考：<a target="_blank" rel="noopener" href="https://github.com/bearfly1990/PowerScript/blob/master/Private/Engineering/ManageTxtFiles/README.md">README</a><br>主要代码：<a target="_blank" rel="noopener" href="https://github.com/bearfly1990/PowerScript/tree/master/Private/Engineering/ManageTxtFiles">ManageTxtFiles</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2018-04-19T16:00:00.000Z" title="2018/4/20 上午12:00:00">2018-04-20</time></span><span class="level-item">Updated&nbsp;<time dateTime="2018-10-18T13:45:48.431Z" title="2018/10/18 下午9:45:48">2018-10-18</time></span><span class="level-item"> BF </span><span class="level-item">3 minutes read (About 487 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2018/04/20/2018/04/2018-04-20-CSVLogAnalysis/">Analyse CSV log</a></h1><div class="content"><h2 id="AnalyseCSVLogByMonth"><a href="#AnalyseCSVLogByMonth" class="headerlink" title="AnalyseCSVLogByMonth"></a>AnalyseCSVLogByMonth</h2><p>基于之前的Message Import测试工具，会生成原始的log文件<a target="_blank" rel="noopener" href="https://github.com/bearfly1990/PowerScript/blob/master/Private/Engineering/CSVLogAnalysis/TestResult.csv">TestResult.csv</a>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">path,rows,timeused(s),timeused(m),avgtime,messageDate</span><br><span class="line">Step01,60000,270.18,4.50,0.0045,20161231</span><br><span class="line">Step02,60000,197.96,3.30,0.0033,20171231</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>而现在又了新的需求，希望能统计一下基于月份的运行时间，所以我简单写了个python脚本，来解析csv文件，将同一个月份的数据group起来。</p>
<h2 id="主要流程与算法"><a href="#主要流程与算法" class="headerlink" title="主要流程与算法"></a>主要流程与算法</h2><h3 id="运行流程"><a href="#运行流程" class="headerlink" title="运行流程"></a>运行流程</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">resultList = readCSVRowsList(<span class="string">&quot;TestResult.csv&quot;</span>)</span><br><span class="line">resultList = initAndSortByMessageMonth(resultList, <span class="number">5</span>)</span><br><span class="line">resultList = combineRowsByColumn(resultList, <span class="number">5</span>)</span><br><span class="line">writeToCSVFile(<span class="string">&quot;out.csv&quot;</span>, resultList)</span><br></pre></td></tr></table></figure>
<ol>
<li>将csv文件加载到二维数组中</li>
<li>将<code>MessageDate</code>截取成yyyyMM的格式，并加入<code>#</code>，然后返回据此排序好的二维数组(List)。<br>同时在代码里可以看到我还做了特殊处理，这个是具体的需求。通用的处理可以直接删除掉。</li>
<li>将相同月份的数据Combine到一起再返回新的数组回来</li>
<li>将最后的数据写入到输出文件<a target="_blank" rel="noopener" href="https://github.com/bearfly1990/PowerScript/blob/master/Private/Engineering/CSVLogAnalysis/TestResultCombined.csv">TestResultCombined.csv</a></li>
</ol>
<h3 id="数据Combine算法"><a href="#数据Combine算法" class="headerlink" title="数据Combine算法"></a>数据Combine算法</h3><p>代码中我已经做了注释，不再过多解释，就是逐行处理，结果放到新的list里。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">combineRowsByColumn</span>(<span class="params">csvRowsList, columnIndex = <span class="number">5</span></span>):</span></span><br><span class="line">    resultList = []</span><br><span class="line">    <span class="keyword">for</span> i, row <span class="keyword">in</span> <span class="built_in">enumerate</span>(csvRowsList):</span><br><span class="line">        <span class="comment"># keep csv header and do nothing</span></span><br><span class="line">        <span class="keyword">if</span>(i == <span class="number">0</span>):</span><br><span class="line">            resultList.append(row)</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">            </span><br><span class="line">        currentValue = row[columnIndex]</span><br><span class="line">        <span class="comment"># get the month of last row</span></span><br><span class="line">        <span class="keyword">if</span>(i - <span class="number">1</span> &gt;= <span class="number">0</span>):</span><br><span class="line">            lastValue = csvRowsList[i-<span class="number">1</span>][columnIndex]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            lastValue = <span class="literal">None</span></span><br><span class="line">        <span class="comment"># get the month of next row</span></span><br><span class="line">        <span class="keyword">if</span>(i + <span class="number">1</span> &lt; <span class="built_in">len</span>(csvRowsList)):</span><br><span class="line">            nextValue = csvRowsList[i+<span class="number">1</span>][columnIndex]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            nextValue = <span class="literal">None</span></span><br><span class="line">        <span class="comment"># if last month is the same with current month, combine them</span></span><br><span class="line">        <span class="keyword">if</span>(lastValue != <span class="literal">None</span> <span class="keyword">and</span> lastValue == currentValue):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(row)):</span><br><span class="line">                <span class="comment">#ignore the month column</span></span><br><span class="line">                <span class="keyword">if</span>(j == columnIndex):</span><br><span class="line">                    <span class="keyword">pass</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    <span class="comment"># if is value, calculate them, if not ,just append them with &#x27;~&#x27;</span></span><br><span class="line">                    <span class="keyword">if</span>(isFloat(row[j])):</span><br><span class="line">                        row[j] = <span class="string">&quot;&#123;:.2f&#125;&quot;</span>.<span class="built_in">format</span>(<span class="built_in">float</span>(row[j]) + <span class="built_in">float</span>(csvRowsList[i-<span class="number">1</span>][j]))</span><br><span class="line">                    <span class="keyword">else</span>:</span><br><span class="line">                        row[j] = csvRowsList[i-<span class="number">1</span>][j] + <span class="string">&quot;~&quot;</span> + row[j]</span><br><span class="line">        <span class="comment"># if next value is different, just add current row to the new list</span></span><br><span class="line">        <span class="keyword">if</span>(currentValue != nextValue):</span><br><span class="line">                resultList.append(row)  </span><br><span class="line">    <span class="keyword">return</span> resultList    </span><br></pre></td></tr></table></figure>



<p>更具体的信息参考：<a target="_blank" rel="noopener" href="https://github.com/bearfly1990/PowerScript/blob/master/Private/Engineering/CSVLogAnalysis/README.md">README</a><br>主要代码：<a target="_blank" rel="noopener" href="https://github.com/bearfly1990/PowerScript/tree/master/Private/Engineering/CSVLogAnalysis">CSVLogAnalysis</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2018-04-18T16:00:00.000Z" title="2018/4/19 上午12:00:00">2018-04-19</time></span><span class="level-item">Updated&nbsp;<time dateTime="2018-10-18T13:45:48.431Z" title="2018/10/18 下午9:45:48">2018-10-18</time></span><span class="level-item"> BF </span><span class="level-item">2 minutes read (About 283 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2018/04/19/2018/04/2018-04-19-ImportMessages/">Import Messages</a></h1><div class="content"><h2 id="Import-Messages"><a href="#Import-Messages" class="headerlink" title="Import Messages"></a>Import Messages</h2><p>工作中需要导Message的性能测试作为benchmark，最早的时候有同事使用运行批处理的方式，一些配置和环境都是固定的，也不够灵活。</p>
<p>所以我趁着之前准备数据的基础，我搭建了一个简单的相对灵活的自动化流程。到后期稳定之后，可以做到run at everywhere。<br>当然，目前回滚数据库这一块还没有做到代码里，最后有需要的话可以加进来。</p>
<p>整个流程其实很简单：</p>
<ul>
<li>读取配置文件</li>
<li>Check环境，将一些需要自定义的配置文件指向一个固定的公共folder</li>
<li>启动基于java的Message Service，来接收messages</li>
<li>按配置文件中的文件夹信息，根据其下的txt文件名顺序依次导入message，并check数据库和import log，输出到log文件中</li>
</ul>
<p>更具体的信息参考：<a target="_blank" rel="noopener" href="https://github.com/bearfly1990/PowerScript/blob/master/Private/Engineering/ImportMessages/README.md">README</a></p>
<p>主要代码：<a target="_blank" rel="noopener" href="https://github.com/bearfly1990/PowerScript/blob/master/Private/Engineering/ImportMessages">Import Messages</a></p>
</div></article></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1 is-sticky"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/mybear.jpg" alt="bearfly1990"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">bearfly1990</p><p class="is-size-6 is-block">有熊在飞</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>HZ, China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">81</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">0</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">100</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/bearfly1990" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/bearfly1990"><i class="fab fa-github"></i></a></div></div></div><!--!--></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/favicon.ico" alt="BF Blog" height="28"></a><p class="is-size-7"><span>&copy; 2021 bearfly1990</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>